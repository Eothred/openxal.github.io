<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (1.8.0_31) on Thu Feb 05 15:44:25 EST 2015 -->
<title>EnvelopeTrackerBase</title>
<meta name="date" content="2015-02-05">
<link rel="stylesheet" type="text/css" href="../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="EnvelopeTrackerBase";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":10,"i1":10,"i2":10,"i3":10,"i4":10,"i5":10,"i6":10,"i7":10,"i8":10,"i9":10,"i10":10,"i11":10,"i12":10,"i13":10,"i14":10,"i15":10,"i16":10,"i17":10,"i18":10,"i19":10,"i20":10,"i21":10,"i22":10,"i23":10,"i24":10,"i25":10,"i26":10,"i27":10,"i28":10,"i29":10,"i30":10,"i31":10,"i32":10};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../xal/model/alg/EnvelopeTracker.html" title="class in xal.model.alg"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../xal/model/alg/EnvelopeTrackerBase.EmitGrowthModel.html" title="enum in xal.model.alg"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?xal/model/alg/EnvelopeTrackerBase.html" target="_top">Frames</a></li>
<li><a href="EnvelopeTrackerBase.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested.class.summary">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">xal.model.alg</div>
<h2 title="Class EnvelopeTrackerBase" class="title">Class EnvelopeTrackerBase</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li><a href="../../../xal/model/alg/Tracker.html" title="class in xal.model.alg">xal.model.alg.Tracker</a></li>
<li>
<ul class="inheritance">
<li>xal.model.alg.EnvelopeTrackerBase</li>
</ul>
</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Implemented Interfaces:</dt>
<dd>java.rmi.Remote, <a href="../../../xal/model/IAlgorithm.html" title="interface in xal.model">IAlgorithm</a>, <a href="../../../xal/tools/data/IArchive.html" title="interface in xal.tools.data">IArchive</a>, <a href="../../../xal/tools/data/IContextAware.html" title="interface in xal.tools.data">IContextAware</a></dd>
</dl>
<dl>
<dt>Direct Known Subclasses:</dt>
<dd><a href="../../../xal/model/alg/EnvelopeBacktracker.html" title="class in xal.model.alg">EnvelopeBacktracker</a>, <a href="../../../xal/model/alg/EnvelopeTracker.html" title="class in xal.model.alg">EnvelopeTracker</a>, <a href="../../../xal/model/alg/EnvTrackerAdapt.html" title="class in xal.model.alg">EnvTrackerAdapt</a></dd>
</dl>
<hr>
<br>
<pre>public abstract class <span class="typeNameLabel">EnvelopeTrackerBase</span>
extends <a href="../../../xal/model/alg/Tracker.html" title="class in xal.model.alg">Tracker</a></pre>
<div class="block"><h1>Abstract Base Class for Algorithms Propagating RMS Envelopes</h1>
 
 <p>This class adds functionality beyond the base class <code>Tracker</code>
 specific to tracker algorithms designed for RMS envelope beam probes, that is, 
 probes which carry the RMS statistical properties as their beam state.
 </p></div>
<dl>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>Feb 10, 2009</dd>
</dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== NESTED CLASS SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="nested.class.summary">
<!--   -->
</a>
<h3>Nested Class Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Nested Class Summary table, listing nested classes, and an explanation">
<caption><span>Nested Classes</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Class and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static class&nbsp;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../xal/model/alg/EnvelopeTrackerBase.EmitGrowthModel.html" title="enum in xal.model.alg">EnvelopeTrackerBase.EmitGrowthModel</a></span></code>
<div class="block">RF Gap Emittance Growth Models</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static class&nbsp;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../xal/model/alg/EnvelopeTrackerBase.PhasePlane.html" title="enum in xal.model.alg">EnvelopeTrackerBase.PhasePlane</a></span></code>
<div class="block">Enumerations for supported phase planes</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field.summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Field Summary table, listing fields, and an explanation">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Field and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected static java.lang.String</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../xal/model/alg/EnvelopeTrackerBase.html#ATTR_EMITGROWTH">ATTR_EMITGROWTH</a></span></code>
<div class="block">label for emittance growth flag</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static java.lang.String</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../xal/model/alg/EnvelopeTrackerBase.html#ATTR_SCHEFF">ATTR_SCHEFF</a></span></code>
<div class="block">label for use simple tracking (no space charge)</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static java.lang.String</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../xal/model/alg/EnvelopeTrackerBase.html#ATTR_STEPSIZE">ATTR_STEPSIZE</a></span></code>
<div class="block">label for maximum step size</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static java.lang.String</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../xal/model/alg/EnvelopeTrackerBase.html#ATTR_USESPACECHARGE">ATTR_USESPACECHARGE</a></span></code>
<div class="block">label for use simple tracking (no space charge)</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static java.lang.String</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../xal/model/alg/EnvelopeTrackerBase.html#LABEL_OPTIONS">LABEL_OPTIONS</a></span></code>
<div class="block">data node label for EnvelopeTracker settings</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static java.lang.String</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../xal/model/alg/EnvelopeTrackerBase.html#TBL_LBL_ENVBASETRACKER">TBL_LBL_ENVBASETRACKER</a></span></code>
<div class="block">EditContext table name containing basic envelope tracking parameters</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="fields.inherited.from.class.xal.model.alg.Tracker">
<!--   -->
</a>
<h3>Fields inherited from class&nbsp;xal.model.alg.<a href="../../../xal/model/alg/Tracker.html" title="class in xal.model.alg">Tracker</a></h3>
<code><a href="../../../xal/model/alg/Tracker.html#ATTRTAG_DEBUG">ATTRTAG_DEBUG</a>, <a href="../../../xal/model/alg/Tracker.html#ATTRTAG_RFGAP_PHASE">ATTRTAG_RFGAP_PHASE</a>, <a href="../../../xal/model/alg/Tracker.html#ATTRTAG_TYPE">ATTRTAG_TYPE</a>, <a href="../../../xal/model/alg/Tracker.html#ATTRTAG_UPDATE">ATTRTAG_UPDATE</a>, <a href="../../../xal/model/alg/Tracker.html#ATTRTAG_VER">ATTRTAG_VER</a>, <a href="../../../xal/model/alg/Tracker.html#NODETAG_ALG">NODETAG_ALG</a>, <a href="../../../xal/model/alg/Tracker.html#NODETAG_TRACKER">NODETAG_TRACKER</a>, <a href="../../../xal/model/alg/Tracker.html#TBL_PRIM_KEY_NAME">TBL_PRIM_KEY_NAME</a>, <a href="../../../xal/model/alg/Tracker.html#UPDATE_ALWAYS">UPDATE_ALWAYS</a>, <a href="../../../xal/model/alg/Tracker.html#UPDATE_CUSTOM">UPDATE_CUSTOM</a>, <a href="../../../xal/model/alg/Tracker.html#UPDATE_ENTRANCE">UPDATE_ENTRANCE</a>, <a href="../../../xal/model/alg/Tracker.html#UPDATE_ENTRANCEANDEXIT">UPDATE_ENTRANCEANDEXIT</a>, <a href="../../../xal/model/alg/Tracker.html#UPDATE_EXIT">UPDATE_EXIT</a></code></li>
</ul>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><span class="memberNameLink"><a href="../../../xal/model/alg/EnvelopeTrackerBase.html#EnvelopeTrackerBase-xal.model.alg.EnvelopeTrackerBase-">EnvelopeTrackerBase</a></span>(<a href="../../../xal/model/alg/EnvelopeTrackerBase.html" title="class in xal.model.alg">EnvelopeTrackerBase</a>&nbsp;sourceTracker)</code>
<div class="block">Copy constructor for EnvelopeTracker</div>
</td>
</tr>
<tr class="rowColor">
<td class="colOne"><code><span class="memberNameLink"><a href="../../../xal/model/alg/EnvelopeTrackerBase.html#EnvelopeTrackerBase-java.lang.String-int-java.lang.Class-">EnvelopeTrackerBase</a></span>(java.lang.String&nbsp;strType,
                   int&nbsp;intVersion,
                   java.lang.Class&lt;? extends <a href="../../../xal/model/IProbe.html" title="interface in xal.model">IProbe</a>&gt;&nbsp;clsProbeType)</code>
<div class="block">EnvelopeTrackerBase Constructor</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>protected double</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../xal/model/alg/EnvelopeTrackerBase.html#compEmitGrowthFunction-xal.model.alg.EnvelopeTrackerBase.PhasePlane-double-double-">compEmitGrowthFunction</a></span>(<a href="../../../xal/model/alg/EnvelopeTrackerBase.PhasePlane.html" title="enum in xal.model.alg">EnvelopeTrackerBase.PhasePlane</a>&nbsp;plane,
                      double&nbsp;phi_s,
                      double&nbsp;dphi)</code>
<div class="block">Emittance Growth Function for Phase Spread in RF Gap</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>protected double</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../xal/model/alg/EnvelopeTrackerBase.html#compLongFourierTransform-double-">compLongFourierTransform</a></span>(double&nbsp;dphi)</code>
<div class="block">Longitudinal Fourier Transform for Uniform Distribution</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>protected <a href="../../../xal/tools/beam/PhaseMatrix.html" title="class in xal.tools.beam">PhaseMatrix</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../xal/model/alg/EnvelopeTrackerBase.html#compScheffMatrix-double-xal.model.probe.EnvelopeProbe-xal.model.IElement-">compScheffMatrix</a></span>(double&nbsp;dblLen,
                <a href="../../../xal/model/probe/EnvelopeProbe.html" title="class in xal.model.probe">EnvelopeProbe</a>&nbsp;probe,
                <a href="../../../xal/model/IElement.html" title="interface in xal.model">IElement</a>&nbsp;elem)</code>
<div class="block">Method to compute the space charge transfer matrix for the given
 length, probe and modeling element.</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>protected double</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../xal/model/alg/EnvelopeTrackerBase.html#compTransFourierTransform-double-">compTransFourierTransform</a></span>(double&nbsp;dphi)</code>
<div class="block">Transverse Emittance Growth Fourier Transform</div>
</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code>double</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../xal/model/alg/EnvelopeTrackerBase.html#correctLongSigmaPhaseSpread-xal.model.probe.EnvelopeProbe-xal.model.elem.IdealRfGap-">correctLongSigmaPhaseSpread</a></span>(<a href="../../../xal/model/probe/EnvelopeProbe.html" title="class in xal.model.probe">EnvelopeProbe</a>&nbsp;probe,
                           <a href="../../../xal/model/elem/IdealRfGap.html" title="class in xal.model.elem">IdealRfGap</a>&nbsp;gap)</code>
<div class="block">
 Calculation of emittance increase due to phase spread
 based on calculations in Trace3d (RfGap.f)</div>
</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code>protected double[]</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../xal/model/alg/EnvelopeTrackerBase.html#correctSigmaPhaseSpread-xal.model.probe.EnvelopeProbe-xal.model.elem.IdealRfGap-">correctSigmaPhaseSpread</a></span>(<a href="../../../xal/model/probe/EnvelopeProbe.html" title="class in xal.model.probe">EnvelopeProbe</a>&nbsp;probe,
                       <a href="../../../xal/model/elem/IdealRfGap.html" title="class in xal.model.elem">IdealRfGap</a>&nbsp;gap)</code>
<div class="block">new implementation by sako, 7 Aug 06, to do trans/long simultanously
 used in EnvTrackerAdapt, EnvelopeTracker</div>
</td>
</tr>
<tr id="i6" class="altColor">
<td class="colFirst"><code>protected double</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../xal/model/alg/EnvelopeTrackerBase.html#correctTransFocusingPhaseSpread-xal.model.probe.EnvelopeProbe-xal.model.elem.IdealRfGap-">correctTransFocusingPhaseSpread</a></span>(<a href="../../../xal/model/probe/EnvelopeProbe.html" title="class in xal.model.probe">EnvelopeProbe</a>&nbsp;probe,
                               <a href="../../../xal/model/elem/IdealRfGap.html" title="class in xal.model.elem">IdealRfGap</a>&nbsp;gap)</code>
<div class="block">Moved from <code>IdealRfGap</code>.</div>
</td>
</tr>
<tr id="i7" class="rowColor">
<td class="colFirst"><code>double</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../xal/model/alg/EnvelopeTrackerBase.html#correctTransSigmaPhaseSpread-xal.model.probe.EnvelopeProbe-xal.model.elem.IdealRfGap-">correctTransSigmaPhaseSpread</a></span>(<a href="../../../xal/model/probe/EnvelopeProbe.html" title="class in xal.model.probe">EnvelopeProbe</a>&nbsp;probe,
                            <a href="../../../xal/model/elem/IdealRfGap.html" title="class in xal.model.elem">IdealRfGap</a>&nbsp;gap)</code>
<div class="block">
 Calculation of emittance increase due to phase spread
 based on calculations in Trace3d (RfGap.f)</div>
</td>
</tr>
<tr id="i8" class="altColor">
<td class="colFirst"><code>protected double</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../xal/model/alg/EnvelopeTrackerBase.html#effPhaseSpread-xal.model.probe.EnvelopeProbe-xal.model.elem.IdealRfGap-">effPhaseSpread</a></span>(<a href="../../../xal/model/probe/EnvelopeProbe.html" title="class in xal.model.probe">EnvelopeProbe</a>&nbsp;probe,
              <a href="../../../xal/model/elem/IdealRfGap.html" title="class in xal.model.elem">IdealRfGap</a>&nbsp;elem)</code>
<div class="block">Effective Phase Spread for Equivalent Uniform Beam</div>
</td>
</tr>
<tr id="i9" class="rowColor">
<td class="colFirst"><code>protected double</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../xal/model/alg/EnvelopeTrackerBase.html#fourierLong1dGaussian-double-">fourierLong1dGaussian</a></span>(double&nbsp;dphi)</code>
<div class="block">Longitudinal Fourier Transform for 2D Gaussian Distribution</div>
</td>
</tr>
<tr id="i10" class="altColor">
<td class="colFirst"><code>protected double</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../xal/model/alg/EnvelopeTrackerBase.html#fourierLong1dUniform-double-">fourierLong1dUniform</a></span>(double&nbsp;dphi)</code>
<div class="block">Longitudinal Fourier Transform for Single Phase Plane</div>
</td>
</tr>
<tr id="i11" class="rowColor">
<td class="colFirst"><code>protected double</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../xal/model/alg/EnvelopeTrackerBase.html#fourierLong3dGaussian-double-">fourierLong3dGaussian</a></span>(double&nbsp;dphi)</code>
<div class="block">Longitudinal Fourier Transform for 3D Gaussian Distribution</div>
</td>
</tr>
<tr id="i12" class="altColor">
<td class="colFirst"><code>protected double</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../xal/model/alg/EnvelopeTrackerBase.html#fourierLong3dUniform-double-">fourierLong3dUniform</a></span>(double&nbsp;dphi)</code>
<div class="block">Longitudinal Fourier Transform for 3D Uniform Distribution</div>
</td>
</tr>
<tr id="i13" class="rowColor">
<td class="colFirst"><code>protected double</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../xal/model/alg/EnvelopeTrackerBase.html#fourierLongTrace3d-double-">fourierLongTrace3d</a></span>(double&nbsp;dphi)</code>
<div class="block">Longitudinal Fourier Transform given by Trace3D</div>
</td>
</tr>
<tr id="i14" class="altColor">
<td class="colFirst"><code>protected double</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../xal/model/alg/EnvelopeTrackerBase.html#fourierTrans1dGaussian-double-">fourierTrans1dGaussian</a></span>(double&nbsp;dphi)</code>
<div class="block">Transverse Fourier Transform for 2D Gaussian Distribution</div>
</td>
</tr>
<tr id="i15" class="rowColor">
<td class="colFirst"><code>protected double</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../xal/model/alg/EnvelopeTrackerBase.html#fourierTrans1dUniform-double-">fourierTrans1dUniform</a></span>(double&nbsp;dphi)</code>
<div class="block">Transverse Fourier Transform for Single Phase Plane</div>
</td>
</tr>
<tr id="i16" class="altColor">
<td class="colFirst"><code>protected double</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../xal/model/alg/EnvelopeTrackerBase.html#fourierTrans3dGaussian-double-">fourierTrans3dGaussian</a></span>(double&nbsp;dphi)</code>
<div class="block">Transverse Fourier Transform for 3D Gaussian Distribution</div>
</td>
</tr>
<tr id="i17" class="rowColor">
<td class="colFirst"><code>protected double</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../xal/model/alg/EnvelopeTrackerBase.html#fourierTrans3dUniform-double-">fourierTrans3dUniform</a></span>(double&nbsp;dphi)</code>
<div class="block">Transverse Fourier Transform for 3D Uniform Distribution</div>
</td>
</tr>
<tr id="i18" class="altColor">
<td class="colFirst"><code>protected double</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../xal/model/alg/EnvelopeTrackerBase.html#fourierTransTrace3d-double-">fourierTransTrace3d</a></span>(double&nbsp;dphi)</code>
<div class="block">Transverse Fourier Transform given by Trace3D</div>
</td>
</tr>
<tr id="i19" class="rowColor">
<td class="colFirst"><code><a href="../../../xal/model/alg/EnvelopeTrackerBase.EmitGrowthModel.html" title="enum in xal.model.alg">EnvelopeTrackerBase.EmitGrowthModel</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../xal/model/alg/EnvelopeTrackerBase.html#getEmitGrowthModel--">getEmitGrowthModel</a></span>()</code>
<div class="block">Return the emittance growth model</div>
</td>
</tr>
<tr id="i20" class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../xal/model/alg/EnvelopeTrackerBase.html#getEmittanceGrowthFlag--">getEmittanceGrowthFlag</a></span>()</code>
<div class="block">Return the emittance growth flag.</div>
</td>
</tr>
<tr id="i21" class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../xal/model/alg/EnvelopeTrackerBase.html#getSpaceChargeFlag--">getSpaceChargeFlag</a></span>()</code>
<div class="block">Returns the flag determining whether or not space charge effects are being
 considered during the propagation.</div>
</td>
</tr>
<tr id="i22" class="altColor">
<td class="colFirst"><code>double</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../xal/model/alg/EnvelopeTrackerBase.html#getStepSize--">getStepSize</a></span>()</code>
<div class="block">
 Returns the maximum element subsection length (in meters) that the probe 
 may be advanced before applying a space charge kick when space charge
 is present.</div>
</td>
</tr>
<tr id="i23" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../xal/model/alg/EnvelopeTrackerBase.html#load-xal.tools.data.DataAdaptor-">load</a></span>(<a href="../../../xal/tools/data/DataAdaptor.html" title="interface in xal.tools.data">DataAdaptor</a>&nbsp;daptArchive)</code>
<div class="block">Load the parameters of the algorithm from a data source exposing the
 <code>IArchive</code> interface.</div>
</td>
</tr>
<tr id="i24" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../xal/model/alg/EnvelopeTrackerBase.html#load-java.lang.String-xal.tools.data.EditContext-">load</a></span>(java.lang.String&nbsp;strPrimKeyVal,
    <a href="../../../xal/tools/data/EditContext.html" title="class in xal.tools.data">EditContext</a>&nbsp;ecTableData)</code>
<div class="block">Load the parameters of this <code>IAlgorithm</code> object from the
 table data in the given <code>EditContext</code>.</div>
</td>
</tr>
<tr id="i25" class="rowColor">
<td class="colFirst"><code>protected <a href="../../../xal/tools/beam/PhaseMatrix.html" title="class in xal.tools.beam">PhaseMatrix</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../xal/model/alg/EnvelopeTrackerBase.html#modTransferMatrixForDisplError-double-double-double-xal.tools.beam.PhaseMatrix-">modTransferMatrixForDisplError</a></span>(double&nbsp;dx,
                              double&nbsp;dy,
                              double&nbsp;dz,
                              <a href="../../../xal/tools/beam/PhaseMatrix.html" title="class in xal.tools.beam">PhaseMatrix</a>&nbsp;matPhi)</code>
<div class="block">Add Displacement Error to Transfer Matrix</div>
</td>
</tr>
<tr id="i26" class="altColor">
<td class="colFirst"><code>protected <a href="../../../xal/tools/beam/PhaseMatrix.html" title="class in xal.tools.beam">PhaseMatrix</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../xal/model/alg/EnvelopeTrackerBase.html#modTransferMatrixForEmitGrowth-double-xal.tools.beam.PhaseMatrix-">modTransferMatrixForEmitGrowth</a></span>(double&nbsp;dphi,
                              <a href="../../../xal/tools/beam/PhaseMatrix.html" title="class in xal.tools.beam">PhaseMatrix</a>&nbsp;matPhi)</code>
<div class="block">
 Method to modify the transfer matrix when we are simulating emittance
 growth.</div>
</td>
</tr>
<tr id="i27" class="rowColor">
<td class="colFirst"><code>protected double</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../xal/model/alg/EnvelopeTrackerBase.html#phaseSpread-xal.model.probe.EnvelopeProbe-xal.model.elem.IdealRfGap-">phaseSpread</a></span>(<a href="../../../xal/model/probe/EnvelopeProbe.html" title="class in xal.model.probe">EnvelopeProbe</a>&nbsp;probe,
           <a href="../../../xal/model/elem/IdealRfGap.html" title="class in xal.model.elem">IdealRfGap</a>&nbsp;gap)</code>
<div class="block">
 Compute the phase spread of the bunch for a probe (based on Trace3D RfGap.f)</div>
</td>
</tr>
<tr id="i28" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../xal/model/alg/EnvelopeTrackerBase.html#save-xal.tools.data.DataAdaptor-">save</a></span>(<a href="../../../xal/tools/data/DataAdaptor.html" title="interface in xal.tools.data">DataAdaptor</a>&nbsp;daptArchive)</code>
<div class="block">Save the state and settings of this algorithm to a data source 
 exposing the <code>DataAdaptor</code> interface.</div>
</td>
</tr>
<tr id="i29" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../xal/model/alg/EnvelopeTrackerBase.html#setEmitGrowthModel-xal.model.alg.EnvelopeTrackerBase.EmitGrowthModel-">setEmitGrowthModel</a></span>(<a href="../../../xal/model/alg/EnvelopeTrackerBase.EmitGrowthModel.html" title="enum in xal.model.alg">EnvelopeTrackerBase.EmitGrowthModel</a>&nbsp;enmModel)</code>
<div class="block">Set the emittance growth mechanism</div>
</td>
</tr>
<tr id="i30" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../xal/model/alg/EnvelopeTrackerBase.html#setEmittanceGrowth-boolean-">setEmittanceGrowth</a></span>(boolean&nbsp;bolEmitGrowth)</code>
<div class="block">
 Set the emittance growth flag.</div>
</td>
</tr>
<tr id="i31" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../xal/model/alg/EnvelopeTrackerBase.html#setStepSize-double-">setStepSize</a></span>(double&nbsp;step)</code>
<div class="block">Set maximum step size allowed between space charge kicks</div>
</td>
</tr>
<tr id="i32" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../xal/model/alg/EnvelopeTrackerBase.html#setUseSpacecharge-boolean-">setUseSpacecharge</a></span>(boolean&nbsp;tf)</code>
<div class="block">
 Method to toggle the flag to use/not use space charge calculations.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.xal.model.alg.Tracker">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;xal.model.alg.<a href="../../../xal/model/alg/Tracker.html" title="class in xal.model.alg">Tracker</a></h3>
<code><a href="../../../xal/model/alg/Tracker.html#advanceProbe-xal.model.IProbe-xal.model.IElement-double-">advanceProbe</a>, <a href="../../../xal/model/alg/Tracker.html#doPropagation-xal.model.IProbe-xal.model.IElement-">doPropagation</a>, <a href="../../../xal/model/alg/Tracker.html#getDebugMode--">getDebugMode</a>, <a href="../../../xal/model/alg/Tracker.html#getElemPosition--">getElemPosition</a>, <a href="../../../xal/model/alg/Tracker.html#getProbeType--">getProbeType</a>, <a href="../../../xal/model/alg/Tracker.html#getProbeUpdatePolicy--">getProbeUpdatePolicy</a>, <a href="../../../xal/model/alg/Tracker.html#getStartElementId--">getStartElementId</a>, <a href="../../../xal/model/alg/Tracker.html#getStopElementId--">getStopElementId</a>, <a href="../../../xal/model/alg/Tracker.html#getType--">getType</a>, <a href="../../../xal/model/alg/Tracker.html#getVersion--">getVersion</a>, <a href="../../../xal/model/alg/Tracker.html#initialize--">initialize</a>, <a href="../../../xal/model/alg/Tracker.html#isStopElementIncluded--">isStopElementIncluded</a>, <a href="../../../xal/model/alg/Tracker.html#newFromEditContext-xal.smf.AcceleratorSeq-">newFromEditContext</a>, <a href="../../../xal/model/alg/Tracker.html#newFromEditContext-java.lang.String-xal.smf.AcceleratorSeq-">newFromEditContext</a>, <a href="../../../xal/model/alg/Tracker.html#newInstance-xal.tools.data.DataAdaptor-">newInstance</a>, <a href="../../../xal/model/alg/Tracker.html#propagate-xal.model.IProbe-xal.model.IElement-">propagate</a>, <a href="../../../xal/model/alg/Tracker.html#registerProbeType-java.lang.Class-">registerProbeType</a>, <a href="../../../xal/model/alg/Tracker.html#retractProbe-xal.model.IProbe-xal.model.IElement-double-">retractProbe</a>, <a href="../../../xal/model/alg/Tracker.html#setDebugMode-boolean-">setDebugMode</a>, <a href="../../../xal/model/alg/Tracker.html#setElemPosition-double-">setElemPosition</a>, <a href="../../../xal/model/alg/Tracker.html#setIncludeStopElement-boolean-">setIncludeStopElement</a>, <a href="../../../xal/model/alg/Tracker.html#setProbeUpdatePolicy-int-">setProbeUpdatePolicy</a>, <a href="../../../xal/model/alg/Tracker.html#setRfGapPhaseCalculation-boolean-">setRfGapPhaseCalculation</a>, <a href="../../../xal/model/alg/Tracker.html#setStartElementId-java.lang.String-">setStartElementId</a>, <a href="../../../xal/model/alg/Tracker.html#setStopElementId-java.lang.String-">setStopElementId</a>, <a href="../../../xal/model/alg/Tracker.html#unsetStartElementId--">unsetStartElementId</a>, <a href="../../../xal/model/alg/Tracker.html#unsetStopElementId--">unsetStopElementId</a>, <a href="../../../xal/model/alg/Tracker.html#useRfGapPhaseCalculation--">useRfGapPhaseCalculation</a>, <a href="../../../xal/model/alg/Tracker.html#validElement-xal.model.IElement-">validElement</a>, <a href="../../../xal/model/alg/Tracker.html#validProbe-xal.model.IProbe-">validProbe</a></code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.xal.model.IAlgorithm">
<!--   -->
</a>
<h3>Methods inherited from interface&nbsp;xal.model.<a href="../../../xal/model/IAlgorithm.html" title="interface in xal.model">IAlgorithm</a></h3>
<code><a href="../../../xal/model/IAlgorithm.html#copy--">copy</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<ul class="blockList">
<li class="blockList"><a name="field.detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a name="TBL_LBL_ENVBASETRACKER">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>TBL_LBL_ENVBASETRACKER</h4>
<pre>public static final&nbsp;java.lang.String TBL_LBL_ENVBASETRACKER</pre>
<div class="block">EditContext table name containing basic envelope tracking parameters</div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../constant-values.html#xal.model.alg.EnvelopeTrackerBase.TBL_LBL_ENVBASETRACKER">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a name="LABEL_OPTIONS">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>LABEL_OPTIONS</h4>
<pre>public static final&nbsp;java.lang.String LABEL_OPTIONS</pre>
<div class="block">data node label for EnvelopeTracker settings</div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../constant-values.html#xal.model.alg.EnvelopeTrackerBase.LABEL_OPTIONS">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a name="ATTR_SCHEFF">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>ATTR_SCHEFF</h4>
<pre>public static final&nbsp;java.lang.String ATTR_SCHEFF</pre>
<div class="block">label for use simple tracking (no space charge)</div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../constant-values.html#xal.model.alg.EnvelopeTrackerBase.ATTR_SCHEFF">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a name="ATTR_USESPACECHARGE">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>ATTR_USESPACECHARGE</h4>
<pre>public static final&nbsp;java.lang.String ATTR_USESPACECHARGE</pre>
<div class="block">label for use simple tracking (no space charge)</div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../constant-values.html#xal.model.alg.EnvelopeTrackerBase.ATTR_USESPACECHARGE">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a name="ATTR_EMITGROWTH">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>ATTR_EMITGROWTH</h4>
<pre>protected static final&nbsp;java.lang.String ATTR_EMITGROWTH</pre>
<div class="block">label for emittance growth flag</div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../constant-values.html#xal.model.alg.EnvelopeTrackerBase.ATTR_EMITGROWTH">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a name="ATTR_STEPSIZE">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>ATTR_STEPSIZE</h4>
<pre>public static final&nbsp;java.lang.String ATTR_STEPSIZE</pre>
<div class="block">label for maximum step size</div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../constant-values.html#xal.model.alg.EnvelopeTrackerBase.ATTR_STEPSIZE">Constant Field Values</a></dd>
</dl>
</li>
</ul>
</li>
</ul>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="EnvelopeTrackerBase-java.lang.String-int-java.lang.Class-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>EnvelopeTrackerBase</h4>
<pre>public&nbsp;EnvelopeTrackerBase(java.lang.String&nbsp;strType,
                           int&nbsp;intVersion,
                           java.lang.Class&lt;? extends <a href="../../../xal/model/IProbe.html" title="interface in xal.model">IProbe</a>&gt;&nbsp;clsProbeType)</pre>
<div class="block"><h2>EnvelopeTrackerBase Constructor</h2>
 <p>
 This should be used by child classes to pass up
 their class properties.
 </p></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>strType</code> - string type identifier of the class</dd>
<dd><code>intVersion</code> - version number of class implementation</dd>
<dd><code>clsProbeType</code> - the class type of valid probe</dd>
</dl>
</li>
</ul>
<a name="EnvelopeTrackerBase-xal.model.alg.EnvelopeTrackerBase-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>EnvelopeTrackerBase</h4>
<pre>public&nbsp;EnvelopeTrackerBase(<a href="../../../xal/model/alg/EnvelopeTrackerBase.html" title="class in xal.model.alg">EnvelopeTrackerBase</a>&nbsp;sourceTracker)</pre>
<div class="block">Copy constructor for EnvelopeTracker</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>sourceTracker</code> - Tracker that is being copied</dd>
</dl>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="setStepSize-double-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setStepSize</h4>
<pre>public&nbsp;void&nbsp;setStepSize(double&nbsp;step)</pre>
<div class="block">Set maximum step size allowed between space charge kicks</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>step</code> - the new maximum step size for space charge calculations</dd>
</dl>
</li>
</ul>
<a name="setUseSpacecharge-boolean-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setUseSpacecharge</h4>
<pre>public&nbsp;void&nbsp;setUseSpacecharge(boolean&nbsp;tf)</pre>
<div class="block"><p>
 Method to toggle the flag to use/not use space charge calculations. 
 </p></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>tf</code> - the truth flag</dd>
</dl>
</li>
</ul>
<a name="setEmittanceGrowth-boolean-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setEmittanceGrowth</h4>
<pre>public&nbsp;void&nbsp;setEmittanceGrowth(boolean&nbsp;bolEmitGrowth)</pre>
<div class="block"><p>
 Set the emittance growth flag.  If set true then the
 algorithm will simulate emittance growth through RF gaps.
 </p>
 <p>
 <strong>NOTE</strong>: (CKA)
 <br/>
 &middot; If set, the dynamics will no longer be consistent since
 the response matrix and betatron phases will not reproduce
 the current Twiss parameters.
 </p></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>bolEmitGrowth</code> - set true to simulation emittance growth</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../xal/model/elem/IdealRfGap.html" title="class in xal.model.elem"><code>IdealRfGap</code></a>, 
<a href="../../../xal/model/alg/EnvelopeTrackerBase.html#setEmitGrowthModel-xal.model.alg.EnvelopeTrackerBase.EmitGrowthModel-"><code>setEmitGrowthModel(EmitGrowthModel)</code></a></dd>
</dl>
</li>
</ul>
<a name="setEmitGrowthModel-xal.model.alg.EnvelopeTrackerBase.EmitGrowthModel-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setEmitGrowthModel</h4>
<pre>public&nbsp;void&nbsp;setEmitGrowthModel(<a href="../../../xal/model/alg/EnvelopeTrackerBase.EmitGrowthModel.html" title="enum in xal.model.alg">EnvelopeTrackerBase.EmitGrowthModel</a>&nbsp;enmModel)</pre>
<div class="block"><h2>Set the emittance growth mechanism</h2>
 <p>
 Set the current mechanism for simulation emittance
 growth from RF accelerating gaps.  We can either use the 
 same model as <code>Trace3D</code> or the
 generalized technique described in C.K. Allen <i>et. al.</i> 
 (see references below).  This applies primarily to the 
 longitudinal situation since the transverse cases show
 very good agreement.
 </p>
 <p>
 Since longitudinal emittance growth mechanism is
 not well documented in the <code>Trace3D</code> manual,
 it is somewhat unclear how the effect is being modeled.  However,
 it does appear to create a result that tracks the
 <code>IMPACT</code> simulation better than the CKA method (at
 least for one case).  At this point it is unclear whether there
 is an error in the analysis of C.K. Allen, or <code>Trace3D</code>
 is simply more accurate.
 </p>
 <p>
 <strong>NOTES</strong>: (CKA)
 <br/>
 &middot; This flag only has an effect when the 
 <code>setEmittanceGrowth()</code> feature is set to <code>true</code>.
 </p>
 <p>
 <strong>References</strong>
 <br/>
 [1] M. Weiss,
      "Bunching of Intense Proton Beams with Six-Dimensional
       Matching to the Linac Acceptance", CERN/MPS/LI report 73-2,
       Geneva, Switzerland (1978).
 <br/>
 [2] K.R. Crandall and D.P. Rusthoi, 
          "Trace 3-D Documentation", 
          LANL Report LA-UR-97-887 (1997), Appendix F.
 <br/>
 [3] C.K. Allen, H. Sako, M. Ikegami, and G. Shen, "Emittance Growth
         Due to Phase Spread 
         for Proton Beams in Radio Frequency Accelerating Gaps", 
         (in preperation).
 </p></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>enmModel</code> - use the <code>Trace3D</code> method or the 
                    C.K. Allen <i>et. al.</i> method</dd>
</dl>
</li>
</ul>
<a name="getStepSize--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getStepSize</h4>
<pre>public&nbsp;double&nbsp;getStepSize()</pre>
<div class="block"><p>
 Returns the maximum element subsection length (in meters) that the probe 
 may be advanced before applying a space charge kick when space charge
 is present.
 </p></div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>Maximum space charge integration step size.</dd>
</dl>
</li>
</ul>
<a name="getSpaceChargeFlag--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getSpaceChargeFlag</h4>
<pre>public&nbsp;boolean&nbsp;getSpaceChargeFlag()</pre>
<div class="block">Returns the flag determining whether or not space charge effects are being
 considered during the propagation.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>true if space charge forces are used, false otherwise</dd>
</dl>
</li>
</ul>
<a name="getEmittanceGrowthFlag--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getEmittanceGrowthFlag</h4>
<pre>public&nbsp;boolean&nbsp;getEmittanceGrowthFlag()</pre>
<div class="block">Return the emittance growth flag.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>true if we are simulating emittance growth, false otherwise</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../xal/model/alg/EnvelopeTrackerBase.html#setEmittanceGrowth-boolean-"><code>setEmittanceGrowth(boolean)</code></a></dd>
</dl>
</li>
</ul>
<a name="getEmitGrowthModel--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getEmitGrowthModel</h4>
<pre>public&nbsp;<a href="../../../xal/model/alg/EnvelopeTrackerBase.EmitGrowthModel.html" title="enum in xal.model.alg">EnvelopeTrackerBase.EmitGrowthModel</a>&nbsp;getEmitGrowthModel()</pre>
<div class="block"><h2>Return the emittance growth model</h2>
 <p>
 Get the current mechanism for simulating emittance
 growth from RF accelerating gaps.  We are either using the 
 that of <code>Trace3D</code> or the 
 generalized technique described in C.K. Allen <i>et. al.</i>
 (see references below).  This applies primarily to the 
 longitudinal situation since the transverse cases show
 very good agreement.
 </p>
 <p>
 Since longitudinal emittance growth mechanism is
 not well documented in the <code>Trace3D</code> manual,
 it is somewhat unclear how the effect is being modeled.  However,
 it does appear to create a result that tracks the
 <code>IMPACT</code> simulation better than the CKA method (at
 least for one case).  At this point it is unclear whether there
 is an error in the analysis of C.K. Allen, or <code>Trace3D</code>
 is simply more accurate.
 </p>
 <p>
 <strong>NOTES</strong>: (CKA)
 <br/>
 &middot; This flag only has an effect when the 
 <code>setEmittanceGrowth()</code> feature is set to <code>true</code>.
 </p>
 <p>
 <strong>References</strong>
 <br/>
 [1] M. Weiss,
      "Bunching of Intense Proton Beams with Six-Dimensional
       Matching to the Linac Acceptance", CERN/MPS/LI report 73-2,
       Geneva, Switzerland (1978).
 <br/>
 [2] K.R. Crandall and D.P. Rusthoi, 
          "Trace 3-D Documentation", 
          LANL Report LA-UR-97-887 (1997), Appendix F.
 <br/>
 [3] C.K. Allen, H. Sako, M. Ikegami, and G. Shen, "Emittance Growth
         Due to Phase Spread 
         for Proton Beams in Radio Frequency Accelerating Gaps", 
         (in preperation).
 </p></div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>enumeration code for particular emittance growth mechanism</dd>
</dl>
</li>
</ul>
<a name="load-java.lang.String-xal.tools.data.EditContext-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>load</h4>
<pre>public&nbsp;void&nbsp;load(java.lang.String&nbsp;strPrimKeyVal,
                 <a href="../../../xal/tools/data/EditContext.html" title="class in xal.tools.data">EditContext</a>&nbsp;ecTableData)
          throws <a href="../../../xal/tools/data/DataFormatException.html" title="class in xal.tools.data">DataFormatException</a></pre>
<div class="block">Load the parameters of this <code>IAlgorithm</code> object from the
 table data in the given <code>EditContext</code>.  
 
 Here we load only the parameters specific to the base class.  It is expected
 that Subclasses should override this method to recover the data particular 
 to there own operation.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../xal/tools/data/IContextAware.html#load-java.lang.String-xal.tools.data.EditContext-">load</a></code>&nbsp;in interface&nbsp;<code><a href="../../../xal/tools/data/IContextAware.html" title="interface in xal.tools.data">IContextAware</a></code></dd>
<dt><span class="overrideSpecifyLabel">Overrides:</span></dt>
<dd><code><a href="../../../xal/model/alg/Tracker.html#load-java.lang.String-xal.tools.data.EditContext-">load</a></code>&nbsp;in class&nbsp;<code><a href="../../../xal/model/alg/Tracker.html" title="class in xal.model.alg">Tracker</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>strPrimKeyVal</code> - primary key value specifying the name of the data record</dd>
<dd><code>ecTableData</code> - EditContext containing table data</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../xal/tools/data/DataFormatException.html" title="class in xal.tools.data">DataFormatException</a></code> - bad data format - error in reading</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../xal/tools/data/IContextAware.html#load-java.lang.String-xal.tools.data.EditContext-"><code>IContextAware.load(String, xal.tools.data.EditContext)</code></a></dd>
</dl>
</li>
</ul>
<a name="load-xal.tools.data.DataAdaptor-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>load</h4>
<pre>public&nbsp;void&nbsp;load(<a href="../../../xal/tools/data/DataAdaptor.html" title="interface in xal.tools.data">DataAdaptor</a>&nbsp;daptArchive)</pre>
<div class="block">Load the parameters of the algorithm from a data source exposing the
 <code>IArchive</code> interface.
 The superclass <code>load</code> method is called first, then the properties
 particular to <code>EnvTrackerAdapt<code> are loaded.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../xal/tools/data/IArchive.html#load-xal.tools.data.DataAdaptor-">load</a></code>&nbsp;in interface&nbsp;<code><a href="../../../xal/tools/data/IArchive.html" title="interface in xal.tools.data">IArchive</a></code></dd>
<dt><span class="overrideSpecifyLabel">Overrides:</span></dt>
<dd><code><a href="../../../xal/model/alg/Tracker.html#load-xal.tools.data.DataAdaptor-">load</a></code>&nbsp;in class&nbsp;<code><a href="../../../xal/model/alg/Tracker.html" title="class in xal.model.alg">Tracker</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>daptArchive</code> - data source containing algorithm configuration</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../xal/tools/data/IArchive.html#load-xal.tools.data.DataAdaptor-"><code>IArchive.load(xal.tools.data.DataAdaptor)</code></a></dd>
</dl>
</li>
</ul>
<a name="save-xal.tools.data.DataAdaptor-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>save</h4>
<pre>public&nbsp;void&nbsp;save(<a href="../../../xal/tools/data/DataAdaptor.html" title="interface in xal.tools.data">DataAdaptor</a>&nbsp;daptArchive)</pre>
<div class="block">Save the state and settings of this algorithm to a data source 
 exposing the <code>DataAdaptor</code> interface.  Subclasses should
 override this method to store the data particular to there own 
 operation.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../xal/tools/data/IArchive.html#save-xal.tools.data.DataAdaptor-">save</a></code>&nbsp;in interface&nbsp;<code><a href="../../../xal/tools/data/IArchive.html" title="interface in xal.tools.data">IArchive</a></code></dd>
<dt><span class="overrideSpecifyLabel">Overrides:</span></dt>
<dd><code><a href="../../../xal/model/alg/Tracker.html#save-xal.tools.data.DataAdaptor-">save</a></code>&nbsp;in class&nbsp;<code><a href="../../../xal/model/alg/Tracker.html" title="class in xal.model.alg">Tracker</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>daptArchive</code> - data source to receive algorithm configuration</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../xal/tools/data/IArchive.html#save-xal.tools.data.DataAdaptor-"><code>IArchive.save(xal.tools.data.DataAdaptor)</code></a></dd>
</dl>
</li>
</ul>
<a name="modTransferMatrixForDisplError-double-double-double-xal.tools.beam.PhaseMatrix-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>modTransferMatrixForDisplError</h4>
<pre>protected&nbsp;<a href="../../../xal/tools/beam/PhaseMatrix.html" title="class in xal.tools.beam">PhaseMatrix</a>&nbsp;modTransferMatrixForDisplError(double&nbsp;dx,
                                                     double&nbsp;dy,
                                                     double&nbsp;dz,
                                                     <a href="../../../xal/tools/beam/PhaseMatrix.html" title="class in xal.tools.beam">PhaseMatrix</a>&nbsp;matPhi)</pre>
<div class="block"><h2>Add Displacement Error to Transfer Matrix</h2>
 <p>
 Method to add the effects of a spatially displaced to the
 beamline element represented by the given 
 transfer matrix.  The returned matrix is the
 original transfer matrix conjugated by the displacement
 matrix representing the displacement vector <b>&Delta;r</b>
 <br/>
 <br/>
 &nbsp; <b>&Delta;r</b> &equiv; (<i>dx,dy,dz</i>).
 <br/>
 </p>
 <p>
 <strong>NOTES</strong>: (H. SAKO)
 <br/>
 &middot; added alignment error in sigma matrix
 </p></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>dx</code> - spatial displacement in <i>x</i> plane</dd>
<dd><code>dy</code> - spatial displacement in <i>y</i> plane</dd>
<dd><code>dz</code> - spatial displacement in <i>z</i> plane</dd>
<dd><code>matPhi</code> - transfer matrix <b>&Phi;</b> to be processed</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>transfer matrix <b>&Phi;</b> after applying displacement</dd>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>Feb 20, 2009, version 2</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../xal/tools/beam/PhaseMatrix.html" title="class in xal.tools.beam"><code>PhaseMatrix</code></a>, 
<a href="../../../xal/tools/beam/PhaseMatrix.html#translation-xal.tools.beam.PhaseVector-"><code>PhaseMatrix.translation(PhaseVector)</code></a></dd>
</dl>
</li>
</ul>
<a name="modTransferMatrixForEmitGrowth-double-xal.tools.beam.PhaseMatrix-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>modTransferMatrixForEmitGrowth</h4>
<pre>protected&nbsp;<a href="../../../xal/tools/beam/PhaseMatrix.html" title="class in xal.tools.beam">PhaseMatrix</a>&nbsp;modTransferMatrixForEmitGrowth(double&nbsp;dphi,
                                                     <a href="../../../xal/tools/beam/PhaseMatrix.html" title="class in xal.tools.beam">PhaseMatrix</a>&nbsp;matPhi)
                                              throws <a href="../../../xal/model/ModelException.html" title="class in xal.model">ModelException</a></pre>
<div class="block"><p>
 Method to modify the transfer matrix when we are simulating emittance
 growth.  Currently, the method only considers the  case of propagation 
 through an <code>IdealRfGap</code> element.  If the <code>IElement</code>
 argument is any other type of element, nothing is done.
 </p>
 <p>
 The argument <code>matPhi</code> is the original transfer matrix for
 (normal) propagation through the <code>elem</code> element.
 </p>  
 
 <p>
 <strong>NOTES</strong>: (H. SAKO)
  <br/>
  &middot; Increase emittance using same (nonlinear) procedure on the second
  moments as in Trace3D. 
 <br/>
 <br/>
 (C.K. Allen)
 <br/>
 &middot; The &lt;x'|x&gt transfer matrix element is modified by 
 the formula
 <br/>
 <br/>
 &nbsp;  &lt;x'|x&gt; = &lt;x'|x&gt;<i>F<sub>t</sub></i>(&Delta;<i>&phi;</i>)
 <br/>
 <br/>
 where &Delta;<i>&phi;</i> is the longitudial phase spread and 
 <i>F<sub>t</sub></i>(&Delta;<i>&phi;</i>)
 is an approximation to &lt;sin(<i>&phi;</i>)&gt;. 
 <br/>
 <br/>
 &middot; Originally, the &lt;z'|z&gt; transfer matrix element is modified 
 by the formula
 <br/>
 <br/> &nbsp;   &lt;z'|z&gt; = &lt;z'|z&gt;(1 - &Delta;<i>&phi;</i><sup>2</sup>/12)
 <br/>
 <br/>
 This approximation is given in the Trace3D manualThis formula is accurate only 
 for <i>d&phi;</i> &lt;&lt;.  Even then, the results
 are questionable. For a more in depth treatment of longitudinal emittance 
 growth see the reference below.
 <br/>
 &middot; The two-term expansion for 
 <i>F<sub>z</sub></i>(&Delta;<i>&phi;</i>) 
 (see <a href="../../../xal/model/alg/EnvelopeTrackerBase.html#compLongFourierTransform-double-"><code>compLongFourierTransform(double)</code></a>)
 is given as
 <br/>
 <br/>
 &nbsp; <i>F<sub>z</sub></i>(&Delta;<i>&phi;</i>) &asymp;
        1 - 3&Delta;<i>&phi;</i><sup>2</sup>/14
 <br/>
 <br/>
 which does not correspond to the Trace3D manual.  So I do not know where they
 got the number.
 </p>
 <p>
 <strong>Reference</strong>
 <br/>
 C.K. Allen, Hiroyuki Sako, et. al., 
 "Emittance Growth Due to Phase Spread for Proton Beams 
 in a Radio Frequency Accelerating Gap"
 (in preparation). 
 </p></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>dphi</code> - effective phase spread &Delta;<i>&phi;</i></dd>
<dd><code>matPhi</code> - transfer matrix <b>&Phi;</b> for conserved normalized emittance</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>Transfer matrix &Phi; after modifying focusing term</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../xal/model/ModelException.html" title="class in xal.model">ModelException</a></code> - unsupport/unknown emittance growth model</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../xal/model/alg/EnvelopeTrackerBase.html#compTransFourierTransform-double-"><code>compTransFourierTransform(double)</code></a>, 
<a href="../../../xal/model/alg/EnvelopeTrackerBase.html#compLongFourierTransform-double-"><code>compLongFourierTransform(double)</code></a>, 
<a href="../../../xal/model/alg/EnvelopeTrackerBase.html#effPhaseSpread-xal.model.probe.EnvelopeProbe-xal.model.elem.IdealRfGap-"><code>effPhaseSpread(EnvelopeProbe, IdealRfGap)</code></a>, 
<code>EnvelopeTrackerBase#momentSine(double)</code></dd>
</dl>
</li>
</ul>
<a name="compScheffMatrix-double-xal.model.probe.EnvelopeProbe-xal.model.IElement-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>compScheffMatrix</h4>
<pre>protected&nbsp;<a href="../../../xal/tools/beam/PhaseMatrix.html" title="class in xal.tools.beam">PhaseMatrix</a>&nbsp;compScheffMatrix(double&nbsp;dblLen,
                                       <a href="../../../xal/model/probe/EnvelopeProbe.html" title="class in xal.model.probe">EnvelopeProbe</a>&nbsp;probe,
                                       <a href="../../../xal/model/IElement.html" title="interface in xal.model">IElement</a>&nbsp;elem)
                                throws <a href="../../../xal/model/ModelException.html" title="class in xal.model">ModelException</a></pre>
<div class="block"><p>Method to compute the space charge transfer matrix for the given
 length, probe and modeling element.
 </p>
 
 <p>The correlation matrix of the probe is used to determine the space charge 
 transfer matrix.  The transfer matrix of the elem is computed for half
 the distance provided, the correlation matrix is advanced this half step,
 and the space charge matrix is computed there.  Thus, the space charge
 matrix is always computed at the center of the distance <code>dblLen</code>.
 </p>
 
 NOTE:
 <p>This half-step business maintains consistency with the Trace3D algorithm.
 Once inside the element you are essentially doing leap-frog integration, 
 which may or may not be more accurate then integration at full steps. The 
 final algorithms are both second-order accurate, simply by the way the
 final transfer matrix is computed.
 </p></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>dblLen</code> - incremental path length over which space charge is applied</dd>
<dd><code>probe</code> - <code>EnvelopeProbe</code> containing correlation matrix</dd>
<dd><code>elem</code> - <code>IElement</code> where probe is currently located</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>space-charge transfer matrix for incremental distance</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../xal/model/ModelException.html" title="class in xal.model">ModelException</a></code> - could not compute the transfer map for given element</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><code>gov.sns.tools.beam.em.BeamEllipsoid</code></dd>
</dl>
</li>
</ul>
<a name="compEmitGrowthFunction-xal.model.alg.EnvelopeTrackerBase.PhasePlane-double-double-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>compEmitGrowthFunction</h4>
<pre>protected&nbsp;double&nbsp;compEmitGrowthFunction(<a href="../../../xal/model/alg/EnvelopeTrackerBase.PhasePlane.html" title="enum in xal.model.alg">EnvelopeTrackerBase.PhasePlane</a>&nbsp;plane,
                                        double&nbsp;phi_s,
                                        double&nbsp;dphi)
                                 throws <a href="../../../xal/model/ModelException.html" title="class in xal.model">ModelException</a></pre>
<div class="block"><h2>Emittance Growth Function for Phase Spread in RF Gap</h2>
 <p>
 Calculation of the emittance growth function describing the
 emittance growth due to finite phase spread in
 an RF gap.  (Note that the growth function differs
 for each density distribution and for each phase plane.)  
 The particular phase plane
 is identified by the argument <code>plane</code>, which is 
 currently either transverse or longitudinal.  The density
 distribution is specified by the <em>emittance growth model</em>
 (see <a href="../../../xal/model/alg/EnvelopeTrackerBase.html#setEmitGrowthModel-xal.model.alg.EnvelopeTrackerBase.EmitGrowthModel-"><code>setEmitGrowthModel(EmitGrowthModel)</code></a>).  
 We currently assume the beam bunch to be
 axially symmetric.  We denote the growth function
 in the transverse plane as 
 <i>G<sub>t</sub></i>(<i>&phi;<sub>s</sub></i>,&Delta;<i>&phi;</i>)
 and the growth function in the longitudinal plane as
 <i>G<sub>z</sub></i>(<i>&phi;<sub>s</sub></i>,&Delta;<i>&phi;</i>).
 </p>
 <p>
 The emittance growth calculation was originally described by
 M. Weiss for then implemented in Trace3d.  C.K. Allen, 
 <i>et. al.</i> generalized the results for arbitrary
 distributions and the longitudinal case (see references
 below).  
 </p>
 <p> 
 The emittance growth function 
 <i>G<sub>t</sub></i>(<i>&phi;<sub>s</sub></i>,&Delta;<i>&phi;</i>)
 for the transverse plane is defined as
 <br/>
 <br/>
 &nbsp; <i>G<sub>t</sub></i>(<i>&phi;<sub>s</sub></i>,&Delta;<i>&phi;</i>)
 &equiv; <i>S<sub>t</sub></i>(&Delta;<i>&phi;</i>) -
         sin<sup>2</sup> <i>&phi;<sub>s</sub></i>
         <i>T<sub>t</sub></i>(&Delta;<i>&phi;</i>)
 <br/>
 <br/>
 where <i>&phi;<sub>s</sub></i> is the synchronous particle phase,
 &Delta;<i>&phi;</i> is the <em>effective</em> phase spread,
 and functions <i>S<sub>t</sub></i>(&Delta;<i>&phi;</i>) and
 <i>T<sub>t</sub></i>(&Delta;<i>&phi;</i>) are given by
 <br/>
 <br/>
 &nbsp; <i>S<sub>t</sub></i>(&Delta;<i>&phi;</i>) 
        &equiv; &frac12;[1 - <i>F<sub>t</sub></i>(2&Delta;<i>&phi;</i>)]
 <br/>
 <br/>
 and
 <br/>
 <br/>
 &nbsp; <i>T<sub>t</sub></i>(&Delta;<i>&phi;</i>) 
        &equiv;  
        <i>F<sub>t</sub></i><sup>2</sup>(&Delta;<i>&phi;</i>)
        - <i>F<sub>t</sub></i>(2&Delta;<i>&phi;</i>)
 <br/>
 <br/>
 respectively.  There are analogous formulas for the longitudinal
 emittance growth function 
 <i>G<sub>z</sub></i>(<i>&phi;<sub>s</sub></i>,&Delta;<i>&phi;</i>)
 where the transverse Fourier transform 
 <i>F<sub>t</sub></i>
 is replaced by the longitudinal Fourier transform
 <i>F<sub>z</sub></i>.  (See the methods
 <code><a href="../../../xal/model/alg/EnvelopeTrackerBase.html#compTransFourierTransform-double-"><code>compTransFourierTransform(double)</code></a></code> and
 <code><a href="../../../xal/model/alg/EnvelopeTrackerBase.html#compLongFourierTransform-double-"><code>compLongFourierTransform(double)</code></a></code>.)
 </p>
 <p>
 The before gap and after gap transverse RMS emittances, 
 <i>&epsilon;<sub>t,i</sub></i> and 
 <i>&epsilon;<sub>t,f</sub></i>, respectively, 
 are related by the following formula:
 <br/>
 <br/>
 &nbsp; <i>&epsilon;<sub>t,f</sub></i><sup>2</sup> = 
        <i>&eta;</i><sup>2</sup><i>&epsilon;<sub>t,i</sub></i><sup>2</sup> +
        &Delta;<i>&epsilon;<sub>t,f</sub></i><sup>2</sup>
 <br/>
 <br/>
 where <i>&eta;</i> is the momentum compaction due to acceleration
 <br/>
 <br/>
  <i>&eta;</i> &equiv; 
    <i>&beta;<sub>i</sub>&gamma;<sub>i</sub></i>/<i>&beta;<sub>f</sub>&gamma;<sub>f</sub></i>
 <br/>
 <br/>
 and &Delta;<i>&epsilon;<sub>t,f</sub></i> is the emittance increase term 
 <br/>
 <br/>
 &nbsp;  &Delta;<i>&epsilon;<sub>t,f</sub></i><sup>2</sup> &equiv; 
        &Delta;&lt;<i>x'<sub>f</sub></i><sup>2</sup>&gt;
        &lt;<i>x<sub>f</sub></i></i><sup>2</sup>&gt;<sup>2</sup>.
 <br/>
 <br/>
 where
 <br/>
 <br/>
 &nbsp;  &Delta;&lt;<i>x'<sub>f</sub></i><sup>2</sup>&gt; &equiv; 
        <i>k<sub>t</sub></i><sup>2</sup>
        <i>G<sub>t</sub></i>(<i>&phi;<sub>s</sub></i>,&Delta;<i>&phi;</i>)
        &lt;<i>x<sub>i</sub></i></i><sup>2</sup>&gt;.
 <br/>
 <br/>
 and where <i>x'<sub>f</sub></i> and <i>x<sub>i</sub></i> represent the 
 after-gap divergence angle and before-gap position for <em>either</em>
 transverse phase plane, respectively.
 Once again there are analogous formulas for the before and after gap
 longitudinal plane emittances 
 <i>&epsilon;<sub>z,i</sub></i> and 
 <i>&epsilon;<sub>z,f</sub></i>, respectively, with
 <i>G<sub>t</sub></i>(<i>&phi;<sub>s</sub></i>,&Delta;<i>&phi;</i>)
 replaced by 
 <i>G<sub>z</sub></i>(<i>&phi;<sub>s</sub></i>,&Delta;<i>&phi;</i>) 
 and <i>x</i><sub>(<i>f,i</i>)</sub> replaced by 
 <i>z</i><sub>(<i>f,i</i>)</sub>.  
 </p> 
 <p>
 <strong>NOTES</strong>: CKA
 <br/>
 &middot; Since we are modeling the RF gap as a thin lens, only the 
 momentum (divergance angle) is modified, &lt;<i>x</i><sup>2</sup>&gt;,
 &lt;<i>y</i><sup>2</sup>&gt;, and &lt;<i>z</i><sup>2</sup>&gt; remain
 unaffected.  Thus, &lt;<i>x<sub>f</sub></i><sup>2</sup>&gt;
 = &lt;<i>x<sub>i</sub></i><sup>2</sup>&gt; and
 &lt;<i>z<sub>f</sub></i><sup>2</sup>&gt;
 = &lt;<i>z<sub>i</sub></i><sup>2</sup>&gt; and may be computed
 as such in the above.
 <p>
 <strong>References</strong>
 <br/>
 [1] M. Weiss,
      "Bunching of Intense Proton Beams with Six-Dimensional
       Matching to the Linac Acceptance", CERN/MPS/LI report 73-2,
       Geneva, Switzerland (1978).
 <br/>
 [2] K.R. Crandall and D.P. Rusthoi, 
          "Trace 3-D Documentation", 
          LANL Report LA-UR-97-887 (1997), Appendix F.
 <br/>
 [3] C.K. Allen, H. Sako, M. Ikegami, and G. Shen, "Emittance Growth
         Due to Phase Spread 
         for Proton Beams in Radio Frequency Accelerating Gaps", 
         (in preperation).
 </p></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>plane</code> - Compute the emittance growth function for this phase plane</dd>
<dd><code>phi_s</code> - the synchronous particle phase <i>&phi;<sub>s</sub></i> 
                  in <i>radians</i></dd>
<dd><code>dphi</code> - effective phase spread &Delta;<i>&phi;</i> (half-width) 
                  of equivalent uniform beam in <i>radians</i></dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>The value of the emittance growth function
         <i>G<sub>t</sub></i>(<i>&phi;<sub>s</sub></i>,&Delta;<i>&phi;</i>) or
         <i>G<sub>z</sub></i>(<i>&phi;<sub>s</sub></i>,&Delta;<i>&phi;</i>)</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../xal/model/ModelException.html" title="class in xal.model">ModelException</a></code> - unknown/unsupport emittance growth model,
                          or unknown/unsupported phase plane</dd>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>Feb 19, 2009</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../xal/model/alg/EnvelopeTrackerBase.html#compTransFourierTransform-double-"><code>compTransFourierTransform(double)</code></a>, 
<a href="../../../xal/model/alg/EnvelopeTrackerBase.html#compLongFourierTransform-double-"><code>compLongFourierTransform(double)</code></a>, 
<a href="../../../xal/model/alg/EnvelopeTrackerBase.html#effPhaseSpread-xal.model.probe.EnvelopeProbe-xal.model.elem.IdealRfGap-"><code>effPhaseSpread(EnvelopeProbe, IdealRfGap)</code></a></dd>
</dl>
</li>
</ul>
<a name="compTransFourierTransform-double-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>compTransFourierTransform</h4>
<pre>protected&nbsp;double&nbsp;compTransFourierTransform(double&nbsp;dphi)
                                    throws <a href="../../../xal/model/ModelException.html" title="class in xal.model">ModelException</a></pre>
<div class="block"><h2>Transverse Emittance Growth Fourier Transform</h2>
 <p>
 Java method for evaluating the Fourier-Bessel transform
 needed to compute transverse emittance growth due to finite
 longitudinal phase spread.  The technique 
 for computing emittance growth
 due to phase spread is described in C.K. Allen, <i>et. al.</i>, 
 "Emittance Growth Due to Phase Spread 
 for Proton Beams in Radio Frequency Accelerating Gaps."  This work is
 a generalization of that covered in the Trace3D users' manual, 
 Appendix G, which is in turn based upon the work of 
 M. Weiss (see references below). 
 </p>
 <p>
 When considering only one (tranverse) phase plane beams the 
 transform 
 <i>F<sub>t</sub></i>(&Delta;<i>&phi;</i>)
 evaluated here is given as follows:
 <br/>
 <br/>
 &nbsp; <i>F<sub>t</sub></i>(&Delta;<i>&phi;</i>) &equiv; 
        (2/<i>f</i><sub>1</sub>)
          &int;<i>J</i><sub>0</sub>(&Delta;<i>&phi;s</i>) 
          <i>f</i>(<i>s</i><sup>2</sup>)<i>s</i><sup></sup> <i>ds</i>,
 <br/>
 <br/>
 where <i>f</i> is the density distribution, 
 <i>J<sub>n</i></sub>(<i>s</i>) is the <i>n</i><sup>th</sup>-order
 cylindrical Bessel function of the first kind,
 &Delta;<i>&phi;</i> is the effective phase spread of the equivalent
 uniform beam,
 <i>s</i> is the transform variable.
 and <i>f<sub>k</sub></i> is the number
 <br/>
 <br/>
 &nbsp; <i>f<sub>k</sub></i> &equiv; 
                 &int; <i>f</i>(<i>s</i>)<i>s<sup>k</sup></i> <i>ds</i>.
 <br/>
 <br/>
 Both integrals are taken from 0 to &infin;.
 </p>
 <p>
 When considering three spatial dimensions 
 the transform 
 <i>F<sub>t</sub></i>(&Delta;<i>&phi;</i>)
 evaluated here is given as follows:
 <br/>
 <br/>
 &nbsp; <i>F<sub>t</sub></i>(&Delta;<i>&phi;</i>) &equiv; 
        (2/<i>f</i><sub>3/2</sub>)
          &int;[<i>j</i><sub>0</sub>(&Delta;<i>&phi;s</i>) 
        + <i>j</i><sub>2</sub>(&Delta;<i>&phi;s</i>)]
          <i>f</i>(<i>s</i><sup>2</sup>)<i>s</i><sup>4</sup> <i>ds</i>,
 <br/>
 <br/>
 where <i>f</i> is the density distribution, 
 <i>j<sub>n</i></sub>(<i>s</i>) is the <i>n</i><sup>th</sup>-order
 spherical Bessel function of the first kind,
 &Delta;<i>&phi;</i> is the effective phase spread of the equivalent
 uniform beam, and
 <i>s</i> is the transform variable.
 Again, both integrals are taken from 0 to &infin;.
 </p>
 <p>
 <strong>NOTES</strong>: (CKA)
 <br/>
 &middot; This method actually falls out of the calculation
 for &lt;x<sup>2</sup>sin <i>&phi;</i>(<i>z</i>)&gt;. 
 The assumption that <i>x</i> and <i>z</i> are uncorrelated 
 yields the result
 <br/>
 <br/>
  &nbsp; &lt;x<sup>2</sup>sin <i>&phi;</i>(<i>z</i>)&gt; = 
     &lt;x<sup>2</sup>&gt; 
     sin <i>&phi;<sub>s</sub></i> 
     <i>F<sub>t</sub></i>(&Delta;<i>&phi;</i>)
 <br/>
 <br/>
 where <i>F<sub>t</sub></i>(<i>d&phi;</i>) = &lt;sin(&Delta;<i>&phi;</i>)&gt; 
 is this method, 
 sin <i>&phi;<sub>s</sub></i> is the synchronous particle phase, 
 and &Delta;<i>&phi;</i> is the <em>effective</em> phase spread of
 the distribution.
 <br/>  
 &middot; The value of 
 &lt;sin<sup>2</sup> <i>&phi;</i>)(<i>z</i>)&gt; can also be
 computed from this method.  The formula is
 <br/>
 <br/>
 &nbsp; &lt;sin<sup>2</sup> <i>&phi;</i>(<i>z</i>)&gt;  
        = <i>S<sub>t</sub></i>(&Delta;<i>&phi;</i>)
        + sin<sup>2</sup> <i>&phi;<sub>s</sub></i> 
          <i>F<sub>t</sub></i>(2&Delta;<i>&phi;</i>)
 <br/>
 <br/>
 where 
 <br/>
 <br/>
 &nbsp; <i>S<sub>t</sub></i>(&Delta;<i>&phi;</i>) 
        &equiv; &frac12;[1 - <i>F<sub>t</sub></i>(2&Delta;<i>&phi;</i>)]
 <br/>
 <br/>
 has analogy with sin<sup>2</sup> &Delta;<i>&phi;</i> 
 </p>
 <p>
 <strong>References</strong>
 <br/>
 [1] M. Weiss,
      "Bunching of Intense Proton Beams with Six-Dimensional
       Matching to the Linac Acceptance", CERN/MPS/LI report 73-2,
       Geneva, Switzerland (1978).
 <br/>
 [2] K.R. Crandall and D.P. Rusthoi, 
          "Trace 3-D Documentation", 
          LANL Report LA-UR-97-887 (1997), Appendix F.
 <br/>
 [3] C.K. Allen, H. Sako, M. Ikegami, and G. Shen, "Emittance Growth
         Due to Phase Spread 
         for Proton Beams in Radio Frequency Accelerating Gaps", 
         (in preperation).
 </p></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>dphi</code> - effective phase spread &Delta;<i>&phi;</i> (half-width) 
                  of equivalent uniform beam in <b>radians</b></dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>The value of transform <i>F<sub>t</sub></i>(&Delta;<i>&phi;</i>) 
          for the uniform distribution.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../xal/model/ModelException.html" title="class in xal.model">ModelException</a></code> - unsupported/unknown emittance growth model</dd>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>Feb 17, 2009</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../xal/model/alg/EnvelopeTrackerBase.html#effPhaseSpread-xal.model.probe.EnvelopeProbe-xal.model.elem.IdealRfGap-"><code>effPhaseSpread(EnvelopeProbe, IdealRfGap)</code></a>, 
<code>gov.sns.xal.model.elem.IdealRfGap</code></dd>
</dl>
</li>
</ul>
<a name="compLongFourierTransform-double-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>compLongFourierTransform</h4>
<pre>protected&nbsp;double&nbsp;compLongFourierTransform(double&nbsp;dphi)
                                   throws <a href="../../../xal/model/ModelException.html" title="class in xal.model">ModelException</a></pre>
<div class="block"><h2>Longitudinal Fourier Transform for Uniform Distribution</h2>
 <p>
 Java method for evaluating the Fourier-Bessel transform
 needed to compute longitudinal emittance growth due to finite
 longitudinal phase spread in RF accelerating gaps.  
 For information on this effect see
 due to phase spread is described in C.K. Allen, <i>et. al.</i>, 
 "Emittance Growth Due to Phase Spread 
 for Proton Beams in Radio Frequency Accelerating Gaps."  This work is
 a generalization of that covered in the Trace3D users' manual, 
 Appendix G for the longitudinal direction. M. Weiss treated the
 transverse direction (see references below). 
 </p>
 <p>
 When considering only one (uncorrelated) phase plane beams the 
 transform 
 <i>F<sub>z</sub></i>(&Delta;<i>&phi;</i>)
 evaluated here is given as follows:
 <br/>
 <br/>
 &nbsp; <i>F<sub>z</sub></i>(&Delta;<i>&phi;</i>) &equiv; 
        (2/<i>f</i><sub>1</sub>)
          &int; [<i>J</i><sub>0</sub>(&Delta;<i>&phi;s</i>) -
                 <i>J</i><sub>2</sub>(&Delta;<i>&phi;s</i>)]
          <i>f</i>(<i>s</i><sup>2</sup>)<i>s</i><sup>3</sup> <i>ds</i>,
 <br/>
 <br/>
 where <i>f</i> is the density distribution, 
 <i>J<sub>n</i></sub>(<i>s</i>) is the <i>n</i><sup>th</sup>-order
 cylindrical Bessel function of the first kind,
 &Delta;<i>&phi;</i> is the effective phase spread of the equivalent
 uniform beam,
 <i>s</i> is the transform variable.
 and <i>f<sub>k</sub></i> is the number
 <br/>
 <br/>
 &nbsp; <i>f<sub>k</sub></i> &equiv; 
                 &int; <i>f</i>(<i>s</i>)<i>s<sup>k</sup></i> <i>ds</i>.
 <br/>
 <br/>
 Both integrals are taken from 0 to &infin;.
 </p>
 <p>
 When considering three spatial dimensions 
 the transform 
 <i>F<sub>z</sub></i>(&Delta;<i>&phi;</i>)
 evaluated here is given as follows:
 <br/>
 <br/>
 &nbsp; <i>F<sub>z</sub></i>(&Delta;<i>&phi;</i>) &equiv; 
        (2/<i>f</i><sub>3/2</sub>)
          &int;[<i>j</i><sub>0</sub>(&Delta;<i>&phi;s</i>) 
        - 2<i>j</i><sub>2</sub>(&Delta;<i>&phi;s</i>)]
          <i>f</i>(<i>s</i><sup>2</sup>)<i>s</i><sup>4</sup> <i>ds</i>,
 <br/>
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; =        
          <i>F<sub>t</sub></i>(&Delta;<i>&phi;</i>)  -
          (2/<i>f</i><sub>3/2</sub>)
          &int;<i>j</i><sub>2</sub>(&Delta;<i>&phi;s</i>)]
          <i>f</i>(<i>s</i><sup>2</sup>)<i>s</i><sup>4</sup> <i>ds</i>,
 <br/>
 <br/>
 where <i>f</i> is the density distribution, 
 <i>j<sub>n</i></sub>(<i>s</i>) is the <i>n</i><sup>th</sup>-order
 spherical Bessel function of the first kind,
 &Delta;<i>&phi;</i> is the effective phase spread of the equivalent
 uniform beam,
 and <i>s</i> is the transform variable.
 The number <i>f<sub>k</sub></i> is as before.
 </p>
 <p>
 <strong>NOTES</strong>: (CKA)
 <br/>
 &middot; This method falls out of the computation
 for &lt;x<sup>2</sup>sin <i>&phi;</i>(<i>z</i>)&gt;. 
 At least when considering the longitudinal phase plane independly, 
 it can be shown that 
 <br/>
 <br/>
  &nbsp; &lt;z<sup>2</sup>sin <i>&phi;</i>(<i>z</i>)&gt; = 
     &lt;z<sup>2</sup>&gt; 
     sin <i>&phi;<sub>s</sub></i> 
     <i>F<sub>z</sub></i>(&Delta;<i>&phi;</i>)
 <br/>
 <br/>
 where <i>F<sub>z</sub></i>(<i>d&phi;</i>) = &lt;sin(&Delta;<i>&phi;</i>)&gt; 
 is this method, 
 sin <i>&phi;<sub>s</sub></i> is the synchronous particle phase, 
 and &Delta;<i>&phi;</i> is the <em>effective</em> phase spread of
 the distribution.  
 <br/>
 &middot; The technique for computing longitudinal emittance growth
 is not covered in the Trace3D manual.  A two-term power series
 expansion for this function is simply stated, 
 but no development is presented.  
 <br/>
 &middot; The result returned by this method has a different
 power series expansion about &Delta;<i>&phi;</i> = 0 than 
 that presented in the Trace3D manual.
 </p>
 <p>
 <strong>References</strong>
 <br/>
 [1] M. Weiss,
      "Bunching of Intense Proton Beams with Six-Dimensional
       Matching to the Linac Acceptance", CERN/MPS/LI report 73-2,
       Geneva, Switzerland (1978).
 <br/>
 [2] K.R. Crandall and D.P. Rusthoi, 
          "Trace 3-D Documentation", 
          LANL Report LA-UR-97-887 (1997), Appendix F.
 <br/>
 [3] C.K. Allen, H. Sako, M. Ikegami, and G. Shen, "Emittance Growth
         Due to Phase Spread 
         for Proton Beams in Radio Frequency Accelerating Gaps", 
         (in preperation).
 </p></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>dphi</code> - effective phase spread &Delta;<i>&phi;</i> (half-width) 
                  of equivalent uniform beam in <b>radians</b></dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>The value of transform <i>F<sub>z</sub></i>(&Delta;<i>&phi;</i>) 
          for the uniform distribution.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../xal/model/ModelException.html" title="class in xal.model">ModelException</a></code> - unsupported/unknown emittance growth model</dd>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>Feb 17, 2009</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../xal/model/alg/EnvelopeTrackerBase.html#effPhaseSpread-xal.model.probe.EnvelopeProbe-xal.model.elem.IdealRfGap-"><code>effPhaseSpread(EnvelopeProbe, IdealRfGap)</code></a>, 
<a href="../../../xal/model/alg/EnvelopeTrackerBase.html#compTransFourierTransform-double-"><code>compTransFourierTransform(double)</code></a>, 
<a href="../../../xal/model/alg/EnvelopeTrackerBase.html#compEmitGrowthFunction-xal.model.alg.EnvelopeTrackerBase.PhasePlane-double-double-"><code>compEmitGrowthFunction(PhasePlane, double, double)</code></a>, 
<code>gov.sns.xal.model.elem.IdealRfGap</code></dd>
</dl>
</li>
</ul>
<a name="fourierTransTrace3d-double-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>fourierTransTrace3d</h4>
<pre>protected&nbsp;double&nbsp;fourierTransTrace3d(double&nbsp;dphi)</pre>
<div class="block"><h2>Transverse Fourier Transform given by Trace3D </h2>
 <p>
 This method returns the longitudinal Fourier-Bessel transform needed
 to compute emittance growth from finite phase spread in an
 RF accelerating gap.
 Here we return the exact same value as Trace3D.  It considers
 a uniform beam in three spatial dimensions.  
 </p>
 <p>
 The method computes the kluge of &lt;sin(&phi;)&gt;.  In this calculation
 we assume that the transverse and longitudinal phase planes are 
 uncorrelated and that the beam distribution is a uniform ellipsoid
 (that's why the sinc() function pops up).  Pretty restrictive - Sacherer's 
 theorem does not apply here.
 </p>
 <p>
 This quantity is used when computing the transverse emittance increase
 in an RF gap due to a finite phase spread in the beam.
 <p>
 <strong>NOTES</strong>: (CKA)
 <br/>
 &middot; This method is used to approximate &lt;x<sup>2</sup>sin(&phi;)&gt;, 
 which is at least third order in the phase coordinates.
 <br/>
 
 &middot; The assumption that <i>x</i> and <i>z</i> are not correlated 
 yields the result
 <br/>
 <br/>
  &nbsp; &lt;x<sup>2</sup>sin(&phi;)&gt; = &lt;x<sup>2</sup>&gt; <i>f</i>(<i>d&phi;</i>)
 <br/>
 <br/>
 where <i>f</i>(<i>d&phi;</i>) &equiv; &lt;sin(<i>d&phi;</i>)is this method, 
 and <i>d&phi;</i> is the "<em>phase spread</em>" of
 the distribution.  The phase spread is defined
 <br/>
 <br/>
 &nbsp;   <i>d&phi;</i> = &lt;(<i>&phi; - &phi;<sub>s</sub></i>)<sup>2</sup>&gt;<sup>1/2</sup>
 <br/>
 <br/>
 where <i>&phi;<sub>s</sub></i> is the synchronous particle phase.
 </p>
 <p>
 See K.R. Crandall and D.P. Rusthoi, 
          <ul>
          "Trace 3-D Documentation", 
          LANL Report LA-UR-97-887 (1997), Appendix F.
          </ul>
 </p></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>dphi</code> - effective phase spread &Delta;<i>&phi;</i> (half-width) 
                  of equivalent uniform beam in <b>radians</b></dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>The value of transform <i>F<sub>t</sub></i>(&Delta;<i>&phi;</i>) 
          given by Trace3D which is the value of &lt;sin(<i>&phi;</i>)&gt; 
          = <i>f</i>(<var>dp</var>).</dd>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>Feb 17, 2009</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><code>#momentSine(double)</code>, 
<a href="../../../xal/model/alg/EnvelopeTrackerBase.html#compTransFourierTransform-double-"><code>compTransFourierTransform(double)</code></a>, 
<a href="../../../xal/model/alg/EnvelopeTrackerBase.html#effPhaseSpread-xal.model.probe.EnvelopeProbe-xal.model.elem.IdealRfGap-"><code>effPhaseSpread(EnvelopeProbe, IdealRfGap)</code></a>, 
<code>gov.sns.xal.model.elem.IdealRfGap</code></dd>
</dl>
</li>
</ul>
<a name="fourierLongTrace3d-double-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>fourierLongTrace3d</h4>
<pre>protected&nbsp;double&nbsp;fourierLongTrace3d(double&nbsp;dphi)</pre>
<div class="block"><h2>Longitudinal Fourier Transform given by Trace3D </h2>
 <p>
 This method returns the longitudinal Fourier-Bessel transform needed
 to compute emittance growth from finite phase spread in an
 RF accelerating gap.
 Here we return the exact same value as Trace3D.  It considers
 a uniform beam in three spatial dimensions.  
 </p>
 <p>The returned 
 value (which is not derived or explained in the Trace3D
 manual) is
 <br/>
 <br/>
  &nbsp; <i>F<sub>z</sub></i>(&Delta;<i>&phi;</i>) = 
          1 - &Delta;<i>&phi;</i><sup>2</sup>/12
 <br/>
 <br/>
 This value is taken from the Trace3D code.  The manual actually
 quotes it as  
 1 + &Delta;<i>&phi;</i><sup>2</sup>/12.
 </p>
 <p>
 <strong>NOTES</strong>: (CKA)
 </p>
 <p>
 <strong>References</strong>
 <br/>
 [1] M. Weiss,
      "Bunching of Intense Proton Beams with Six-Dimensional
       Matching to the Linac Acceptance", CERN/MPS/LI report 73-2,
       Geneva, Switzerland (1978).
 <br/>
 [2] K.R. Crandall and D.P. Rusthoi, 
          "Trace 3-D Documentation", 
          LANL Report LA-UR-97-887 (1997), Appendix F.
 <br/>
 [3] C.K. Allen, H. Sako, M. Ikegami, and G. Shen, "Emittance Growth
         Due to Phase Spread 
         for Proton Beams in Radio Frequency Accelerating Gaps", 
         (in preperation).
 </p></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>dphi</code> - effective phase spread &Delta;<i>&phi;</i> (half-width) 
                  of equivalent uniform beam in <b>radians</b></dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>The value of transform <i>F<sub>z</sub></i>(&Delta;<i>&phi;</i>) 
          given by Trace3D.</dd>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>Feb 17, 2009</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../xal/model/alg/EnvelopeTrackerBase.html#effPhaseSpread-xal.model.probe.EnvelopeProbe-xal.model.elem.IdealRfGap-"><code>effPhaseSpread(EnvelopeProbe, IdealRfGap)</code></a>, 
<a href="../../../xal/model/alg/EnvelopeTrackerBase.html#compTransFourierTransform-double-"><code>compTransFourierTransform(double)</code></a>, 
<code>gov.sns.xal.model.elem.IdealRfGap</code></dd>
</dl>
</li>
</ul>
<a name="fourierLong3dUniform-double-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>fourierLong3dUniform</h4>
<pre>protected&nbsp;double&nbsp;fourierLong3dUniform(double&nbsp;dphi)</pre>
<div class="block"><h2>Longitudinal Fourier Transform for 3D Uniform Distribution</h2>
 <p>
 This method return the longitudinal Fourier-Bessel transform needed
 to compute emittance growth from finite phase spread in an
 RF accelerating gap.
 Here we consider the case when the beam is uniformly distributed 
 over three spatial dimensions.
 For this distribution <i>f</i>(<i>s</i>), we find that 
 <br/>
 <br/>
 &nbsp; <i>F<sub>z</sub></i>(&Delta;<i>&phi;</i>) = 
 15 <i>j</i><sub>2</sub>(&Delta;<i>&phi;</i>)/&Delta;<i>&phi;</i><sup>2</sup> -
 15 <i>j</i><sub>3</sub>(&Delta;<i>&phi;</i>)/&Delta;<i>&phi;</i> 
 <br/>
 <br/> 
 For small arguments we avoid any numerically singular behavior 
 at &Delta;<i>&phi;</i> = 0 by Taylor
 expanding.  We have
 <br/>
 <br/>
 &nbsp; <i>F<sub>z</sub></i>(&Delta;<i>&phi;</i>) &asymp; 
        1 - <i>x</i><sup>2</sup>/7 + <i>x</i><sup>4</sup>/168 -
        <i>x</i><sup>6</sup>/8316 + 5<i>x</i><sup>8</sup>/3459456 +
        O(<i>x</i><sup>17/2</sup>)
 <br/>
 <br/>
 Currently we are expanding to sixth order.
 </p>
 <p>
 <strong>NOTES</strong>: (CKA)</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>dphi</code> - effective phase spread &Delta;<i>&phi;</i> (half-width) 
                  of equivalent uniform beam in <b>radians</b></dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>The value of transform <i>F<sub>z</sub></i>(&Delta;<i>&phi;</i>) 
          for the 3D uniform distribution.</dd>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>Feb 17, 2009</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../xal/model/alg/EnvelopeTrackerBase.html#effPhaseSpread-xal.model.probe.EnvelopeProbe-xal.model.elem.IdealRfGap-"><code>effPhaseSpread(EnvelopeProbe, IdealRfGap)</code></a>, 
<a href="../../../xal/model/alg/EnvelopeTrackerBase.html#compTransFourierTransform-double-"><code>compTransFourierTransform(double)</code></a>, 
<code>gov.sns.xal.model.elem.IdealRfGap</code></dd>
</dl>
</li>
</ul>
<a name="fourierTrans3dUniform-double-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>fourierTrans3dUniform</h4>
<pre>protected&nbsp;double&nbsp;fourierTrans3dUniform(double&nbsp;dphi)</pre>
<div class="block"><h2>Transverse Fourier Transform for 3D Uniform Distribution</h2>
 <p>
 This method return the transverse Fourier-Bessel transform needed
 to compute emittance growth from finite phase spread in an
 RF accelerating gap.
 Here we consider the case when the beam is uniformly distributed 
 over three spatial dimensions.
 For this distribution <i>f</i>(<i>s</i>), we find that 
 <br/>
 <br/>
 &nbsp; <i>F<sub>t</sub></i>(&Delta;<i>&phi;</i>) = 
 15 <i>j</i><sub>2</sub>(&Delta;<i>&phi;</i>)/&Delta;<i>&phi;</i><sup>2</sup>
 <br/>
 <br/> 
 For small arguments we avoid any numerically singular behavior 
 at &Delta;<i>&phi;</i> = 0 by Taylor
 expanding.  We have
 <br/>
 <br/>
 &nbsp; <i>F<sub>t</sub></i>(&Delta;<i>&phi;</i>) &asymp; 
        1 - <i>x</i><sup>2</sup>/14 + <i>x</i><sup>4</sup>/504 -
        <i>x</i><sup>6</sup>/33264 + <i>x</i><sup>8</sup>/3459456 +
        O(<i>x</i><sup>17/2</sup>)
 <br/>
 <br/>
 Currently we are expanding to sixth order.
 </p>
 <p>
 <strong>NOTES</strong>: (CKA)
 </p></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>dphi</code> - effective phase spread &Delta;<i>&phi;</i> (half-width) 
                  of equivalent uniform beam in <b>radians</b></dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>The value of transform <i>F<sub>t</sub></i>(&Delta;<i>&phi;</i>) 
          for the uniform distribution.</dd>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>Feb 17, 2009</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../xal/model/alg/EnvelopeTrackerBase.html#compTransFourierTransform-double-"><code>compTransFourierTransform(double)</code></a>, 
<a href="../../../xal/model/alg/EnvelopeTrackerBase.html#effPhaseSpread-xal.model.probe.EnvelopeProbe-xal.model.elem.IdealRfGap-"><code>effPhaseSpread(EnvelopeProbe, IdealRfGap)</code></a>, 
<code>gov.sns.xal.model.elem.IdealRfGap</code></dd>
</dl>
</li>
</ul>
<a name="fourierTrans3dGaussian-double-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>fourierTrans3dGaussian</h4>
<pre>protected&nbsp;double&nbsp;fourierTrans3dGaussian(double&nbsp;dphi)</pre>
<div class="block"><h2>Transverse Fourier Transform for 3D Gaussian Distribution</h2>
 <p>
 This method return the transverse Fourier-Bessel transform needed
 to compute emittance growth from finite phase spread in an
 RF accelerating gap.
 Here we consider the case when the beam has a Gaussian distribution 
 over three spatial dimensions.
 For this distribution <i>f</i>(<i>s</i>), we find that 
 <br/>
 <br/>
 &nbsp; <i>F<sub>t</sub></i>(&Delta;<i>&phi;</i>) = 
 <i>e</i><sup>-&Delta;<i>&phi;</i><sup>2</sup>/10</sup>
 <br/>
 <br/> 
 There is no need for a small argument expansion since the
 above expression is numerically stable.
 </p>
 <p>
 <strong>NOTES</strong>: (CKA)
 </p></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>dphi</code> - effective phase spread &Delta;<i>&phi;</i> (half-width) 
                  of equivalent uniform beam in <b>radians</b></dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>The value of transform <i>F<sub>t</sub></i>(&Delta;<i>&phi;</i>) 
          for the Gaussian distribution.</dd>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>Feb 17, 2009</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../xal/model/alg/EnvelopeTrackerBase.html#compTransFourierTransform-double-"><code>compTransFourierTransform(double)</code></a>, 
<a href="../../../xal/model/alg/EnvelopeTrackerBase.html#effPhaseSpread-xal.model.probe.EnvelopeProbe-xal.model.elem.IdealRfGap-"><code>effPhaseSpread(EnvelopeProbe, IdealRfGap)</code></a>, 
<code>gov.sns.xal.model.elem.IdealRfGap</code></dd>
</dl>
</li>
</ul>
<a name="fourierLong3dGaussian-double-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>fourierLong3dGaussian</h4>
<pre>protected&nbsp;double&nbsp;fourierLong3dGaussian(double&nbsp;dphi)</pre>
<div class="block"><h2>Longitudinal Fourier Transform for 3D Gaussian Distribution</h2>
 <p>
 This method return the longitudinal Fourier-Bessel transform needed
 to compute emittance growth from finite phase spread in an
 RF accelerating gap.
 Here we consider the case when the beam has a Gaussian distribution
 over the three spatial dimensions.
 For this distribution <i>f</i>(<i>s</i>), we find that 
 <br/>
 <br/>
 &nbsp; <i>F<sub>z</sub></i>(&Delta;<i>&phi;</i>) = 
   (1 - &Delta;<i>&phi;</i><sup>2</sup>/5)
   <i>e</i><sup>-&Delta;<i>&phi;</i><sup>2</sup>/10</sup>
 <br/>
 <br/> 
 There is no need for a small argument expansion since the
 above expression is numerically stable.
 </p>
 <p>
 <strong>NOTES</strong>: (CKA)</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>dphi</code> - effective phase spread &Delta;<i>&phi;</i> (half-width) 
                  of equivalent uniform beam in <b>radians</b></dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>The value of transform <i>F<sub>z</sub></i>(&Delta;<i>&phi;</i>) 
          for the 3D Gaussian distribution.</dd>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>Feb 17, 2009</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../xal/model/alg/EnvelopeTrackerBase.html#effPhaseSpread-xal.model.probe.EnvelopeProbe-xal.model.elem.IdealRfGap-"><code>effPhaseSpread(EnvelopeProbe, IdealRfGap)</code></a>, 
<a href="../../../xal/model/alg/EnvelopeTrackerBase.html#compTransFourierTransform-double-"><code>compTransFourierTransform(double)</code></a>, 
<code>gov.sns.xal.model.elem.IdealRfGap</code></dd>
</dl>
</li>
</ul>
<a name="fourierTrans1dUniform-double-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>fourierTrans1dUniform</h4>
<pre>protected&nbsp;double&nbsp;fourierTrans1dUniform(double&nbsp;dphi)</pre>
<div class="block"><h2>Transverse Fourier Transform for Single Phase Plane</h2>
 <p>
 This method return the transverse Fourier-Bessel transform needed
 to compute emittance growth from finite phase spread in an
 RF accelerating gap.
 Here we consider the case when the beam is uniformly distributed 
 in one transverse phase plane.
 For this distribution <i>f</i>(<i>s</i>), we find that 
 <br/>
 <br/>
 &nbsp; <i>F<sub>t</sub></i>(&Delta;<i>&phi;</i>) = 
      2 <i>J</i><sub>1</sub>(&Delta;<i>&phi;</i>)/&Delta;<i>&phi;</i> 
 <br/>
 <br/> 
 For small arguments we avoid any numerically singular behavior 
 at &Delta;<i>&phi;</i> = 0 by Taylor
 expanding.  We have
 <br/>
 <br/>
 &nbsp; <i>F<sub>t</sub></i>(&Delta;<i>&phi;</i>) &asymp; 
        1 - <i>x</i><sup>2</sup>/8 + <i>x</i><sup>4</sup>/192 -
        <i>x</i><sup>6</sup>/9216 + <i>x</i><sup>8</sup>/737280 +
        O(<i>x</i><sup>9</sup>)
 <br/>
 <br/>
 Currently we are expanding to sixth order.
 <p>
 <strong>NOTES</strong>: (CKA)
 </p></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>dphi</code> - effective phase spread &Delta;<i>&phi;</i> (half-width) 
                  of equivalent uniform beam in <b>radians</b></dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>The value of transform <i>F<sub>t</sub></i>(&Delta;<i>&phi;</i>) 
          for the single phase plane uniform distribution.</dd>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>Feb 25, 2009</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../xal/model/alg/EnvelopeTrackerBase.html#compTransFourierTransform-double-"><code>compTransFourierTransform(double)</code></a>, 
<a href="../../../xal/model/alg/EnvelopeTrackerBase.html#effPhaseSpread-xal.model.probe.EnvelopeProbe-xal.model.elem.IdealRfGap-"><code>effPhaseSpread(EnvelopeProbe, IdealRfGap)</code></a>, 
<code>gov.sns.xal.model.elem.IdealRfGap</code></dd>
</dl>
</li>
</ul>
<a name="fourierLong1dUniform-double-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>fourierLong1dUniform</h4>
<pre>protected&nbsp;double&nbsp;fourierLong1dUniform(double&nbsp;dphi)</pre>
<div class="block"><h2>Longitudinal Fourier Transform for Single Phase Plane</h2>
 <p>
 This method return the longitudinal Fourier-Bessel transform needed
 to compute emittance growth from finite phase spread in an
 RF accelerating gap.
 Here we consider the case when the beam is uniformly distributed 
 in one transverse phase plane.
 For this distribution <i>f</i>(<i>s</i>), we find that 
 <br/>
 <br/>
 &nbsp; <i>F<sub>z</sub></i>(&Delta;<i>&phi;</i>) = 
      8 <i>J</i><sub>2</sub>(&Delta;<i>&phi;</i>)/&Delta;<i>&phi;</i><sup>2</sup> -  
      8 <i>J</i><sub>3</sub>(&Delta;<i>&phi;</i>)/&Delta;<i>&phi;</i> 
 <br/>
 <br/> 
 For small arguments we avoid any numerically singular behavior 
 at &Delta;<i>&phi;</i> = 0 by Taylor
 expanding.  We have
 <br/>
 <br/>
 &nbsp; <i>F<sub>z</sub></i>(&Delta;<i>&phi;</i>) &asymp; 
        1 - <i>x</i><sup>2</sup>/4 + 5<i>x</i><sup>4</sup>/384 -
        7<i>x</i><sup>6</sup>/23040 + <i>x</i><sup>8</sup>/245760 +
        O(<i>x</i><sup>9</sup>)
 <br/>
 <br/>
 Currently we are expanding to sixth order.
 <p>
 <strong>NOTES</strong>: (CKA)
 </p></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>dphi</code> - effective phase spread &Delta;<i>&phi;</i> (half-width) 
                  of equivalent uniform beam in <b>radians</b></dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>The value of transform <i>F<sub>t</sub></i>(&Delta;<i>&phi;</i>) 
          for the single phase plane uniform distribution.</dd>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>Feb 25, 2009</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../xal/model/alg/EnvelopeTrackerBase.html#compTransFourierTransform-double-"><code>compTransFourierTransform(double)</code></a>, 
<a href="../../../xal/model/alg/EnvelopeTrackerBase.html#effPhaseSpread-xal.model.probe.EnvelopeProbe-xal.model.elem.IdealRfGap-"><code>effPhaseSpread(EnvelopeProbe, IdealRfGap)</code></a>, 
<code>gov.sns.xal.model.elem.IdealRfGap</code></dd>
</dl>
</li>
</ul>
<a name="fourierTrans1dGaussian-double-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>fourierTrans1dGaussian</h4>
<pre>protected&nbsp;double&nbsp;fourierTrans1dGaussian(double&nbsp;dphi)</pre>
<div class="block"><h2>Transverse Fourier Transform for 2D Gaussian Distribution</h2>
 <p>
 This method return the transverse Fourier-Bessel transform needed
 to compute emittance growth from finite phase spread in an
 RF accelerating gap.
 Here we consider the case when the beam is Gaussian distributed in
 each (uncorrelated) phase plane.
 For this distribution <i>f</i>(<i>s</i>), we find that 
 <br/>
 <br/>
 &nbsp; <i>F<sub>t</sub></i>(&Delta;<i>&phi;</i>) = 
 <i>e</i><sup>-&Delta;<i>&phi;</i><sup>2</sup>/8</sup>
 <br/>
 <br/> 
 There is no need for a small argument expansion since the
 above expression is numerically stable.
 </p>
 <p>
 <strong>NOTES</strong>: (CKA)
 </p></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>dphi</code> - effective phase spread &Delta;<i>&phi;</i> (half-width) 
                  of equivalent uniform beam in <b>radians</b></dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>The value of transform <i>F<sub>t</sub></i>(&Delta;<i>&phi;</i>) 
          for the Gaussian distribution.</dd>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>Feb 25, 2009</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../xal/model/alg/EnvelopeTrackerBase.html#compTransFourierTransform-double-"><code>compTransFourierTransform(double)</code></a>, 
<a href="../../../xal/model/alg/EnvelopeTrackerBase.html#effPhaseSpread-xal.model.probe.EnvelopeProbe-xal.model.elem.IdealRfGap-"><code>effPhaseSpread(EnvelopeProbe, IdealRfGap)</code></a>, 
<code>gov.sns.xal.model.elem.IdealRfGap</code></dd>
</dl>
</li>
</ul>
<a name="fourierLong1dGaussian-double-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>fourierLong1dGaussian</h4>
<pre>protected&nbsp;double&nbsp;fourierLong1dGaussian(double&nbsp;dphi)</pre>
<div class="block"><h2>Longitudinal Fourier Transform for 2D Gaussian Distribution</h2>
 <p>
 This method return the longitudinal Fourier-Bessel transform needed
 to compute emittance growth from finite phase spread in an
 RF accelerating gap.
 Here we consider the case when the beam is Gaussian distributed 
 in each (uncorrelated) phase plane.
 For this distribution <i>f</i>(<i>s</i>), we find that 
 <br/>
 <br/>
 &nbsp; <i>F<sub>z</sub></i>(&Delta;<i>&phi;</i>) = 
   (1 - &Delta;<i>&phi;</i><sup>2</sup>/4)
   <i>e</i><sup>-&Delta;<i>&phi;</i><sup>2</sup>/8</sup>
 <br/>
 <br/> 
 There is no need for a small argument expansion since the
 above expression is numerically stable.
 </p>
 <p>
 <strong>NOTES</strong>: (CKA)</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>dphi</code> - effective phase spread &Delta;<i>&phi;</i> (half-width) 
                  of equivalent uniform beam in <b>radians</b></dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>The value of transform <i>F<sub>z</sub></i>(&Delta;<i>&phi;</i>) 
          for the Gaussian distribution in single phase plane.</dd>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>Feb 25, 2009</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../xal/model/alg/EnvelopeTrackerBase.html#effPhaseSpread-xal.model.probe.EnvelopeProbe-xal.model.elem.IdealRfGap-"><code>effPhaseSpread(EnvelopeProbe, IdealRfGap)</code></a>, 
<a href="../../../xal/model/alg/EnvelopeTrackerBase.html#compTransFourierTransform-double-"><code>compTransFourierTransform(double)</code></a>, 
<code>gov.sns.xal.model.elem.IdealRfGap</code></dd>
</dl>
</li>
</ul>
<a name="effPhaseSpread-xal.model.probe.EnvelopeProbe-xal.model.elem.IdealRfGap-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>effPhaseSpread</h4>
<pre>protected&nbsp;double&nbsp;effPhaseSpread(<a href="../../../xal/model/probe/EnvelopeProbe.html" title="class in xal.model.probe">EnvelopeProbe</a>&nbsp;probe,
                                <a href="../../../xal/model/elem/IdealRfGap.html" title="class in xal.model.elem">IdealRfGap</a>&nbsp;elem)</pre>
<div class="block"><h2>Effective Phase Spread for Equivalent Uniform Beam</h2>
 <p>
 Compute the longitudinal phase spread of the bunch with respect to the
 RF in an RF gap element (based on Trace3D RfGap.f)  The phase spread
 is computed assuming a <b>uniform</b> distribution.  The returned value
 is then the <em>effective</em> phase spread for the equivalent uniform beam.
 (see below).
 </p>
 <p>
 In XAL, longitundinal coordinate <i>z</i> is the "phase spread", but in meters. 
 To convert to phase spread <i>d&phi;</i> in radians we have
 <br/>
 <br/>
 &nbsp;   <i>d&phi;</i> = 2&pi;<i>z</i>/(&beta;&lambda;)
 <br/>
 <br/>     
 where &lambda; is the wavelength of the RF.  To simplify matters make the definition
 <br/> 
 <br/>
 &nbsp; <i>k</i> &equiv; 2&pi;/&beta;&lambda;,
 <br/>
 <br/>
 which is the synchronous particle wave number.
 So, for &lt;<i>d&phi;</i><sup>2</sup>&gt; we get
 <br/>
 <br/>
 &nbsp; &lt;<i>d&phi;</i><sup>2</sup>&gt; = <i>k</i><sup>2</sup>&lt;<i>z</i><sup>2</sup>&gt;.
 <br/>
 <br/>
 Note then that &lt;<i>d&phi;</i><sup>2</sup>&gt;<sup>1/2</sup> is the 
 <em>RMS</em> phase spread.
 </p>
 <p>
 I am using the mid-gap value for &beta;, that is, &beta; average.  And, thus,
 <i>k</i> is also the mid-gap wave number.
 </p>
 <p>
 We need to multiply &lt;z<sup>2</sup>&gt; by 5 to get the 
 "(three-dimensional) equivalent uniform beam" longitudinal
 semi-axis (even though there is no uniform equivalent beam for
 emittance growth).
 </p>
 <p>
 Putting this all together gives the following value for the 
 <em>effective</em> phase phase spread for the equivalent uniform beam, 
 &Delta;<i>&phi;</i>:
 <br/>
 <br/>
 &nbsp; &Delta;<i>&phi;</i> = <i>k</i>&lt;5<i>z</i><sup>2</sup>&gt;<sup>1/2</sup>.
 <br/>
 <br/>
 The above is the value returned by this method.  Note that &Delta;<i>&phi;</i>
 is also referred to as the beam <em>half-length</em> (with respect to the
 RF phase).
 </p>
 <p>
 <strong>NOTES</strong>: (CKA)
 <br/>
 <br>
 &middot; Note that the RMS phase spread can also be represented as
 <br/>
 <br/>
 &nbsp;   <i>d&phi;</i> = &lt;[<i>&phi;(<i>s</i>) - &phi;<sub>s</sub></i>]<sup>2</sup>&gt;<sup>1/2</sup>
 <br/>
 <br/>
 where <i>&phi;<sub>s</sub></i> is the synchronous particle phase.
 </p></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>probe</code> - probe containing relativistic data</dd>
<dd><code>elem</code> - the RF gap modeling element creating the bunch phase spread</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>phase spread (half width) &Delta;<i>&phi;</i> &equiv; 
          &lt;5<i>d&phi;</i><sup>2</sup>&gt;<sup>1/2</sup> 
          for this probe (<b>radians</b>)</dd>
</dl>
</li>
</ul>
<a name="phaseSpread-xal.model.probe.EnvelopeProbe-xal.model.elem.IdealRfGap-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>phaseSpread</h4>
<pre>protected&nbsp;double&nbsp;phaseSpread(<a href="../../../xal/model/probe/EnvelopeProbe.html" title="class in xal.model.probe">EnvelopeProbe</a>&nbsp;probe,
                             <a href="../../../xal/model/elem/IdealRfGap.html" title="class in xal.model.elem">IdealRfGap</a>&nbsp;gap)</pre>
<div class="block"><p>
 Compute the phase spread of the bunch for a probe (based on Trace3D RfGap.f)
 </p>
 <p>
 <h4>CKA Notes:</h4>
 - This method needs to be optimized now that I understand what it is doing.
 In XAL, longitundinal coordinate <i>z</i> is the "phase spread", but in meters. 
 To convert to phase spread <i>&delta;&phi;</i> in radians we have
 <br/>
 <br/>
 &nbsp; &nbsp; &delta;&phi; = 2&pi;<i>z</i/>/(&beta;&lambda;) ,
 <br/>
 <br/>
 where &lambda; is the wavelength of the RF.  So, for &lt;&delta;&phi;<sup>2</sup>&gt;
 we get
 <br/>
 <br/> 
 &nbsp; &nbsp; &lt;&delta;&phi;<sup>2</sup>&gt; = &lt;<i>z</i><sup>2</sup>&gt;2&pi;<i>f</i>
                                                /(&beta;<i>c</i>) ,
 <br/>
 <br/>
 where <i>f</i> is the RF frequency of the gap and c is the speed of light.
 <br/>
 <br/>
 - For the optional computation <b>phaseSpreadT3d</b> (which apparently is not
 used) I am not sure what is happening, or why <y'y'> is significant?
 </p></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>probe</code> - we are computing the phase spread for this probe at the current
                  <code>IdealRfGap</code> condition</dd>
<dd><code>gap</code> - the RF gap modeling element creating the bunch phase spread</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>phase spread (half width) for this probe (<b>radian</b>)</dd>
</dl>
</li>
</ul>
<a name="correctTransFocusingPhaseSpread-xal.model.probe.EnvelopeProbe-xal.model.elem.IdealRfGap-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>correctTransFocusingPhaseSpread</h4>
<pre>protected&nbsp;double&nbsp;correctTransFocusingPhaseSpread(<a href="../../../xal/model/probe/EnvelopeProbe.html" title="class in xal.model.probe">EnvelopeProbe</a>&nbsp;probe,
                                                 <a href="../../../xal/model/elem/IdealRfGap.html" title="class in xal.model.elem">IdealRfGap</a>&nbsp;gap)</pre>
<div class="block">Moved from <code>IdealRfGap</code>.</div>
</li>
</ul>
<a name="correctSigmaPhaseSpread-xal.model.probe.EnvelopeProbe-xal.model.elem.IdealRfGap-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>correctSigmaPhaseSpread</h4>
<pre>protected&nbsp;double[]&nbsp;correctSigmaPhaseSpread(<a href="../../../xal/model/probe/EnvelopeProbe.html" title="class in xal.model.probe">EnvelopeProbe</a>&nbsp;probe,
                                           <a href="../../../xal/model/elem/IdealRfGap.html" title="class in xal.model.elem">IdealRfGap</a>&nbsp;gap)</pre>
<div class="block">new implementation by sako, 7 Aug 06, to do trans/long simultanously
 used in EnvTrackerAdapt, EnvelopeTracker</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>probe</code> - envelope probe object (something with emittance and moments)</dd>
<dd><code>gap</code> - the RF gap modeling element creating the bunch phase spread</dd>
</dl>
</li>
</ul>
<a name="correctTransSigmaPhaseSpread-xal.model.probe.EnvelopeProbe-xal.model.elem.IdealRfGap-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>correctTransSigmaPhaseSpread</h4>
<pre>public&nbsp;double&nbsp;correctTransSigmaPhaseSpread(<a href="../../../xal/model/probe/EnvelopeProbe.html" title="class in xal.model.probe">EnvelopeProbe</a>&nbsp;probe,
                                           <a href="../../../xal/model/elem/IdealRfGap.html" title="class in xal.model.elem">IdealRfGap</a>&nbsp;gap)</pre>
<div class="block"><p>
 Calculation of emittance increase due to phase spread
 based on calculations in Trace3d (RfGap.f)
 </p>
 <p>
 Used in EnvTrackerAdapt, EnvelopeTracker
 </p>
 <p>
 <h4>CKA Notes:</h4>
 - I think this should go in the <b>Algorithm</b> class.
 It expects an <code>EnvelopeProbe</code> - element objects
 should really not be concerned with the type of probe.
 </p></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>probe</code> - envelope probe object (something with emittance and moments)</dd>
<dd><code>gap</code> - the RF gap modeling element creating the bunch phase spread</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the change in emittance after going through this element</dd>
</dl>
</li>
</ul>
<a name="correctLongSigmaPhaseSpread-xal.model.probe.EnvelopeProbe-xal.model.elem.IdealRfGap-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>correctLongSigmaPhaseSpread</h4>
<pre>public&nbsp;double&nbsp;correctLongSigmaPhaseSpread(<a href="../../../xal/model/probe/EnvelopeProbe.html" title="class in xal.model.probe">EnvelopeProbe</a>&nbsp;probe,
                                          <a href="../../../xal/model/elem/IdealRfGap.html" title="class in xal.model.elem">IdealRfGap</a>&nbsp;gap)</pre>
<div class="block"><p>
 Calculation of emittance increase due to phase spread
 based on calculations in Trace3d (RfGap.f)
 </p>
 <p>
 used in EnvTrackerAdapt, EnvelopeTracker
 </p>
 <p>
 <h4>CKA Notes:</h4>
 - I think this should go in the <b>Algorithm</b> class.
 It expects an <code>EnvelopeProbe</code> - element objects
 should really not be concerned with the type of probe.
 </p></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>probe</code> - envelope-type probe (something with emittance and moments)</dd>
<dd><code>gap</code> - the RF gap modeling element creating the bunch phase spread</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the increase in longitudinal emittance due to finite phase spread</dd>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../xal/model/alg/EnvelopeTracker.html" title="class in xal.model.alg"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../xal/model/alg/EnvelopeTrackerBase.EmitGrowthModel.html" title="enum in xal.model.alg"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?xal/model/alg/EnvelopeTrackerBase.html" target="_top">Frames</a></li>
<li><a href="EnvelopeTrackerBase.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested.class.summary">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
