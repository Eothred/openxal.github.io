<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (1.8.0_31) on Thu Feb 05 15:44:30 EST 2015 -->
<title>SimResultsAdaptor</title>
<meta name="date" content="2015-02-05">
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="SimResultsAdaptor";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":10,"i1":10,"i2":10,"i3":10,"i4":10,"i5":10,"i6":10};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../xal/tools/beam/calc/SimpleSimResultsAdaptor.html" title="class in xal.tools.beam.calc"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li>Next&nbsp;Class</li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?xal/tools/beam/calc/SimResultsAdaptor.html" target="_top">Frames</a></li>
<li><a href="SimResultsAdaptor.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">xal.tools.beam.calc</div>
<h2 title="Class SimResultsAdaptor" class="title">Class SimResultsAdaptor</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>xal.tools.beam.calc.SimResultsAdaptor</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Implemented Interfaces:</dt>
<dd><a href="../../../../xal/tools/beam/calc/ISimulationResults.html" title="interface in xal.tools.beam.calc">ISimulationResults</a>, <a href="../../../../xal/tools/beam/calc/ISimulationResults.ISimEnvResults.html" title="interface in xal.tools.beam.calc">ISimulationResults.ISimEnvResults</a>&lt;<a href="../../../../xal/model/probe/traj/ProbeState.html" title="class in xal.model.probe.traj">ProbeState</a>&lt;?&gt;&gt;, <a href="../../../../xal/tools/beam/calc/ISimulationResults.ISimLocResults.html" title="interface in xal.tools.beam.calc">ISimulationResults.ISimLocResults</a>&lt;<a href="../../../../xal/model/probe/traj/ProbeState.html" title="class in xal.model.probe.traj">ProbeState</a>&lt;?&gt;&gt;</dd>
</dl>
<dl>
<dt>Direct Known Subclasses:</dt>
<dd><a href="../../../../xal/tools/beam/calc/SimpleSimResultsAdaptor.html" title="class in xal.tools.beam.calc">SimpleSimResultsAdaptor</a></dd>
</dl>
<hr>
<br>
<pre>public class <span class="typeNameLabel">SimResultsAdaptor</span>
extends java.lang.Object
implements <a href="../../../../xal/tools/beam/calc/ISimulationResults.ISimLocResults.html" title="interface in xal.tools.beam.calc">ISimulationResults.ISimLocResults</a>&lt;<a href="../../../../xal/model/probe/traj/ProbeState.html" title="class in xal.model.probe.traj">ProbeState</a>&lt;?&gt;&gt;, <a href="../../../../xal/tools/beam/calc/ISimulationResults.ISimEnvResults.html" title="interface in xal.tools.beam.calc">ISimulationResults.ISimEnvResults</a>&lt;<a href="../../../../xal/model/probe/traj/ProbeState.html" title="class in xal.model.probe.traj">ProbeState</a>&lt;?&gt;&gt;</pre>
<div class="block"><p>
 This class allows the developer to dynamically choose which calculation engine
 applies to which simulation results type.  This is done by first registering
 the calculation engine (i.e., <code>CalculationsOnBeams</code>, 
 <code>CalculationsOnRings</code>, etc.) using the method 
 <code><a href="../../../../xal/tools/beam/calc/SimResultsAdaptor.html#registerCalcEngine-java.lang.Class-I-"><code>registerCalcEngine(Class, ISimulationResults)</code></a></code> while providing
 the type of <code>ProbeState</code> derived simulation data and the previously
 instantiated calculation engine.
 </p>
 <p>
 Currently, either or both of the interfaces<code>ISimulationResults.ISimLocResults</code> and 
 <code>ISimulationResults.ISimEnvResults</code> are recognized by the adaptor and the
 adaptor exposes both interfaces itself.  When registering the adaptor checks if 
 the calculation engine exposes each of the above interfaces then registers it as
 a provider of that calculation output.  Any calls to 
 <code><a href="../../../../xal/tools/beam/calc/SimResultsAdaptor.html#registerCalcEngine-java.lang.Class-I-"><code>registerCalcEngine(Class, ISimulationResults)</code></a></code> supersedes any previous 
 registrations.
 </p>
 <p>
 When an exposed method of either of the supported interfaces is called upon this
 adaptor, it first looks at the type of <code>ProbeState</code> it was given
 then retrieves the calculation engine registered to that type.  It then 
 delegates the method call to that simulation engine and returns the result.
 </p></div>
<dl>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>Nov 15, 2013</dd>
</dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== NESTED CLASS SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="nested.class.summary">
<!--   -->
</a>
<h3>Nested Class Summary</h3>
<ul class="blockList">
<li class="blockList"><a name="nested.classes.inherited.from.class.xal.tools.beam.calc.ISimulationResults">
<!--   -->
</a>
<h3>Nested classes/interfaces inherited from interface&nbsp;xal.tools.beam.calc.<a href="../../../../xal/tools/beam/calc/ISimulationResults.html" title="interface in xal.tools.beam.calc">ISimulationResults</a></h3>
<code><a href="../../../../xal/tools/beam/calc/ISimulationResults.ISimEnvResults.html" title="interface in xal.tools.beam.calc">ISimulationResults.ISimEnvResults</a>&lt;<a href="../../../../xal/tools/beam/calc/ISimulationResults.ISimEnvResults.html" title="type parameter in ISimulationResults.ISimEnvResults">S</a>&gt;, <a href="../../../../xal/tools/beam/calc/ISimulationResults.ISimLocResults.html" title="interface in xal.tools.beam.calc">ISimulationResults.ISimLocResults</a>&lt;<a href="../../../../xal/tools/beam/calc/ISimulationResults.ISimLocResults.html" title="type parameter in ISimulationResults.ISimLocResults">S</a>&gt;</code></li>
</ul>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><span class="memberNameLink"><a href="../../../../xal/tools/beam/calc/SimResultsAdaptor.html#SimResultsAdaptor--">SimResultsAdaptor</a></span>()</code>
<div class="block">Constructor for SimResultsAdaptor.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code><a href="../../../../xal/tools/math/r3/R3.html" title="class in xal.tools.math.r3">R3</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../xal/tools/beam/calc/SimResultsAdaptor.html#computeBetatronPhase-xal.model.probe.traj.ProbeState-">computeBetatronPhase</a></span>(<a href="../../../../xal/model/probe/traj/ProbeState.html" title="class in xal.model.probe.traj">ProbeState</a>&lt;?&gt;&nbsp;state)</code>
<div class="block">Get the betatron phase values at the given state location for 
 all three phase planes.</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code><a href="../../../../xal/tools/beam/PhaseVector.html" title="class in xal.tools.beam">PhaseVector</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../xal/tools/beam/calc/SimResultsAdaptor.html#computeChromAberration-xal.model.probe.traj.ProbeState-">computeChromAberration</a></span>(<a href="../../../../xal/model/probe/traj/ProbeState.html" title="class in xal.model.probe.traj">ProbeState</a>&lt;?&gt;&nbsp;state)</code>
<div class="block">Compute and return the aberration at the given state location 
 due to energy spread.</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code><a href="../../../../xal/tools/beam/PhaseVector.html" title="class in xal.tools.beam">PhaseVector</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../xal/tools/beam/calc/SimResultsAdaptor.html#computeChromDispersion-xal.model.probe.traj.ProbeState-">computeChromDispersion</a></span>(<a href="../../../../xal/model/probe/traj/ProbeState.html" title="class in xal.model.probe.traj">ProbeState</a>&lt;?&gt;&nbsp;state)</code>
<div class="block">
 Calculates the fixed point (closed orbit) in transverse phase space
 at the given state <i>S<sub>n</sub></i> location <i>s<sub>n</sub></i> in the presence of dispersion.</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code><a href="../../../../xal/tools/beam/PhaseVector.html" title="class in xal.tools.beam">PhaseVector</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../xal/tools/beam/calc/SimResultsAdaptor.html#computeCoordinatePosition-xal.model.probe.traj.ProbeState-">computeCoordinatePosition</a></span>(<a href="../../../../xal/model/probe/traj/ProbeState.html" title="class in xal.model.probe.traj">ProbeState</a>&lt;?&gt;&nbsp;state)</code>
<div class="block"> 
  Returns homogeneous phase space coordinates of something involving the simulation
  data.</div>
</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code><a href="../../../../xal/tools/beam/PhaseVector.html" title="class in xal.tools.beam">PhaseVector</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../xal/tools/beam/calc/SimResultsAdaptor.html#computeFixedOrbit-xal.model.probe.traj.ProbeState-">computeFixedOrbit</a></span>(<a href="../../../../xal/model/probe/traj/ProbeState.html" title="class in xal.model.probe.traj">ProbeState</a>&lt;?&gt;&nbsp;state)</code>
<div class="block">
 Computes the fixed orbit about which betatron oscillations occur.</div>
</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code><a href="../../../../xal/tools/beam/Twiss.html" title="class in xal.tools.beam">Twiss</a>[]</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../xal/tools/beam/calc/SimResultsAdaptor.html#computeTwissParameters-xal.model.probe.traj.ProbeState-">computeTwissParameters</a></span>(<a href="../../../../xal/model/probe/traj/ProbeState.html" title="class in xal.model.probe.traj">ProbeState</a>&lt;?&gt;&nbsp;state)</code>
<div class="block">Returns the array of twiss objects for this state for all three planes at the
 location of the given simulation state.</div>
</td>
</tr>
<tr id="i6" class="altColor">
<td class="colFirst"><code>&lt;I extends <a href="../../../../xal/tools/beam/calc/ISimulationResults.html" title="interface in xal.tools.beam.calc">ISimulationResults</a>&gt;<br>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../xal/tools/beam/calc/SimResultsAdaptor.html#registerCalcEngine-java.lang.Class-I-">registerCalcEngine</a></span>(java.lang.Class&lt;? extends <a href="../../../../xal/model/probe/traj/ProbeState.html" title="class in xal.model.probe.traj">ProbeState</a>&lt;?&gt;&gt;&nbsp;clsType,
                  I&nbsp;iCalcEngine)</code>
<div class="block">Register the location calculation engine for the given probe data type.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="SimResultsAdaptor--">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>SimResultsAdaptor</h4>
<pre>public&nbsp;SimResultsAdaptor()</pre>
<div class="block">Constructor for SimResultsAdaptor.</div>
<dl>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>Nov 15, 2013</dd>
</dl>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="registerCalcEngine-java.lang.Class-xal.tools.beam.calc.ISimulationResults-">
<!--   -->
</a><a name="registerCalcEngine-java.lang.Class-I-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>registerCalcEngine</h4>
<pre>public&nbsp;&lt;I extends <a href="../../../../xal/tools/beam/calc/ISimulationResults.html" title="interface in xal.tools.beam.calc">ISimulationResults</a>&gt;&nbsp;void&nbsp;registerCalcEngine(java.lang.Class&lt;? extends <a href="../../../../xal/model/probe/traj/ProbeState.html" title="class in xal.model.probe.traj">ProbeState</a>&lt;?&gt;&gt;&nbsp;clsType,
                                                              I&nbsp;iCalcEngine)
                                                       throws java.lang.IllegalArgumentException</pre>
<div class="block">Register the location calculation engine for the given probe data type.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>clsType</code> - class type of the simulation trajectory states</dd>
<dd><code>iCalcEngine</code> - interface of computation engine for processing the data</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.lang.IllegalArgumentException</code> - unknown calculation engine type</dd>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>Nov 15, 2013</dd>
</dl>
</li>
</ul>
<a name="computeCoordinatePosition-xal.model.probe.traj.ProbeState-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>computeCoordinatePosition</h4>
<pre>public&nbsp;<a href="../../../../xal/tools/beam/PhaseVector.html" title="class in xal.tools.beam">PhaseVector</a>&nbsp;computeCoordinatePosition(<a href="../../../../xal/model/probe/traj/ProbeState.html" title="class in xal.model.probe.traj">ProbeState</a>&lt;?&gt;&nbsp;state)
                                      throws java.lang.IllegalArgumentException</pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../../../../xal/tools/beam/calc/ISimulationResults.ISimLocResults.html#computeCoordinatePosition-S-">ISimulationResults.ISimLocResults</a></code></span></div>
<div class="block"><p> 
  Returns homogeneous phase space coordinates of something involving the simulation
  data.  The interpretation is highly dependent upon the context of the data.  
  That is, this quantity is open for interpretation; we can be referring to
  the position of the design trajectory, an offset, or the location of the beam centroid,
  whatever "beam" means in the context.  The units
  are meters and radians.
  </p>
 <p>
 <h4>NOTE:</h4>
  This quantity is obtuse and not well defined - PhaseCoordinates of what?
  <br/>  
              &nbsp; &nbsp; &middot; Is this a centroid location?
  <br/>  
              &nbsp; &nbsp; &middot; From which starting orbit?  
  <br/>  
              &nbsp; &nbsp; &middot; Not all simulation results have quantities 
                                      naturally associated with phase coordinates
 </p></div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../xal/tools/beam/calc/ISimulationResults.ISimLocResults.html#computeCoordinatePosition-S-">computeCoordinatePosition</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../xal/tools/beam/calc/ISimulationResults.ISimLocResults.html" title="interface in xal.tools.beam.calc">ISimulationResults.ISimLocResults</a>&lt;<a href="../../../../xal/model/probe/traj/ProbeState.html" title="class in xal.model.probe.traj">ProbeState</a>&lt;?&gt;&gt;</code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>state</code> - simulation state where parameters are computed</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>vector (<i>x,x',y,y',z,z'</i>,1) of phase space coordinates</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.lang.IllegalArgumentException</code></dd>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>Nov 19, 2013</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><code>xal.tools.beam.calc.ISimulationResults.ISimLocResults#computeCoordinatePosition(xal.model.probe.traj.ProbeState)</code></dd>
</dl>
</li>
</ul>
<a name="computeFixedOrbit-xal.model.probe.traj.ProbeState-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>computeFixedOrbit</h4>
<pre>public&nbsp;<a href="../../../../xal/tools/beam/PhaseVector.html" title="class in xal.tools.beam">PhaseVector</a>&nbsp;computeFixedOrbit(<a href="../../../../xal/model/probe/traj/ProbeState.html" title="class in xal.model.probe.traj">ProbeState</a>&lt;?&gt;&nbsp;state)</pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../../../../xal/tools/beam/calc/ISimulationResults.ISimLocResults.html#computeFixedOrbit-S-">ISimulationResults.ISimLocResults</a></code></span></div>
<div class="block"><p>
 Computes the fixed orbit about which betatron oscillations occur. This
 value is well-defined for rings but could be ambiguous for beam envelope
 simulation, especially with regard to method 
 <code><code>#computeCoordinatePosition(ProbeState)</code></code>.  The returned
 value for some given simulation types are provided below.
 </p>
 <p>
 In general
 the idea is that the returned coordinate <b>z</b> in phase space <b>P</b><sup>6</sup> &cong;
 <b>R</b><sup>6</sup> &times; {1} is invariant under some map 
 <b>&phi;</b> : <b>P</b><sup>6</sup> &rarr; <b>P</b><sup>6</sup> representing the 
 dynamics of the system. 
 </p>
 <p>
 <h4>IMPORTANT NOTE</h4>
 This method is provided to
 maintain compatibility with the previous use of <code>computeFixedOrbit()</code>
 presented by the trajectory classes for particles, beam envelopes, etc.  (This method
 has been deprecated and discontinued.)  The methods
 responded differently depending upon whether the structure producing the simulation
 data was from a ring or a linear transport/accelerator structure.  This behavior
 has now changed, the method produces different results for <em>different simulation
 types</em> (e.g., particle, transfer map, envelope, etc.) rather than different simulation
 structures.
 </p>
 <p>
 When the underlying data is produced by a transfer map this method 
 <em>should return the fixed
 orbit position</em> at the given state.  
 When the underlying data is produced by a particle 
 then the returned value <em>should be the position of the particle</em>
 at the given state location (for its given initial position).
 When the underlying data is from a beam envelope then this method <em>should return
 the centroid location</em> of the beam bunch (for its given initial condition).
 </p>
 <p>
 You must specify the simulation processing engine for each data type to 
 use a <code>SimResultsAdaptor</code>. To reproduce the behavior of the past 
 <code>Trajectory#computeFixedOrbit(ProbeState)</code> specify a 
 <code><a href="../../../../xal/tools/beam/calc/CalculationsOnMachines.html" title="class in xal.tools.beam.calc"><code>CalculationsOnMachines</code></a></code> simulation data processor for ring
 lattices and a <code><a href="../../../../xal/tools/beam/calc/CalculationsOnBeams.html" title="class in xal.tools.beam.calc"><code>CalculationsOnBeams</code></a></code> simulation processor 
 for linear lattices.  This configuration is accommodated in the class
 <code><a href="../../../../xal/tools/beam/calc/SimpleSimResultsAdaptor.html" title="class in xal.tools.beam.calc"><code>SimpleSimResultsAdaptor</code></a></code> exposing this interface.
 </p></div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../xal/tools/beam/calc/ISimulationResults.ISimLocResults.html#computeFixedOrbit-S-">computeFixedOrbit</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../xal/tools/beam/calc/ISimulationResults.ISimLocResults.html" title="interface in xal.tools.beam.calc">ISimulationResults.ISimLocResults</a>&lt;<a href="../../../../xal/model/probe/traj/ProbeState.html" title="class in xal.model.probe.traj">ProbeState</a>&lt;?&gt;&gt;</code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>state</code> - simulation state where parameters are computed</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the reference orbit vector (<i>x,x',y,y',z,z'</i>,1) (see comments)</dd>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>Nov 19, 2013</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><code>xal.tools.beam.calc.ISimulationResults.ISimLocResults#computeFixedOrbit(xal.model.probe.traj.ProbeState)</code></dd>
</dl>
</li>
</ul>
<a name="computeChromAberration-xal.model.probe.traj.ProbeState-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>computeChromAberration</h4>
<pre>public&nbsp;<a href="../../../../xal/tools/beam/PhaseVector.html" title="class in xal.tools.beam">PhaseVector</a>&nbsp;computeChromAberration(<a href="../../../../xal/model/probe/traj/ProbeState.html" title="class in xal.model.probe.traj">ProbeState</a>&lt;?&gt;&nbsp;state)</pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../../../../xal/tools/beam/calc/ISimulationResults.ISimLocResults.html#computeChromAberration-S-">ISimulationResults.ISimLocResults</a></code></span></div>
<div class="block">Compute and return the aberration at the given state location 
 due to energy spread.  The returned value <b>&Delta;</b> is the vector
 <br/>
 <br/>
 &nbsp; &nbsp; <b>&Delta;</b> &equiv; 
 (&Delta;<i>x</i>, &Delta;<i>x'</i>, &Delta;<i>y</i>, &Delta;<i>y'</i>, 0, 0, 1)
 <br/>
 <br/>
 where, when multiplied by momentum spread &delta; &equiv; &Delta;<i>p</i>/<i>p</i> yields
 the change in fixed orbit position.  That is <b>z</b> = <b>z</b><sub>0</sub> + &delta;<b>&Delta;</b>.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../xal/tools/beam/calc/ISimulationResults.ISimLocResults.html#computeChromAberration-S-">computeChromAberration</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../xal/tools/beam/calc/ISimulationResults.ISimLocResults.html" title="interface in xal.tools.beam.calc">ISimulationResults.ISimLocResults</a>&lt;<a href="../../../../xal/model/probe/traj/ProbeState.html" title="class in xal.model.probe.traj">ProbeState</a>&lt;?&gt;&gt;</code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>state</code> - simulation state where parameters are computed</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the vector <b>&Delta;</b> of dispersion coefficients</dd>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>Nov 19, 2013</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><code>xal.tools.beam.calc.ISimulationResults.ISimLocResults#computeChromAberration(xal.model.probe.traj.ProbeState)</code></dd>
</dl>
</li>
</ul>
<a name="computeTwissParameters-xal.model.probe.traj.ProbeState-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>computeTwissParameters</h4>
<pre>public&nbsp;<a href="../../../../xal/tools/beam/Twiss.html" title="class in xal.tools.beam">Twiss</a>[]&nbsp;computeTwissParameters(<a href="../../../../xal/model/probe/traj/ProbeState.html" title="class in xal.model.probe.traj">ProbeState</a>&lt;?&gt;&nbsp;state)</pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../../../../xal/tools/beam/calc/ISimulationResults.ISimEnvResults.html#computeTwissParameters-S-">ISimulationResults.ISimEnvResults</a></code></span></div>
<div class="block">Returns the array of twiss objects for this state for all three planes at the
 location of the given simulation state. These could be the matched beam
 Twiss parameters for a periodic structure or the dynamics Twiss parameters
 of a mismatched or otherwise evolving beam.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../xal/tools/beam/calc/ISimulationResults.ISimEnvResults.html#computeTwissParameters-S-">computeTwissParameters</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../xal/tools/beam/calc/ISimulationResults.ISimEnvResults.html" title="interface in xal.tools.beam.calc">ISimulationResults.ISimEnvResults</a>&lt;<a href="../../../../xal/model/probe/traj/ProbeState.html" title="class in xal.model.probe.traj">ProbeState</a>&lt;?&gt;&gt;</code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>state</code> - simulation state where Twiss parameters are computed</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>array (twiss-H, twiss-V, twiss-L)</dd>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>Nov 19, 2013</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><code>xal.tools.beam.calc.ISimulationResults.ISimEnvResults#computeTwissParameters(xal.model.probe.traj.ProbeState)</code></dd>
</dl>
</li>
</ul>
<a name="computeBetatronPhase-xal.model.probe.traj.ProbeState-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>computeBetatronPhase</h4>
<pre>public&nbsp;<a href="../../../../xal/tools/math/r3/R3.html" title="class in xal.tools.math.r3">R3</a>&nbsp;computeBetatronPhase(<a href="../../../../xal/model/probe/traj/ProbeState.html" title="class in xal.model.probe.traj">ProbeState</a>&lt;?&gt;&nbsp;state)</pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../../../../xal/tools/beam/calc/ISimulationResults.ISimEnvResults.html#computeBetatronPhase-S-">ISimulationResults.ISimEnvResults</a></code></span></div>
<div class="block">Get the betatron phase values at the given state location for 
 all three phase planes.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../xal/tools/beam/calc/ISimulationResults.ISimEnvResults.html#computeBetatronPhase-S-">computeBetatronPhase</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../xal/tools/beam/calc/ISimulationResults.ISimEnvResults.html" title="interface in xal.tools.beam.calc">ISimulationResults.ISimEnvResults</a>&lt;<a href="../../../../xal/model/probe/traj/ProbeState.html" title="class in xal.model.probe.traj">ProbeState</a>&lt;?&gt;&gt;</code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>state</code> - simulation state where parameters are computed</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>vector (&psi;<sub><i>x</i></sub>, &psi;<sub><i>y</i></sub>, &psi;<sub><i>x</i></sub>) of phases in radians</dd>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>Nov 19, 2013</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><code>xal.tools.beam.calc.ISimulationResults.ISimEnvResults#computeBetatronPhase(xal.model.probe.traj.ProbeState)</code></dd>
</dl>
</li>
</ul>
<a name="computeChromDispersion-xal.model.probe.traj.ProbeState-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>computeChromDispersion</h4>
<pre>public&nbsp;<a href="../../../../xal/tools/beam/PhaseVector.html" title="class in xal.tools.beam">PhaseVector</a>&nbsp;computeChromDispersion(<a href="../../../../xal/model/probe/traj/ProbeState.html" title="class in xal.model.probe.traj">ProbeState</a>&lt;?&gt;&nbsp;state)</pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../../../../xal/tools/beam/calc/ISimulationResults.ISimEnvResults.html#computeChromDispersion-S-">ISimulationResults.ISimEnvResults</a></code></span></div>
<div class="block"><p>
 Calculates the fixed point (closed orbit) in transverse phase space
 at the given state <i>S<sub>n</sub></i> location <i>s<sub>n</sub></i> in the presence of dispersion.  
 </p>
 <p>
 Let the full-turn map a the state location be denoted <b>&Phi;</b><sub><i>n</i></sub> (or the transfer
 matrix from entrance to location <i>s<sub>n</sub></i> for a linac).
 The transverse plane dispersion vector <b>&Delta;</b> is defined  
 <br/>
 <br/> 
 &nbsp; &nbsp; <b>&Delta;</b><sub><i>t</i></sub> &equiv; -(1/&gamma;<sup>2</sup>)[d<i>x</i>/d<i>z'</i>, d<i>x'</i>/d<i>z'</i>, d<i>y</i>/d<i>z'</i>, d<i>y'</i>/d<i>z'</i>]<sup><i>T</i></sup> .
 <br/>
 <br/>  
 It can be identified as the first 4 entries of the 6<sup><i>th</i></sup> 
 column in the transfer matrix <b>&Phi;</b></b><sub><i>n</i></sub>. The above vector
 quantifies the change in the transverse particle phase 
 coordinate position versus the change in particle momentum.  
 The factor -(1/&gamma;<sup>2</sup>) is needed to convert from longitudinal divergence
 angle <i>z'</i> used by XAL to momentum &delta;<i>p</i> &equiv; &Delta;<i>p</i>/<i>p</i> used in 
 the dispersion definition.  Specifically,
 <br/>
 <br/>
 &nbsp; &nbsp; &delta;<i>p</i> &equiv; &Delta;<i>p</i>/<i>p</i> = &gamma;<sup>2</sup><i>z</i>'
 <br/>
 <br/>
 As such, the above vector can be better described
 <br/>
 <br/> 
 &nbsp; &nbsp; <b>&Delta;</b><sub><i>t</i></sub> &equiv; [&Delta;<i>x</i>/&delta;<i>p</i>, &Delta;<i>x'</i>/&delta;<i>p</i>, &Delta;<i>y</i>/&delta;<i>p</i>, &Delta;<i>y'</i>/&delta;<i>p</i>]<sup><i>T</i></sup>
 <br/>
 <br/>
 explicitly describing the change in transverse phase coordinate for fractional
 change in momentum &delta;<i>p</i>.  
 </p>
 <p>
 Since we are only concerned with transverse phase space coordinates, we restrict ourselves to the 
 4&times;4 upper diagonal block of <b>&Phi;</b></b><sub><i>n</i></sub>, which we denote take <b>T</b></b><sub><i>n</i></sub>.  
 That is, <b>T</b></b><sub><i>n</i></sub> = &pi; &sdot; <b>&Phi;</b></b><sub><i>n</i></sub>
 where &pi; : <b>R</b><sup>6&times;6</sup> &rarr; <b>R</b><sup>4&times;4</sup> is the
 projection operator. 
 </p>
 <p>
 This method finds that point <b>z</b><sub><i>t</i></sub> &equiv; 
 (<i>x<sub>t</sub></i>, <i>x'<sub>t</sub></i>, <i>y<sub>t</sub></i>, <i>y'<sub>t</sub></i>)
 in transvse phase space that is invariant under the action of the ring for a given momentum spread
 &delta;<i>p</i>.  That is, the particle ends up
 in the same location each revolution. With a finite momentum spread of &delta;<i>p</i> &gt; 0
 we require this require that
 <br/>
 <br/>
 &nbsp; &nbsp; <b>T</b><sub><i>n</i><b></sub>z</b><sub><i>t</i></sub> + &delta;<i>p</i><b>&Delta;</b><sub><i>t</i></sub> = <b>z</b><sub><i>t</i></sub> ,
 <br/>
 <br/>
 which can be written
 <br/>
 <br/>
 &nbsp; <b>z</b><sub><i>t</i></sub> = &delta;<i>p</i>(<b>T</b></b><sub><i>n</i></sub> - <b>I</b>)<sup>-1</sup><b>&Delta;</b><sub><i>t</i></sub> ,
 <br/>
 <br/>
 where <b>I</b> is the identity matrix.  Dividing both sides by &delta;<i>p</i> yields the final
 result
 <br/>
 <br/>
 &nbsp; <b>z</b><sub>0</sub> &equiv; <b>z</b><sub><i>t</i></sub>/&delta;<i>p</i> = (<b>T</b></b><sub><i>n</i></sub> - <b>I</b>)<sup>-1</sup><b>&Delta;</b><sub><i>t</i></sub> ,
 <br/>
 <br/>
 which is the returned value of this method.  It is normalized by
 &delta;<i>p</i> so that we can compute the closed orbit for any given momentum spread.
 </p></div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../xal/tools/beam/calc/ISimulationResults.ISimEnvResults.html#computeChromDispersion-S-">computeChromDispersion</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../xal/tools/beam/calc/ISimulationResults.ISimEnvResults.html" title="interface in xal.tools.beam.calc">ISimulationResults.ISimEnvResults</a>&lt;<a href="../../../../xal/model/probe/traj/ProbeState.html" title="class in xal.model.probe.traj">ProbeState</a>&lt;?&gt;&gt;</code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>state</code> - we are calculating the dispersion at this state location</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>The closed orbit fixed point <b>z</b><sub>0</sub> for finite 
                 dispersion, normalized by momentum spread.
                 Returned as an array [<i>x</i><sub>0</sub>,<i>x'</i><sub>0</sub>,<i>y</i><sub>0</sub>,<i>y'</i><sub>0</sub>]/&delta;<i>p</i></dd>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>Nov 19, 2013</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><code>xal.tools.beam.calc.ISimulationResults.ISimEnvResults#computeChromDispersion(xal.model.probe.traj.ProbeState)</code></dd>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../xal/tools/beam/calc/SimpleSimResultsAdaptor.html" title="class in xal.tools.beam.calc"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li>Next&nbsp;Class</li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?xal/tools/beam/calc/SimResultsAdaptor.html" target="_top">Frames</a></li>
<li><a href="SimResultsAdaptor.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
