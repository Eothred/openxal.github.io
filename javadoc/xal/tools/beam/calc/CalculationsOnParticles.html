<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (1.8.0_31) on Thu Feb 05 15:44:30 EST 2015 -->
<title>CalculationsOnParticles</title>
<meta name="date" content="2015-02-05">
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="CalculationsOnParticles";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":10,"i1":10,"i2":10,"i3":10,"i4":10,"i5":10,"i6":10,"i7":10};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../xal/tools/beam/calc/CalculationsOnMachines.html" title="class in xal.tools.beam.calc"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../xal/tools/beam/calc/CalculationsOnRings.html" title="class in xal.tools.beam.calc"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?xal/tools/beam/calc/CalculationsOnParticles.html" target="_top">Frames</a></li>
<li><a href="CalculationsOnParticles.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">xal.tools.beam.calc</div>
<h2 title="Class CalculationsOnParticles" class="title">Class CalculationsOnParticles</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li><a href="../../../../xal/tools/beam/calc/CalculationEngine.html" title="class in xal.tools.beam.calc">xal.tools.beam.calc.CalculationEngine</a></li>
<li>
<ul class="inheritance">
<li>xal.tools.beam.calc.CalculationsOnParticles</li>
</ul>
</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Implemented Interfaces:</dt>
<dd><a href="../../../../xal/tools/beam/calc/ISimulationResults.html" title="interface in xal.tools.beam.calc">ISimulationResults</a>, <a href="../../../../xal/tools/beam/calc/ISimulationResults.ISimLocResults.html" title="interface in xal.tools.beam.calc">ISimulationResults.ISimLocResults</a>&lt;<a href="../../../../xal/model/probe/traj/ParticleProbeState.html" title="class in xal.model.probe.traj">ParticleProbeState</a>&gt;</dd>
</dl>
<hr>
<br>
<pre>public class <span class="typeNameLabel">CalculationsOnParticles</span>
extends <a href="../../../../xal/tools/beam/calc/CalculationEngine.html" title="class in xal.tools.beam.calc">CalculationEngine</a>
implements <a href="../../../../xal/tools/beam/calc/ISimulationResults.ISimLocResults.html" title="interface in xal.tools.beam.calc">ISimulationResults.ISimLocResults</a>&lt;<a href="../../../../xal/model/probe/traj/ParticleProbeState.html" title="class in xal.model.probe.traj">ParticleProbeState</a>&gt;</pre>
<div class="block"><p>
 Provides processing functions appropriate for single particle simulation data.
 </p>
 <p>
 Additional class methods provide access to computed quantities used by the
 class for the above processing, such as the "periodic fixed orbit", "periodic
 betatron phase advance", and "period matched Twiss parameter".  These parameters
 make not make sense here, as we make the very broad assumption that the particle
 is in a periodic system and the simulation data is taken about <i>n</i> periods,
 but they are available.  
 </p></div>
<dl>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>Nov 14, 2013</dd>
</dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== NESTED CLASS SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="nested.class.summary">
<!--   -->
</a>
<h3>Nested Class Summary</h3>
<ul class="blockList">
<li class="blockList"><a name="nested.classes.inherited.from.class.xal.tools.beam.calc.ISimulationResults">
<!--   -->
</a>
<h3>Nested classes/interfaces inherited from interface&nbsp;xal.tools.beam.calc.<a href="../../../../xal/tools/beam/calc/ISimulationResults.html" title="interface in xal.tools.beam.calc">ISimulationResults</a></h3>
<code><a href="../../../../xal/tools/beam/calc/ISimulationResults.ISimEnvResults.html" title="interface in xal.tools.beam.calc">ISimulationResults.ISimEnvResults</a>&lt;<a href="../../../../xal/tools/beam/calc/ISimulationResults.ISimEnvResults.html" title="type parameter in ISimulationResults.ISimEnvResults">S</a>&gt;, <a href="../../../../xal/tools/beam/calc/ISimulationResults.ISimLocResults.html" title="interface in xal.tools.beam.calc">ISimulationResults.ISimLocResults</a>&lt;<a href="../../../../xal/tools/beam/calc/ISimulationResults.ISimLocResults.html" title="type parameter in ISimulationResults.ISimLocResults">S</a>&gt;</code></li>
</ul>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><span class="memberNameLink"><a href="../../../../xal/tools/beam/calc/CalculationsOnParticles.html#CalculationsOnParticles-xal.model.probe.traj.Trajectory-">CalculationsOnParticles</a></span>(<a href="../../../../xal/model/probe/traj/Trajectory.html" title="class in xal.model.probe.traj">Trajectory</a>&lt;<a href="../../../../xal/model/probe/traj/ParticleProbeState.html" title="class in xal.model.probe.traj">ParticleProbeState</a>&gt;&nbsp;datSim)</code>
<div class="block">Constructor for <code>CalculationsOnParticles</code>.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code><a href="../../../../xal/tools/beam/PhaseVector.html" title="class in xal.tools.beam">PhaseVector</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../xal/tools/beam/calc/CalculationsOnParticles.html#computeChromAberration-xal.model.probe.traj.ParticleProbeState-">computeChromAberration</a></span>(<a href="../../../../xal/model/probe/traj/ParticleProbeState.html" title="class in xal.model.probe.traj">ParticleProbeState</a>&nbsp;state)</code>
<div class="block">Computes the chromatic aberration for one pass of the particle around the ring 
 starting at the given state location, 
 or for a beamline the entrance of the line to this state position.</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code><a href="../../../../xal/tools/beam/PhaseVector.html" title="class in xal.tools.beam">PhaseVector</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../xal/tools/beam/calc/CalculationsOnParticles.html#computeCoordinatePosition-xal.model.probe.traj.ParticleProbeState-">computeCoordinatePosition</a></span>(<a href="../../../../xal/model/probe/traj/ParticleProbeState.html" title="class in xal.model.probe.traj">ParticleProbeState</a>&nbsp;state)</code>
<div class="block">Simply returns the location of the simulated particle at the location of
 the give state.</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code><a href="../../../../xal/tools/beam/PhaseVector.html" title="class in xal.tools.beam">PhaseVector</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../xal/tools/beam/calc/CalculationsOnParticles.html#computeFixedOrbit-xal.model.probe.traj.ParticleProbeState-">computeFixedOrbit</a></span>(<a href="../../../../xal/model/probe/traj/ParticleProbeState.html" title="class in xal.model.probe.traj">ParticleProbeState</a>&nbsp;state)</code></td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code><a href="../../../../xal/tools/beam/PhaseMatrix.html" title="class in xal.tools.beam">PhaseMatrix</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../xal/tools/beam/calc/CalculationsOnParticles.html#getFullResponseMatrix--">getFullResponseMatrix</a></span>()</code>
<div class="block">Returns the full response matrix <b>&Phi;</b> providing the sensitivity of the final particle 
 position <b>z</b> to the initial conditions <b>z</b><sub>0</sub>.</div>
</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code><a href="../../../../xal/model/probe/traj/Trajectory.html" title="class in xal.model.probe.traj">Trajectory</a>&lt;<a href="../../../../xal/model/probe/traj/ParticleProbeState.html" title="class in xal.model.probe.traj">ParticleProbeState</a>&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../xal/tools/beam/calc/CalculationsOnParticles.html#getTrajectory--">getTrajectory</a></span>()</code>
<div class="block">Returns the simulation trajectory from which all the machine properties are
 computed.</div>
</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code><a href="../../../../xal/tools/math/r3/R3.html" title="class in xal.tools.math.r3">R3</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../xal/tools/beam/calc/CalculationsOnParticles.html#periodBetatronPhaseAdvance--">periodBetatronPhaseAdvance</a></span>()</code>
<div class="block">
 Returns the betatron phase advances from the simulation beginning to end
 (which are computed at instantiation).</div>
</td>
</tr>
<tr id="i6" class="altColor">
<td class="colFirst"><code><a href="../../../../xal/tools/beam/PhaseVector.html" title="class in xal.tools.beam">PhaseVector</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../xal/tools/beam/calc/CalculationsOnParticles.html#periodFixedOrbitPt--">periodFixedOrbitPt</a></span>()</code>
<div class="block">
 Returns the phase space location of the fixed point at the simulation start 
 (which is computed at instantiation) assuming the simulation is that for
 at least one period of a periodic accelerating or transport section.</div>
</td>
</tr>
<tr id="i7" class="rowColor">
<td class="colFirst"><code><a href="../../../../xal/tools/beam/Twiss.html" title="class in xal.tools.beam">Twiss</a>[]</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../xal/tools/beam/calc/CalculationsOnParticles.html#periodMatchedTwiss--">periodMatchedTwiss</a></span>()</code>
<div class="block">
 Returns the matched Courant-Snyder parameters at the entrance of the simulation
 assuming the simulation is at least one period of a periodic structure.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.xal.tools.beam.calc.CalculationEngine">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;xal.tools.beam.calc.<a href="../../../../xal/tools/beam/calc/CalculationEngine.html" title="class in xal.tools.beam.calc">CalculationEngine</a></h3>
<code><a href="../../../../xal/tools/beam/calc/CalculationEngine.html#calculateAberration-xal.tools.beam.PhaseMatrix-double-">calculateAberration</a>, <a href="../../../../xal/tools/beam/calc/CalculationEngine.html#calculateDispersion-xal.tools.beam.PhaseMatrix-double-">calculateDispersion</a>, <a href="../../../../xal/tools/beam/calc/CalculationEngine.html#calculateFixedPoint-xal.tools.beam.PhaseMatrix-">calculateFixedPoint</a>, <a href="../../../../xal/tools/beam/calc/CalculationEngine.html#calculateMatchedTwiss-xal.tools.beam.PhaseMatrix-">calculateMatchedTwiss</a>, <a href="../../../../xal/tools/beam/calc/CalculationEngine.html#calculatePhaseAdvance_old-xal.tools.beam.PhaseMatrix-xal.tools.beam.Twiss:A-xal.tools.beam.Twiss:A-">calculatePhaseAdvance_old</a>, <a href="../../../../xal/tools/beam/calc/CalculationEngine.html#calculatePhaseAdvance-xal.tools.beam.PhaseMatrix-xal.tools.beam.Twiss:A-xal.tools.beam.Twiss:A-">calculatePhaseAdvance</a>, <a href="../../../../xal/tools/beam/calc/CalculationEngine.html#calculatePhaseAdvPerCell-xal.tools.beam.PhaseMatrix-">calculatePhaseAdvPerCell</a>, <a href="../../../../xal/tools/beam/calc/CalculationEngine.html#calculateTunePerCell-xal.tools.beam.PhaseMatrix-">calculateTunePerCell</a>, <a href="../../../../xal/tools/beam/calc/CalculationEngine.html#computeTwiss-xal.model.probe.TwissProbe-xal.tools.beam.PhaseMatrix-double-">computeTwiss</a></code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="CalculationsOnParticles-xal.model.probe.traj.Trajectory-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>CalculationsOnParticles</h4>
<pre>public&nbsp;CalculationsOnParticles(<a href="../../../../xal/model/probe/traj/Trajectory.html" title="class in xal.model.probe.traj">Trajectory</a>&lt;<a href="../../../../xal/model/probe/traj/ParticleProbeState.html" title="class in xal.model.probe.traj">ParticleProbeState</a>&gt;&nbsp;datSim)</pre>
<div class="block">Constructor for <code>CalculationsOnParticles</code>. Creates a new 
 <code>CalculationsOnParticles</code> object for process the simulation
 data contained in the given particle trajectory object.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>datSim</code> - simulation data for a particle</dd>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>Nov 14, 2013</dd>
</dl>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="getTrajectory--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getTrajectory</h4>
<pre>public&nbsp;<a href="../../../../xal/model/probe/traj/Trajectory.html" title="class in xal.model.probe.traj">Trajectory</a>&lt;<a href="../../../../xal/model/probe/traj/ParticleProbeState.html" title="class in xal.model.probe.traj">ParticleProbeState</a>&gt;&nbsp;getTrajectory()</pre>
<div class="block">Returns the simulation trajectory from which all the machine properties are
 computed.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>simulation trajectory from which this object was initialized</dd>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>Nov 7, 2013</dd>
</dl>
</li>
</ul>
<a name="getFullResponseMatrix--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getFullResponseMatrix</h4>
<pre>public&nbsp;<a href="../../../../xal/tools/beam/PhaseMatrix.html" title="class in xal.tools.beam">PhaseMatrix</a>&nbsp;getFullResponseMatrix()</pre>
<div class="block">Returns the full response matrix <b>&Phi;</b> providing the sensitivity of the final particle 
 position <b>z</b> to the initial conditions <b>z</b><sub>0</sub>.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the response matrix <b>&Phi;</b> = &part;<b>z</b>/&part;<b>z</b><sub>0</sub></dd>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>Nov 7, 2013</dd>
</dl>
</li>
</ul>
<a name="periodBetatronPhaseAdvance--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>periodBetatronPhaseAdvance</h4>
<pre>public&nbsp;<a href="../../../../xal/tools/math/r3/R3.html" title="class in xal.tools.math.r3">R3</a>&nbsp;periodBetatronPhaseAdvance()</pre>
<div class="block"><p>
 Returns the betatron phase advances from the simulation beginning to end
 (which are computed at instantiation).  The results are value for trajectories
 near the simulation trajectory associated with this computation engine.  The fact
 being from the use of the response matrix in the calculations.  
 </p>
 <p>
 The returned value is the calculation
 <code><a href="../../../../xal/tools/beam/calc/CalculationEngine.html#calculatePhaseAdvPerCell-xal.tools.beam.PhaseMatrix-"><code>CalculationEngine.calculatePhaseAdvPerCell(PhaseMatrix)</code></a></code> of the super class,
 and thus assumes simulation trajectory is that for at least one period of 
 a periodic structure.
 </p>
 <p>  
 <h4>NOTES:</h4>
 &middot; The betatron phase advances are given in the range [0,2&pi];.
 <br/>
 </p></div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>vector particle betatron phase advances (in radians)</dd>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>Oct 30, 2013</dd>
</dl>
</li>
</ul>
<a name="periodFixedOrbitPt--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>periodFixedOrbitPt</h4>
<pre>public&nbsp;<a href="../../../../xal/tools/beam/PhaseVector.html" title="class in xal.tools.beam">PhaseVector</a>&nbsp;periodFixedOrbitPt()</pre>
<div class="block"><p>
 Returns the phase space location of the fixed point at the simulation start 
 (which is computed at instantiation) assuming the simulation is that for
 at least one period of a periodic accelerating or transport section.   That is,
 we assume the beamline is periodic and the returned value is an invariant particle
 position under the action of the response matrix.
 </p>
 <p>
 The returned value <b>z</b> is the result of the
 calculation <code><a href="../../../../xal/tools/beam/calc/CalculationEngine.html#calculateFixedPoint-xal.tools.beam.PhaseMatrix-"><code>CalculationEngine.calculateFixedPoint(PhaseMatrix)</code></a></code> given the
 full response matrix <b>&Phi;</b> at the simulation exit (see <a href="../../../../xal/tools/beam/calc/CalculationsOnParticles.html#getFullResponseMatrix--"><code>getFullResponseMatrix()</code></a>). 
 It is invariant under 
 the action of <b>&Phi;</b>, that is, <b>&Phi;z</b> = <b>z</b>. 
 </p>
 <p>  
 <h4>NOTES:</h4>
 &middot; The entrance and exit of the beamline should have the same fixed point
 value.
 </p></div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>Oct 30, 2013</dd>
</dl>
</li>
</ul>
<a name="periodMatchedTwiss--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>periodMatchedTwiss</h4>
<pre>public&nbsp;<a href="../../../../xal/tools/beam/Twiss.html" title="class in xal.tools.beam">Twiss</a>[]&nbsp;periodMatchedTwiss()</pre>
<div class="block"><p>
 Returns the matched Courant-Snyder parameters at the entrance of the simulation
 assuming the simulation is at least one period of a periodic structure. These
 are the "envelopes" taken from the "closed envelope" solution under the assume
 the linac is a periodic transport.
 </p>
 <p>
 Note that emittance &epsilon; is the parameter used to describe the extend of
 the actual beam (rather than the normalized size &beta;), or "acceptance".  Thus it
 cannot be computed here and <code>NaN</code> is returned instead.
 </p>
 <p>  
 <h4>NOTES:</h4>
 &middot; The entrance of the simulation is assumed to be the location of the
 first and last states of the solution trajectory.
 </p></div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>array of Twiss parameter sets (&alpha;, &beta;, NaN)</dd>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>Oct 30, 2013</dd>
</dl>
</li>
</ul>
<a name="computeCoordinatePosition-xal.model.probe.traj.ParticleProbeState-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>computeCoordinatePosition</h4>
<pre>public&nbsp;<a href="../../../../xal/tools/beam/PhaseVector.html" title="class in xal.tools.beam">PhaseVector</a>&nbsp;computeCoordinatePosition(<a href="../../../../xal/model/probe/traj/ParticleProbeState.html" title="class in xal.model.probe.traj">ParticleProbeState</a>&nbsp;state)</pre>
<div class="block">Simply returns the location of the simulated particle at the location of
 the give state.  No real computation necessary.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../xal/tools/beam/calc/ISimulationResults.ISimLocResults.html#computeCoordinatePosition-S-">computeCoordinatePosition</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../xal/tools/beam/calc/ISimulationResults.ISimLocResults.html" title="interface in xal.tools.beam.calc">ISimulationResults.ISimLocResults</a>&lt;<a href="../../../../xal/model/probe/traj/ParticleProbeState.html" title="class in xal.model.probe.traj">ParticleProbeState</a>&gt;</code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>state</code> - simulation state where parameters are computed</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>vector (<i>x,x',y,y',z,z'</i>,1) of phase space coordinates</dd>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>Nov 14, 2013</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><code>xal.tools.beam.calc.ISimEnvResults#computeCoordinatePosition(xal.model.probe.traj.ProbeState)</code></dd>
</dl>
</li>
</ul>
<a name="computeFixedOrbit-xal.model.probe.traj.ParticleProbeState-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>computeFixedOrbit</h4>
<pre>public&nbsp;<a href="../../../../xal/tools/beam/PhaseVector.html" title="class in xal.tools.beam">PhaseVector</a>&nbsp;computeFixedOrbit(<a href="../../../../xal/model/probe/traj/ParticleProbeState.html" title="class in xal.model.probe.traj">ParticleProbeState</a>&nbsp;state)</pre>
<div class="block"><p>
 <h4>IMPORTANT NOTE</h4>
 This method has been modified so it returns exactly the same value as 
 <a href="../../../../xal/tools/beam/calc/CalculationsOnParticles.html#computeCoordinatePosition-xal.model.probe.traj.ParticleProbeState-"><code>computeCoordinatePosition(ParticleProbeState)</code></a>.  This modification is
 maintain compatibility with the previous use of <code>computeFixedOrbit()</code>
 presented by the trajectory classes for particles, beam envelopes, etc.  They
 responded differently depending upon whether the structure producing the simulation
 data was from a ring or a linear transport/accelerator structure.
 <br/>
 <br/>
 Thus, <em>ignore all commenting below!</em>
 </p>
 
 <p>
 Consider first the point in phase space that is invariant under repeated application
 of the response matrix <b>&Phi;</b> for the entire beamline or ring.  This is under 
 the condition that we decompose <b>&Phi;</b> into its homogeneous and non-homogeneous
 components.  A particle entering the linac at that location exits at the same location.
 </p> 
 <p>
 To compute this linac fixed point, recall that the <i>homogeneous</i> response 
 matrix <b>&Phi;</b> for the beamline (or full-turn matrix for a ring)
 has final row that represents the translation <b>&Delta;</b> of the particle
 under the action of <b>&Phi;</b>.  The 6&times;6 sub-matrix of <b>&Phi;</b> represents
 the (linear) action of the bending magnetics and quadrupoles and corresponds to the
 matrix <b>T</b> &in; <b>R</b><sup>6&times;6</sup> (here <b>T</b> is linear). 
 Thus, we can write the linear operator <b>&Phi;</b>
 as the augmented system 
 <br/>
 <br/>
 <pre>
 &nbsp; &nbsp; <b>&Phi;</b> = |<b>T</b> <b>&Delta;</b> |,   <b>z</b> &equiv; |<b>p</b>| ,
         |<b>0</b> 1 |        |1|
 </pre> 
 where <b>p</b> is the projection of <b>z</b> into the embedded phase space
 <b>R</b><sup>6</sup> (without homogeneous coordinate).
 coordinates). 
 </p>
 <p>
 Putting this together we get
 <br/>
 <br/>
 &nbsp; &nbsp; <b>&Phi;z</b> = <b>Tp</b> + <b>&Delta;</b> = <b>p</b> , 
 <br/>
 <br/>
 to which the solution is
 <br/>
 <br/>
 &nbsp; &nbsp; <b>p</b> = -(<b>T</b> - <b>I</b>)<sup>-1</sup><b>&Delta;</b>
 <br/>
 <br/>
 assuming it exists.  The question of solution existence falls upon the
 resolvent <b>R</b> &equiv; (<b>T</b> - <b>I</b>)<sup>-1</sup> of <b>T</b>.
 By inspection we can see that <b>p</b> is defined so long as the eigenvalues
 of <b>T</b> are located away from 1.
 In this case the returned value is the augmented vector 
 (<b>p</b> 1)<sup><i>T</i></sup> &in; <b>R</b><sup>6</sup> &times; {1}.
 </p>
 <p>
 When the set of eigenvectors does contain 1, we attempt to find the solution for the
 transverse phase space.  That is, we take vector <b>p</b> &in; <b>R</b><sup>4</sup>
 and <b>T</b> &in; <b>R</b><sup>4&times;4</sup> where 
 <b>T</b> = proj<sub>4&times;4</sub> <b>&Phi;</b>.  The solution value is then
 <b>z</b> = (<b>p</b> 0 0 1)<sup><i>T</i></sup>.
 </p>
 <p>
 Once we have the fixed point <b>z</b><sub>0</sub> for the linac we compute the trajectory
 of the fixed point at the location of the given probe state.  To do so, we multiply
 <b>z</b><sub>0</sub> by the response matrix <b>&Phi;</b><sub><i>n</i></sub> for the given
 probe state.  That is, we propagate the fixed point of the linac from the linac entrance
 to the location of the given phase state.
 </p></div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../xal/tools/beam/calc/ISimulationResults.ISimLocResults.html#computeFixedOrbit-S-">computeFixedOrbit</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../xal/tools/beam/calc/ISimulationResults.ISimLocResults.html" title="interface in xal.tools.beam.calc">ISimulationResults.ISimLocResults</a>&lt;<a href="../../../../xal/model/probe/traj/ParticleProbeState.html" title="class in xal.model.probe.traj">ParticleProbeState</a>&gt;</code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>state</code> - simulation state where parameters are computed</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>The quantity <b>&Phi;</b><sub><i>n</i></sub>&sdot;<b>z</b><sub>0</sub>, the linac 
          fixed point <b>z</b><sub>0</sub> propagated to the state location <i>s<sub>n</sub></i></dd>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>Nov 14, 2013</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><code>xal.tools.beam.calc.ISimEnvResults#computeFixedOrbit(xal.model.probe.traj.ProbeState)</code></dd>
</dl>
</li>
</ul>
<a name="computeChromAberration-xal.model.probe.traj.ParticleProbeState-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>computeChromAberration</h4>
<pre>public&nbsp;<a href="../../../../xal/tools/beam/PhaseVector.html" title="class in xal.tools.beam">PhaseVector</a>&nbsp;computeChromAberration(<a href="../../../../xal/model/probe/traj/ParticleProbeState.html" title="class in xal.model.probe.traj">ParticleProbeState</a>&nbsp;state)</pre>
<div class="block">Computes the chromatic aberration for one pass of the particle around the ring 
 starting at the given state location, 
 or for a beamline the entrance of the line to this state position. The returned 
 vector is the displacement from the closed orbit caused 
 by a unit momentum offset (&delta;<i>p</i> = 1).  See the documentation in 
 <code>ISimLocResults#computeChromAberration(ProbeState)</code> for a more detailed
 exposition.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../xal/tools/beam/calc/ISimulationResults.ISimLocResults.html#computeChromAberration-S-">computeChromAberration</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../xal/tools/beam/calc/ISimulationResults.ISimLocResults.html" title="interface in xal.tools.beam.calc">ISimulationResults.ISimLocResults</a>&lt;<a href="../../../../xal/model/probe/traj/ParticleProbeState.html" title="class in xal.model.probe.traj">ParticleProbeState</a>&gt;</code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>state</code> - simulation state where parameters are computed</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the vector <b>&Delta;</b> of dispersion coefficients</dd>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>Nov 14, 2013</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><code>xal.tools.beam.calc.ISimLocResults#computeChromAberration(xal.model.probe.traj.ProbeState)</code></dd>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../xal/tools/beam/calc/CalculationsOnMachines.html" title="class in xal.tools.beam.calc"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../xal/tools/beam/calc/CalculationsOnRings.html" title="class in xal.tools.beam.calc"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?xal/tools/beam/calc/CalculationsOnParticles.html" target="_top">Frames</a></li>
<li><a href="CalculationsOnParticles.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
