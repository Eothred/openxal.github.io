<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (1.8.0_31) on Thu Feb 05 15:44:30 EST 2015 -->
<title>CalculationsOnMachines</title>
<meta name="date" content="2015-02-05">
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="CalculationsOnMachines";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":10,"i1":10,"i2":10,"i3":10,"i4":10,"i5":10,"i6":9,"i7":10,"i8":9,"i9":10,"i10":10,"i11":10,"i12":10};
var tabs = {65535:["t0","All Methods"],1:["t1","Static Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../xal/tools/beam/calc/CalculationsOnBeams.html" title="class in xal.tools.beam.calc"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../xal/tools/beam/calc/CalculationsOnParticles.html" title="class in xal.tools.beam.calc"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?xal/tools/beam/calc/CalculationsOnMachines.html" target="_top">Frames</a></li>
<li><a href="CalculationsOnMachines.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">xal.tools.beam.calc</div>
<h2 title="Class CalculationsOnMachines" class="title">Class CalculationsOnMachines</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li><a href="../../../../xal/tools/beam/calc/CalculationEngine.html" title="class in xal.tools.beam.calc">xal.tools.beam.calc.CalculationEngine</a></li>
<li>
<ul class="inheritance">
<li>xal.tools.beam.calc.CalculationsOnMachines</li>
</ul>
</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Implemented Interfaces:</dt>
<dd><a href="../../../../xal/tools/beam/calc/ISimulationResults.html" title="interface in xal.tools.beam.calc">ISimulationResults</a>, <a href="../../../../xal/tools/beam/calc/ISimulationResults.ISimEnvResults.html" title="interface in xal.tools.beam.calc">ISimulationResults.ISimEnvResults</a>&lt;<a href="../../../../xal/model/probe/traj/TransferMapState.html" title="class in xal.model.probe.traj">TransferMapState</a>&gt;, <a href="../../../../xal/tools/beam/calc/ISimulationResults.ISimLocResults.html" title="interface in xal.tools.beam.calc">ISimulationResults.ISimLocResults</a>&lt;<a href="../../../../xal/model/probe/traj/TransferMapState.html" title="class in xal.model.probe.traj">TransferMapState</a>&gt;</dd>
</dl>
<dl>
<dt>Direct Known Subclasses:</dt>
<dd><a href="../../../../xal/tools/beam/calc/CalculationsOnRings.html" title="class in xal.tools.beam.calc">CalculationsOnRings</a></dd>
</dl>
<hr>
<br>
<pre>public class <span class="typeNameLabel">CalculationsOnMachines</span>
extends <a href="../../../../xal/tools/beam/calc/CalculationEngine.html" title="class in xal.tools.beam.calc">CalculationEngine</a>
implements <a href="../../../../xal/tools/beam/calc/ISimulationResults.ISimLocResults.html" title="interface in xal.tools.beam.calc">ISimulationResults.ISimLocResults</a>&lt;<a href="../../../../xal/model/probe/traj/TransferMapState.html" title="class in xal.model.probe.traj">TransferMapState</a>&gt;, <a href="../../../../xal/tools/beam/calc/ISimulationResults.ISimEnvResults.html" title="interface in xal.tools.beam.calc">ISimulationResults.ISimEnvResults</a>&lt;<a href="../../../../xal/model/probe/traj/TransferMapState.html" title="class in xal.model.probe.traj">TransferMapState</a>&gt;</pre>
<div class="block">Class for performing the calculations expressed in the
 <code>ISimEnvResults</code> interface in the context of
 a particle beam system without regard to the particle.
 That is, only properties of the machine are computed, no
 attributes or properties of the beam are required for the 
 computations.</div>
<dl>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>Nov 7, 2013</dd>
</dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== NESTED CLASS SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="nested.class.summary">
<!--   -->
</a>
<h3>Nested Class Summary</h3>
<ul class="blockList">
<li class="blockList"><a name="nested.classes.inherited.from.class.xal.tools.beam.calc.ISimulationResults">
<!--   -->
</a>
<h3>Nested classes/interfaces inherited from interface&nbsp;xal.tools.beam.calc.<a href="../../../../xal/tools/beam/calc/ISimulationResults.html" title="interface in xal.tools.beam.calc">ISimulationResults</a></h3>
<code><a href="../../../../xal/tools/beam/calc/ISimulationResults.ISimEnvResults.html" title="interface in xal.tools.beam.calc">ISimulationResults.ISimEnvResults</a>&lt;<a href="../../../../xal/tools/beam/calc/ISimulationResults.ISimEnvResults.html" title="type parameter in ISimulationResults.ISimEnvResults">S</a>&gt;, <a href="../../../../xal/tools/beam/calc/ISimulationResults.ISimLocResults.html" title="interface in xal.tools.beam.calc">ISimulationResults.ISimLocResults</a>&lt;<a href="../../../../xal/tools/beam/calc/ISimulationResults.ISimLocResults.html" title="type parameter in ISimulationResults.ISimLocResults">S</a>&gt;</code></li>
</ul>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><span class="memberNameLink"><a href="../../../../xal/tools/beam/calc/CalculationsOnMachines.html#CalculationsOnMachines-xal.model.probe.traj.Trajectory-">CalculationsOnMachines</a></span>(<a href="../../../../xal/model/probe/traj/Trajectory.html" title="class in xal.model.probe.traj">Trajectory</a>&lt;<a href="../../../../xal/model/probe/traj/TransferMapState.html" title="class in xal.model.probe.traj">TransferMapState</a>&gt;&nbsp;datSim)</code>
<div class="block">
 Constructor for <code>CalculationsOnMachines</code>.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t1" class="tableTab"><span><a href="javascript:show(1);">Static Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>protected <a href="../../../../xal/tools/beam/PhaseMatrix.html" title="class in xal.tools.beam">PhaseMatrix</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../xal/tools/beam/calc/CalculationsOnMachines.html#calculateFullLatticeMatrixAt-xal.model.probe.traj.TransferMapState-">calculateFullLatticeMatrixAt</a></span>(<a href="../../../../xal/model/probe/traj/TransferMapState.html" title="class in xal.model.probe.traj">TransferMapState</a>&nbsp;state)</code>
<div class="block">
 Calculates and returns the full lattice matrix for the machine at the
 given state location.</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code><a href="../../../../xal/tools/math/r3/R3.html" title="class in xal.tools.math.r3">R3</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../xal/tools/beam/calc/CalculationsOnMachines.html#computeBetatronPhase-xal.model.probe.traj.TransferMapState-">computeBetatronPhase</a></span>(<a href="../../../../xal/model/probe/traj/TransferMapState.html" title="class in xal.model.probe.traj">TransferMapState</a>&nbsp;state)</code>
<div class="block">
 This is the phase advance for the given state location.</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code><a href="../../../../xal/tools/beam/PhaseVector.html" title="class in xal.tools.beam">PhaseVector</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../xal/tools/beam/calc/CalculationsOnMachines.html#computeChromAberration-xal.model.probe.traj.TransferMapState-">computeChromAberration</a></span>(<a href="../../../../xal/model/probe/traj/TransferMapState.html" title="class in xal.model.probe.traj">TransferMapState</a>&nbsp;state)</code>
<div class="block">Computes the chromatic aberration for one pass around the ring starting at the given
 state location, or from the entrance to state position for a linear
 machine.</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code><a href="../../../../xal/tools/beam/PhaseVector.html" title="class in xal.tools.beam">PhaseVector</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../xal/tools/beam/calc/CalculationsOnMachines.html#computeChromDispersion-xal.model.probe.traj.TransferMapState-">computeChromDispersion</a></span>(<a href="../../../../xal/model/probe/traj/TransferMapState.html" title="class in xal.model.probe.traj">TransferMapState</a>&nbsp;state)</code>
<div class="block">
 Calculates the fixed point (closed orbit) in transverse phase space
 at the given state location in the presence of dispersion.</div>
</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code><a href="../../../../xal/tools/beam/PhaseVector.html" title="class in xal.tools.beam">PhaseVector</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../xal/tools/beam/calc/CalculationsOnMachines.html#computeCoordinatePosition-xal.model.probe.traj.TransferMapState-">computeCoordinatePosition</a></span>(<a href="../../../../xal/model/probe/traj/TransferMapState.html" title="class in xal.model.probe.traj">TransferMapState</a>&nbsp;state)</code>
<div class="block">
 We return the projective portion of the full-turn transfer
 map &phi;<sub><i>n</i></sub> : <b>P</b><sup>6</sup> &rarr; <b>P</b><sup>6</sup>
 where <i>n</i> is the index of the given state <i>S<sub>n</sub></i>.</div>
</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code><a href="../../../../xal/tools/beam/PhaseVector.html" title="class in xal.tools.beam">PhaseVector</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../xal/tools/beam/calc/CalculationsOnMachines.html#computeFixedOrbit-xal.model.probe.traj.TransferMapState-">computeFixedOrbit</a></span>(<a href="../../../../xal/model/probe/traj/TransferMapState.html" title="class in xal.model.probe.traj">TransferMapState</a>&nbsp;state)</code>
<div class="block">
 Get the fixed point at this state location about which betatron oscillations occur.</div>
</td>
</tr>
<tr id="i6" class="altColor">
<td class="colFirst"><code>static <a href="../../../../xal/tools/beam/PhaseMap.html" title="class in xal.tools.beam">PhaseMap</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../xal/tools/beam/calc/CalculationsOnMachines.html#computeTransferMap-xal.model.probe.traj.TransferMapState-xal.model.probe.traj.TransferMapState-">computeTransferMap</a></span>(<a href="../../../../xal/model/probe/traj/TransferMapState.html" title="class in xal.model.probe.traj">TransferMapState</a>&nbsp;state1,
                  <a href="../../../../xal/model/probe/traj/TransferMapState.html" title="class in xal.model.probe.traj">TransferMapState</a>&nbsp;state2)</code>
<div class="block">Convenience method for computing the transfer map between two state locations, say <i>S</i><sub>1</sub>
 and <i>S</i><sub>2</sub>.</div>
</td>
</tr>
<tr id="i7" class="rowColor">
<td class="colFirst"><code><a href="../../../../xal/tools/beam/PhaseMatrix.html" title="class in xal.tools.beam">PhaseMatrix</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../xal/tools/beam/calc/CalculationsOnMachines.html#computeTransferMatrix-java.lang.String-java.lang.String-">computeTransferMatrix</a></span>(java.lang.String&nbsp;strIdElemFrom,
                     java.lang.String&nbsp;strIdElemTo)</code>
<div class="block">
 Returns the state response matrix calculated from the front face of
 elemFrom to the back face of elemTo.</div>
</td>
</tr>
<tr id="i8" class="altColor">
<td class="colFirst"><code>static <a href="../../../../xal/tools/beam/PhaseMatrix.html" title="class in xal.tools.beam">PhaseMatrix</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../xal/tools/beam/calc/CalculationsOnMachines.html#computeTransferMatrix-xal.model.probe.traj.TransferMapState-xal.model.probe.traj.TransferMapState-">computeTransferMatrix</a></span>(<a href="../../../../xal/model/probe/traj/TransferMapState.html" title="class in xal.model.probe.traj">TransferMapState</a>&nbsp;state1,
                     <a href="../../../../xal/model/probe/traj/TransferMapState.html" title="class in xal.model.probe.traj">TransferMapState</a>&nbsp;state2)</code>
<div class="block">Convenience method for computing the transfer matrix between two state locations, say <i>S</i><sub>1</sub>
 and <i>S</i><sub>2</sub>.</div>
</td>
</tr>
<tr id="i9" class="rowColor">
<td class="colFirst"><code><a href="../../../../xal/tools/beam/Twiss.html" title="class in xal.tools.beam">Twiss</a>[]</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../xal/tools/beam/calc/CalculationsOnMachines.html#computeTwissParameters-xal.model.probe.traj.TransferMapState-">computeTwissParameters</a></span>(<a href="../../../../xal/model/probe/traj/TransferMapState.html" title="class in xal.model.probe.traj">TransferMapState</a>&nbsp;state)</code>
<div class="block">
 Computes the closed orbit Twiss parameters at this state location representing
 the matched beam envelope when treating the trajectory as a lattice of 
 periodic cells.</div>
</td>
</tr>
<tr id="i10" class="altColor">
<td class="colFirst"><code><a href="../../../../xal/tools/beam/PhaseMap.html" title="class in xal.tools.beam">PhaseMap</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../xal/tools/beam/calc/CalculationsOnMachines.html#getFullTransferMap--">getFullTransferMap</a></span>()</code>
<div class="block">Returns the transfer map of the full machine lattice represented by the
 associated simulation trajectory.</div>
</td>
</tr>
<tr id="i11" class="rowColor">
<td class="colFirst"><code><a href="../../../../xal/tools/beam/Twiss.html" title="class in xal.tools.beam">Twiss</a>[]</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../xal/tools/beam/calc/CalculationsOnMachines.html#getMatchedTwiss--">getMatchedTwiss</a></span>()</code>
<div class="block">
 Returns the collection of matched Courant-Snyder parameters for each phase
 plane.</div>
</td>
</tr>
<tr id="i12" class="altColor">
<td class="colFirst"><code><a href="../../../../xal/model/probe/traj/Trajectory.html" title="class in xal.model.probe.traj">Trajectory</a>&lt;<a href="../../../../xal/model/probe/traj/TransferMapState.html" title="class in xal.model.probe.traj">TransferMapState</a>&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../xal/tools/beam/calc/CalculationsOnMachines.html#getTrajectory--">getTrajectory</a></span>()</code>
<div class="block">Returns the simulation trajectory from which all the machine properties are
 computed.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.xal.tools.beam.calc.CalculationEngine">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;xal.tools.beam.calc.<a href="../../../../xal/tools/beam/calc/CalculationEngine.html" title="class in xal.tools.beam.calc">CalculationEngine</a></h3>
<code><a href="../../../../xal/tools/beam/calc/CalculationEngine.html#calculateAberration-xal.tools.beam.PhaseMatrix-double-">calculateAberration</a>, <a href="../../../../xal/tools/beam/calc/CalculationEngine.html#calculateDispersion-xal.tools.beam.PhaseMatrix-double-">calculateDispersion</a>, <a href="../../../../xal/tools/beam/calc/CalculationEngine.html#calculateFixedPoint-xal.tools.beam.PhaseMatrix-">calculateFixedPoint</a>, <a href="../../../../xal/tools/beam/calc/CalculationEngine.html#calculateMatchedTwiss-xal.tools.beam.PhaseMatrix-">calculateMatchedTwiss</a>, <a href="../../../../xal/tools/beam/calc/CalculationEngine.html#calculatePhaseAdvance_old-xal.tools.beam.PhaseMatrix-xal.tools.beam.Twiss:A-xal.tools.beam.Twiss:A-">calculatePhaseAdvance_old</a>, <a href="../../../../xal/tools/beam/calc/CalculationEngine.html#calculatePhaseAdvance-xal.tools.beam.PhaseMatrix-xal.tools.beam.Twiss:A-xal.tools.beam.Twiss:A-">calculatePhaseAdvance</a>, <a href="../../../../xal/tools/beam/calc/CalculationEngine.html#calculatePhaseAdvPerCell-xal.tools.beam.PhaseMatrix-">calculatePhaseAdvPerCell</a>, <a href="../../../../xal/tools/beam/calc/CalculationEngine.html#calculateTunePerCell-xal.tools.beam.PhaseMatrix-">calculateTunePerCell</a>, <a href="../../../../xal/tools/beam/calc/CalculationEngine.html#computeTwiss-xal.model.probe.TwissProbe-xal.tools.beam.PhaseMatrix-double-">computeTwiss</a></code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="CalculationsOnMachines-xal.model.probe.traj.Trajectory-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>CalculationsOnMachines</h4>
<pre>public&nbsp;CalculationsOnMachines(<a href="../../../../xal/model/probe/traj/Trajectory.html" title="class in xal.model.probe.traj">Trajectory</a>&lt;<a href="../../../../xal/model/probe/traj/TransferMapState.html" title="class in xal.model.probe.traj">TransferMapState</a>&gt;&nbsp;datSim)
                       throws java.lang.IllegalArgumentException</pre>
<div class="block"><p>
 Constructor for <code>CalculationsOnMachines</code>.  Accepts the 
 <code>TransferMapTrajectory</code>
 object and extracts the final state and full trajectory transfer map.  
 Quantities that are 
 required for subsequent machine property calculations are also computed, such as
 phase advance through the trajectory (modulo 2&pi;), entrance position 
 "fixed orbit" (that is, the orbit that is invariant for repeated applications of the 
 linear part of the transfer map (separating the projective part), 
 and the matched envelope when treating the full transfer map as the map
 for a periodic cell.
 </p></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>datSim</code> - the simulation data for the ring, a "transfer map trajectory" object</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.lang.IllegalArgumentException</code> - the trajectory does not contain <code>TransferMapState</code> objects</dd>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>Nov 7, 2013</dd>
</dl>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="computeTransferMatrix-xal.model.probe.traj.TransferMapState-xal.model.probe.traj.TransferMapState-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>computeTransferMatrix</h4>
<pre>public static&nbsp;<a href="../../../../xal/tools/beam/PhaseMatrix.html" title="class in xal.tools.beam">PhaseMatrix</a>&nbsp;computeTransferMatrix(<a href="../../../../xal/model/probe/traj/TransferMapState.html" title="class in xal.model.probe.traj">TransferMapState</a>&nbsp;state1,
                                                <a href="../../../../xal/model/probe/traj/TransferMapState.html" title="class in xal.model.probe.traj">TransferMapState</a>&nbsp;state2)</pre>
<div class="block">Convenience method for computing the transfer matrix between two state locations, say <i>S</i><sub>1</sub>
 and <i>S</i><sub>2</sub>.  Let <i>s</i><sub>0</sub> be the axis location of the beamline
 entrance, <i>s</i><sub>1</sub> the location of state <i>S</i><sub>1</sub>, and 
 <i>s</i><sub>2</sub> the location of state <i>S</i><sub>2</sub>.  Each state object <i>S<sub>n</sub></i>
 contains the transfer matrix <b>&Phi;</b>(<i>s<sub>n</sub></i>,<i>s</i><sub>0</sub>)
 which takes phases coordinates at the beamline entrance to the position of state <i>S<sub>n</sub></i>. 
 The transfer matrix
 <b>&Phi;</b>(<i>s</i><sub>2</sub>,<i>s</i><sub>1</sub>) taking phase coordinates <b>z</b><sub>1</sub>
 (and covariance matrix <b>&sigma;</b><sub>1</sub>)
 from position <i>s</i><sub>1</sub> to position <i>s</i><sub>2</sub> is then given
 by
 <br/>
 <br/>
 &nbsp; &nbsp; <b>&Phi;</b>(<i>s</i><sub>2</sub>,<i>s</i><sub>1</sub>) = 
                  <b>&Phi;</b>(<i>s</i><sub>2</sub>,<i>s</i><sub>0</sub>)
                  <b>&Phi;</b>(<i>s</i><sub>1</sub>,<i>s</i><sub>0</sub>)<sup>-1</sup> ,
 <br/>
 <br/>
 where <b>&Phi;</b>(<i>s</i><sub>2</sub>,<i>s</i><sub>0</sub>) is the transfer matrix between
 the beamline entrance <i>s</i><sub>0</sub> and the position <i>s</i><sub>2</sub>
 of state <i>S</i><sub>2</sub>, and <b>&Phi;</b>(<i>s</i><sub>1</sub>,<i>s</i><sub>0</sub>) is the
 transfer matrix between the beamline entrance <i>s</i><sub>0</sub> and the position <i>s</i><sub>1</sub>
 of state <i>S</i><sub>1</sub>.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>state1</code> - trajectory state <i>S</i><sub>1</sub> of starting location <i>s</i><sub>1</sub></dd>
<dd><code>state2</code> - trajectory state <i>S</i><sub>2</sub> of final location <i>s</i><sub>2</sub></dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>transfer matrix <b>&Phi;</b>(<i>s</i><sub>2</sub>,<i>s</i><sub>1</sub>) between
                  locations <i>s</i><sub>1</sub> and <i>s</i><sub>2</sub></dd>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>Jun 23, 2014</dd>
</dl>
</li>
</ul>
<a name="computeTransferMap-xal.model.probe.traj.TransferMapState-xal.model.probe.traj.TransferMapState-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>computeTransferMap</h4>
<pre>public static&nbsp;<a href="../../../../xal/tools/beam/PhaseMap.html" title="class in xal.tools.beam">PhaseMap</a>&nbsp;computeTransferMap(<a href="../../../../xal/model/probe/traj/TransferMapState.html" title="class in xal.model.probe.traj">TransferMapState</a>&nbsp;state1,
                                          <a href="../../../../xal/model/probe/traj/TransferMapState.html" title="class in xal.model.probe.traj">TransferMapState</a>&nbsp;state2)</pre>
<div class="block">Convenience method for computing the transfer map between two state locations, say <i>S</i><sub>1</sub>
 and <i>S</i><sub>2</sub>.  Let <i>s</i><sub>0</sub> be the axis location of the beamline
 entrance, <i>s</i><sub>1</sub> the location of state <i>S</i><sub>1</sub>, and 
 <i>s</i><sub>2</sub> the location of state <i>S</i><sub>2</sub>.  Each state object <i>S<sub>n</sub></i>
 contains the transfer map <b>T</b>(<i>s<sub>n</sub></i>,<i>s</i><sub>0</sub>)
 which takes phases coordinates at the beamline entrance to the position of state <i>S<sub>n</sub></i>. 
 The transfer map
 <b>T</b>(<i>s</i><sub>2</sub>,<i>s</i><sub>1</sub>) taking phase coordinates <b>z</b><sub>1</sub>
 (and covariance matrix <b>&sigma;</b><sub>1</sub>)
 from position <i>s</i><sub>1</sub> to position <i>s</i><sub>2</sub> is then given
 by
 <br/>
 <br/>
 &nbsp; &nbsp; <b>T</b>(<i>s</i><sub>2</sub>,<i>s</i><sub>1</sub>) = 
                  <b>T</b>(<i>s</i><sub>2</sub>,<i>s</i><sub>0</sub>) &#x2218;
                  <b>T</b>(<i>s</i><sub>1</sub>,<i>s</i><sub>0</sub>)<sup>-1</sup> ,
 <br/>
 <br/>
 where <b>T</b>(<i>s</i><sub>2</sub>,<i>s</i><sub>0</sub>) is the transfer map between
 the beamline entrance <i>s</i><sub>0</sub> and the position <i>s</i><sub>2</sub>
 of state <i>S</i><sub>2</sub>, and <b>T</b>(<i>s</i><sub>1</sub>,<i>s</i><sub>0</sub>) is the
 transfer map between the beamline entrance <i>s</i><sub>0</sub> and the position <i>s</i><sub>1</sub>
 of state <i>S</i><sub>1</sub>.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>state1</code> - trajectory state <i>S</i><sub>1</sub> of starting location <i>s</i><sub>1</sub></dd>
<dd><code>state2</code> - trajectory state <i>S</i><sub>2</sub> of final location <i>s</i><sub>2</sub></dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>transfer map <b>T</b>(<i>s</i><sub>2</sub>,<i>s</i><sub>1</sub>) between
                  locations <i>s</i><sub>1</sub> and <i>s</i><sub>2</sub></dd>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>Nov 4, 2014</dd>
</dl>
</li>
</ul>
<a name="getTrajectory--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getTrajectory</h4>
<pre>public&nbsp;<a href="../../../../xal/model/probe/traj/Trajectory.html" title="class in xal.model.probe.traj">Trajectory</a>&lt;<a href="../../../../xal/model/probe/traj/TransferMapState.html" title="class in xal.model.probe.traj">TransferMapState</a>&gt;&nbsp;getTrajectory()</pre>
<div class="block">Returns the simulation trajectory from which all the machine properties are
 computed.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>simulation trajectory from which this object was initialized</dd>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>Nov 7, 2013</dd>
</dl>
</li>
</ul>
<a name="getFullTransferMap--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getFullTransferMap</h4>
<pre>public&nbsp;<a href="../../../../xal/tools/beam/PhaseMap.html" title="class in xal.tools.beam">PhaseMap</a>&nbsp;getFullTransferMap()</pre>
<div class="block">Returns the transfer map of the full machine lattice represented by the
 associated simulation trajectory.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the transfer map of the last state of the associated trajectory</dd>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>Nov 7, 2013</dd>
</dl>
</li>
</ul>
<a name="getMatchedTwiss--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getMatchedTwiss</h4>
<pre>public&nbsp;<a href="../../../../xal/tools/beam/Twiss.html" title="class in xal.tools.beam">Twiss</a>[]&nbsp;getMatchedTwiss()</pre>
<div class="block"><p>
 Returns the collection of matched Courant-Snyder parameters for each phase
 plane. The Courant-Snyder parameters describe the matched beam envelopes
 when treating the trajectory of transfer maps as that for a periodic
 lattice.  There the beam envelopes would have the same characteristics at the
 beginning and end of the lattice.
 </p>
 <p>
 These are computed parameters calculated once at construction time.
 </p></div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the Courant-Snyder parameters of a beam needed to match it into the transfer
          maps of the associated trajectory when treated as a periodic lattice</dd>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>Nov 7, 2013</dd>
</dl>
</li>
</ul>
<a name="computeTransferMatrix-java.lang.String-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>computeTransferMatrix</h4>
<pre>public&nbsp;<a href="../../../../xal/tools/beam/PhaseMatrix.html" title="class in xal.tools.beam">PhaseMatrix</a>&nbsp;computeTransferMatrix(java.lang.String&nbsp;strIdElemFrom,
                                         java.lang.String&nbsp;strIdElemTo)</pre>
<div class="block"><p>
 Returns the state response matrix calculated from the front face of
 elemFrom to the back face of elemTo. This is a convenience wrapper to
 the real method in the trajectory class
 </p>
 <p>
 This method was moved here from EnvelopeTrajectory/EnvelopeProbe where
 it was eliminated since <code>Trajectory</code> was genericized.
 </p></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>strIdElemFrom</code> - String identifying starting lattice element</dd>
<dd><code>strIdElemTo</code> - String identifying ending lattice element</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>response matrix from elemFrom to elemTo</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><code>EnvelopeTrajectory#computeTransferMatrix(String, String)</code></dd>
</dl>
</li>
</ul>
<a name="computeCoordinatePosition-xal.model.probe.traj.TransferMapState-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>computeCoordinatePosition</h4>
<pre>public&nbsp;<a href="../../../../xal/tools/beam/PhaseVector.html" title="class in xal.tools.beam">PhaseVector</a>&nbsp;computeCoordinatePosition(<a href="../../../../xal/model/probe/traj/TransferMapState.html" title="class in xal.model.probe.traj">TransferMapState</a>&nbsp;state)</pre>
<div class="block"><p>
 We return the projective portion of the full-turn transfer
 map &phi;<sub><i>n</i></sub> : <b>P</b><sup>6</sup> &rarr; <b>P</b><sup>6</sup>
 where <i>n</i> is the index of the given state <i>S<sub>n</sub></i>.  This is the
 image &Delta;<b>z</b> of the value 
 <b>0</b> &in; <b>P</b><sup>6</sup> &cong; <b>R</b><sup>6</sup> &times; {1}.  
 That is the value &Delta;<b>z</b> = &phi;<sub><i>n</i></sub>(<b>0</b>).
 </p>
 <p>
 Recall that the transfer
 map &phi; is a <code>PhaseMap</code> object containing a first-order component which is
 a linear operator on projective space <b>P</b><sup>6</sup>.  As such, this
 <code>PhaseMatrix</code> object <b>&Phi;</b> is embedded in <b>R</b><sup>7&times;7</sup>.  
 The 7<sup><i>th</i></sup> column &Delta;<b>z</b> of <b>&Phi;</b> is the column of 
 translation operations on a phase vector 
 <b>z</b> &in; <b>P</b><sup>6</sup> &sub; <b>R</b><sup>6</sup> &times; {1} since
 <b>z</b> &in; <b>P</b><sup>6</sup> is represented 
 <br/>
 <br/>
 &nbsp; &nbsp; <b>z</b> = (<i>x, x', y, y', z, z', </i>1)<sup><i>T</i></sup> .
 <br/>
 <br/>  
 Thus, the action of <b>&Phi;</b> can be (loosely) decomposed as 
 <br/>
 <br/>
 &nbsp; &nbsp; <b>&Phi; &sdot; z</b> = <b>Mz</b> + &Delta;<b>z</b> ,
 <br/>
 <br/>
 where <b>M</b> &in; <i>Sp</i>(6), the symplectic group.  This method returns the
 component &Delta;<b>z</b> of the transfer map.
 </p></div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../xal/tools/beam/calc/ISimulationResults.ISimLocResults.html#computeCoordinatePosition-S-">computeCoordinatePosition</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../xal/tools/beam/calc/ISimulationResults.ISimLocResults.html" title="interface in xal.tools.beam.calc">ISimulationResults.ISimLocResults</a>&lt;<a href="../../../../xal/model/probe/traj/TransferMapState.html" title="class in xal.model.probe.traj">TransferMapState</a>&gt;</code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>state</code> - state containing location of returned translation vector</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the translation vector &Delta;<b>z</b> of the given transfer map</dd>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>Oct 22, 2013</dd>
</dl>
</li>
</ul>
<a name="computeFixedOrbit-xal.model.probe.traj.TransferMapState-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>computeFixedOrbit</h4>
<pre>public&nbsp;<a href="../../../../xal/tools/beam/PhaseVector.html" title="class in xal.tools.beam">PhaseVector</a>&nbsp;computeFixedOrbit(<a href="../../../../xal/model/probe/traj/TransferMapState.html" title="class in xal.model.probe.traj">TransferMapState</a>&nbsp;state)</pre>
<div class="block"><p>
 Get the fixed point at this state location about which betatron oscillations occur.
 </p>
 <p> 
 Calculate the fixed point solution vector representing the closed orbit at the 
 location of this element.
 We first attempt to find the fixed point for the full six phase space coordinates.
 Let <b>&Phi;</b> denote the one-turn map for a ring.  The fixed point 
 <b>z</b> &in; <b>R</b><sup>6</sup>&times;{1} in homogeneous phase space coordinates
 is that which is invariant under <b>&Phi;</b>, that is,
 <br/>
 <br/>
 &nbsp; &nbsp; <b>&Phi;z</b> = <b>z</b> .
 <br/>
 <br/> 
 This method returns that vector <b>z</b>.  
 </p>
 <p>
 Recall that the <i>homogeneous</i> transfer matrix <b>&Phi;</b> for the ring 
 has final row that represents the translation <b>&Delta;</b> of the particle
 for the circuit around the ring.  The 6&times;6 sub-matrix of <b>&Phi;</b> represents
 the (linear) action of the bending magnetics and quadrupoles and corresponds to the
 matrix <b>T</b> &in; <b>R</b><sup>6&times;6</sup> (here <b>T</b> is linear). 
 Thus, we can write the linear operator <b>&Phi;</b>
 as the augmented system 
 <br/>
 <br/>
 <pre>
 &nbsp; &nbsp; <b>&Phi;</b> = |<b>T</b> <b>&Delta;</b> |,   <b>z</b> &equiv; |<b>p</b>| ,
         |<b>0</b> 1 |        |1|
 </pre> 
 where <b>p</b> is the projection of <b>z</b> onto the ambient phase space
 <b>R</b><sup>6</sup> (without homogeneous the homogeneous coordinate).
 </p>
 <p>
 Putting this together we get
 <br/>
 <br/>
 &nbsp; &nbsp; <b>&Phi;z</b> = <b>Tp</b> + <b>&Delta;</b> = <b>p</b> , 
 <br/>
 <br/>
 to which the solution is
 <br/>
 <br/>
 &nbsp; &nbsp; <b>p</b> = -(<b>T</b> - <b>I</b>)<sup>-1</sup><b>&Delta;</b>
 <br/>
 <br/>
 assuming it exists.  The question of solution existence falls upon the
 resolvent <b>R</b> &equiv; (<b>T</b> - <b>I</b>)<sup>-1</sup> of <b>T</b>.
 By inspection we can see that <b>p</b> is defined so long as the eigenvalues
 of <b>T</b> are located away from 1.
 In this case the returned value is the augmented vector 
 (<b>p</b> 1)<sup><i>T</i></sup> &in; <b>R</b><sup>6</sup> &times; {1}.
 </p>
 <p>
 When the set of eigenvectors does contain 1, we attempt to find the solution for the
 transverse phase space.  That is, we take vector <b>p</b> &in; <b>R</b><sup>4</sup>
 and <b>T</b> &in; <b>R</b><sup>4&times;4</sup> where 
 <b>T</b> = proj<sub>4&times;4</sub> <b>&Phi;</b>.  The returned value is then
 <b>z</b> = (<b>p</b> 0 0 1)<sup><i>T</i></sup>.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../xal/tools/beam/calc/ISimulationResults.ISimLocResults.html#computeFixedOrbit-S-">computeFixedOrbit</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../xal/tools/beam/calc/ISimulationResults.ISimLocResults.html" title="interface in xal.tools.beam.calc">ISimulationResults.ISimLocResults</a>&lt;<a href="../../../../xal/model/probe/traj/TransferMapState.html" title="class in xal.model.probe.traj">TransferMapState</a>&gt;</code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>state</code> - state containing transfer map and location used in these calculations</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>fixed point solution  (<i>x,x',y,y',z,z'</i>,1) for the given phase matrix</dd>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>Oct 25, 2013</dd>
</dl>
</li>
</ul>
<a name="computeChromAberration-xal.model.probe.traj.TransferMapState-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>computeChromAberration</h4>
<pre>public&nbsp;<a href="../../../../xal/tools/beam/PhaseVector.html" title="class in xal.tools.beam">PhaseVector</a>&nbsp;computeChromAberration(<a href="../../../../xal/model/probe/traj/TransferMapState.html" title="class in xal.model.probe.traj">TransferMapState</a>&nbsp;state)</pre>
<div class="block">Computes the chromatic aberration for one pass around the ring starting at the given
 state location, or from the entrance to state position for a linear
 machine.  The returned vector is the displacement from the closed orbit caused 
 by a unit momentum offset (&delta;<i>p</i> = 1).  See the documentation in 
 <code>ISimLocResults#computeChromAberration(ProbeState)</code> for a more detailed
 exposition.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../xal/tools/beam/calc/ISimulationResults.ISimLocResults.html#computeChromAberration-S-">computeChromAberration</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../xal/tools/beam/calc/ISimulationResults.ISimLocResults.html" title="interface in xal.tools.beam.calc">ISimulationResults.ISimLocResults</a>&lt;<a href="../../../../xal/model/probe/traj/TransferMapState.html" title="class in xal.model.probe.traj">TransferMapState</a>&gt;</code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>state</code> - simulation state where parameters are computed</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the vector <b>&Delta;</b> of dispersion coefficients</dd>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>Nov 15, 2013</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><code>xal.tools.beam.calc.ISimLocResults#computeChromAberration(xal.model.probe.traj.ProbeState)</code></dd>
</dl>
</li>
</ul>
<a name="computeTwissParameters-xal.model.probe.traj.TransferMapState-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>computeTwissParameters</h4>
<pre>public&nbsp;<a href="../../../../xal/tools/beam/Twiss.html" title="class in xal.tools.beam">Twiss</a>[]&nbsp;computeTwissParameters(<a href="../../../../xal/model/probe/traj/TransferMapState.html" title="class in xal.model.probe.traj">TransferMapState</a>&nbsp;state)</pre>
<div class="block"><p>
 Computes the closed orbit Twiss parameters at this state location representing
 the matched beam envelope when treating the trajectory as a lattice of 
 periodic cells.
 </p>
 <p>
 Returns the array of twiss objects for this state for all three planes.
 </p>
 <p>
 Calculates the matched Courant-Snyder parameters for the given
 period cell transfer matrix and phase advances.  When the given transfer matrix
 is the full-turn matrix for a ring the computed Twiss parameters are the matched
 envelopes for the ring at that point.
 </p>
 <p>
 Let <b>&Phi;</b> denote the transfer matrix from the machine beginning to the given
 state location (it is contained in the given state). 
 It is assumed to be the transfer matrix through
 at least one cell in a periodic lattice.  Internally, the array of phase advances 
 {&sigma;<sub><i>x</i></sub>, &sigma;<sub><i>y</i></sub>, &sigma;<sub><i>x</i></sub>}
 are assumed to be the particle phase advances through the cell for the matched 
 solution.   These are computed with the method 
 <code><a href="../../../../xal/tools/beam/calc/CalculationEngine.html#calculatePhaseAdvPerCell-xal.tools.beam.PhaseMatrix-"><code>CalculationEngine.calculatePhaseAdvPerCell(PhaseMatrix)</code></a></code>.
 </p> 
 <p>
 The returned Courant-Snyder parameters (&alpha;, &beta;, &epsilon;) are invariant
 under the action of the given phase matrix, that is, they are matched.  All that 
 is require are &alpha; and &beta; since &epsilon; specifies the size of the beam
 envelope.  Consequently the returned &epsilon; is <code>NaN</code>.
 </p>
 The following are the calculations used for the Courant-Snyder parameters of a 
 single phase plane:
 <br/>
 <br/>
 &nbsp; &nbsp; &alpha; &equiv; -<i>ww'</i> = (&phi;<sub>11</sub> - &phi;<sub>22</sub>)/(2 sin &sigma;) ,
 <br/>
 <br/>
 &nbsp; &nbsp; &beta; &equiv; <i>w</i><sup>2</sup> = &phi;<sub>12</sub>/sin &sigma;
 <br/>
 <br/>
 where &phi;<sub><i>ij</i></sub> are the elements of the 2&times;2 diagonal blocks of
 <b>&Phi;</b> corresponding the the particular phase plane, the function <i>w</i>
 is taken from Reiser, and &sigma; is the phase advance through the cell for the 
 particular phase plance.
 </p></div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../xal/tools/beam/calc/ISimulationResults.ISimEnvResults.html#computeTwissParameters-S-">computeTwissParameters</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../xal/tools/beam/calc/ISimulationResults.ISimEnvResults.html" title="interface in xal.tools.beam.calc">ISimulationResults.ISimEnvResults</a>&lt;<a href="../../../../xal/model/probe/traj/TransferMapState.html" title="class in xal.model.probe.traj">TransferMapState</a>&gt;</code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>state</code> - state containing transfer map and location used in these calculations</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>array (twiss-H, twiss-V, twiss-L)</dd>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>Aug 14, 2013</dd>
</dl>
</li>
</ul>
<a name="computeBetatronPhase-xal.model.probe.traj.TransferMapState-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>computeBetatronPhase</h4>
<pre>public&nbsp;<a href="../../../../xal/tools/math/r3/R3.html" title="class in xal.tools.math.r3">R3</a>&nbsp;computeBetatronPhase(<a href="../../../../xal/model/probe/traj/TransferMapState.html" title="class in xal.model.probe.traj">TransferMapState</a>&nbsp;state)</pre>
<div class="block"><p>
 This is the phase advance for the given state location.
 </p>
 <p>
 Compute and return the particle phase advance from the trajectory beginning
 to the given state location.
 </p>
 <p>
 Internally the method calculates the phase advances using the initial and final 
 Courant-Snyder &alpha; and &beta; values for the matched beam at the trajectory
 beginning and the location of the given state, respectively. 
 These Courant-Snyder parameters are computed as the matched beam envelope at the
 trajectory beginning and the given state location.
 </p>
 <p>
 Let <b>&Phi;</b> represent the transfer matrix from the initial ring location to
 the given state location.  The computed quantity is the general
 phase advance of the particle through the transfer matrix <b>&Phi;</b>, and no special
 requirements are placed upon <b>&Phi;</b> (e.g., periodicity).  One phase
 advance is provided for each phase plane, i.e., 
 (&sigma;<sub><i>x</i></sub>, &sigma;<sub><i>z</i></sub>, &sigma;<sub><i>z</i></sub>).  
 </p>
 <p>
 The definition of phase advance &sigma; is given by
 <br/>
 <br/>
 &nbsp; &nbsp; &sigma;(<i>s</i>) &equiv; &int;<sup><i>s</i></sup> [1/&beta;(<i>t</i>)]<i>dt</i> ,
 <br/>
 <br/>
 where &beta;(<i>s</i>) is the Courant-Snyder, envelope function, and the integral 
 is taken along the interval between the initial and final Courant-Snyder 
 parameters.
 </p>
 <p>
 The basic relation used to compute &sigma; is the following:
 <br/>
 <br/>
 &nbsp; &nbsp;  &sigma; = sin<sup>-1</sup> &phi;<sub>12</sub>/(&beta;<sub>1</sub>&beta;<sub>2</sub>)<sup>&frac12;</sup> ,
 <br/>
 <br/>
 where &phi;<sub>12</sub> is the element of <b>&Phi;</b> in the upper right corner of each 
 2&times;2 diagonal block, &beta;<sub>1</sub> is the initial beta function value (provided)
 and &beta;<sub>2</sub> is the final beta function value (provided).
 </p></div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../xal/tools/beam/calc/ISimulationResults.ISimEnvResults.html#computeBetatronPhase-S-">computeBetatronPhase</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../xal/tools/beam/calc/ISimulationResults.ISimEnvResults.html" title="interface in xal.tools.beam.calc">ISimulationResults.ISimEnvResults</a>&lt;<a href="../../../../xal/model/probe/traj/TransferMapState.html" title="class in xal.model.probe.traj">TransferMapState</a>&gt;</code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>state</code> - state containing transfer map and location used in these calculations</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>vector (&psi;<sub><i>x</i></sub>, &psi;<sub><i>y</i></sub>, &psi;<sub><i>x</i></sub>) of phases in radians</dd>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>Aug 14, 2013</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../xal/tools/beam/calc/CalculationEngine.html#calculatePhaseAdvance-xal.tools.beam.PhaseMatrix-xal.tools.beam.Twiss:A-xal.tools.beam.Twiss:A-"><code>CalculationEngine.calculatePhaseAdvance(PhaseMatrix, Twiss[], Twiss[])</code></a></dd>
</dl>
</li>
</ul>
<a name="computeChromDispersion-xal.model.probe.traj.TransferMapState-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>computeChromDispersion</h4>
<pre>public&nbsp;<a href="../../../../xal/tools/beam/PhaseVector.html" title="class in xal.tools.beam">PhaseVector</a>&nbsp;computeChromDispersion(<a href="../../../../xal/model/probe/traj/TransferMapState.html" title="class in xal.model.probe.traj">TransferMapState</a>&nbsp;state)</pre>
<div class="block"><p>
 Calculates the fixed point (closed orbit) in transverse phase space
 at the given state location in the presence of dispersion.  
 </p>
 <p>
 Let the full-turn map a the state location be denoted <b>&Phi;</b>.
 The transverse plane dispersion vector <b>&Delta;</b> is defined  
 <br/>
 <br/> 
 &nbsp; &nbsp; <b>&Delta;</b><sub><i>t</i></sub> &equiv; -(1/&gamma;<sup>2</sup>)[d<i>x</i>/d<i>z'</i>, d<i>x'</i>/d<i>z'</i>, d<i>y</i>/d<i>z'</i>, d<i>y'</i>/d<i>z'</i>]<sup><i>T</i></sup> .
 <br/>
 <br/>  
 It can be identified as the first 4 entries of the 6<sup><i>th</i></sup> 
 column in the transfer matrix <b>&Phi;</b>. The above vector
 quantifies the change in the transverse particle phase 
 coordinate position versus the change in particle momentum.  
 The factor -(1/&gamma;<sup>2</sup>) is needed to convert from longitudinal divergence
 angle <i>z'</i> used by XAL to momentum &delta;<i>p</i> &equiv; &Delta;<i>p</i>/<i>p</i> used in 
 the dispersion definition.  Specifically,
 <br/>
 <br/>
 &nbsp; &nbsp; &delta;<i>p</i> &equiv; &Delta;<i>p</i>/<i>p</i> = &gamma;<sup>2</sup><i>z</i>'
 <br/>
 <br/>
 As such, the above vector can be better described
 <br/>
 <br/> 
 &nbsp; &nbsp; <b>&Delta;</b><sub><i>t</i></sub> &equiv; [&Delta;<i>x</i>/&delta;<i>p</i>, &Delta;<i>x'</i>/&delta;<i>p</i>, &Delta;<i>y</i>/&delta;<i>p</i>, &Delta;<i>y'</i>/&delta;<i>p</i>]<sup><i>T</i></sup>
 <br/>
 <br/>
 explicitly describing the change in transverse phase coordinate for fractional
 change in momentum &delta;<i>p</i>.  
 </p>
 <p>
 Since we are only concerned with transverse phase space coordinates, we restrict ourselves to the 
 4&times;4 upper diagonal block of <b>&Phi;</b>, which we denote take <b>T</b>.  
 That is, <b>T</b> = &pi; &sdot; <b>&Phi;</b>
 where &pi; : <b>R</b><sup>6&times;6</sup> &rarr; <b>R</b><sup>4&times;4</sup> is the
 projection operator. 
 </p>
 <p>
 This method finds that point <b>z</b><sub><i>t</i></sub> &equiv; 
 (<i>x<sub>t</sub></i>, <i>x'<sub>t</sub></i>, <i>y<sub>t</sub></i>, <i>y'<sub>t</sub></i>)
 in transvse phase space that is invariant under the action of the ring for a given momentum spread
 &delta;<i>p</i>.  That is, the particle ends up
 in the same location each revolution. With a finite momentum spread of &delta;<i>p</i> &gt; 0
 we require this require that
 <br/>
 <br/>
 &nbsp; &nbsp; <b>Tz</b><sub><i>t</i></sub> + &delta;<i>p</i><b>&Delta;</b><sub><i>t</i></sub> = <b>z</b><sub><i>t</i></sub> ,
 <br/>
 <br/>
 which can be written
 <br/>
 <br/>
 &nbsp; <b>z</b><sub><i>t</i></sub> = &delta;<i>p</i>(<b>T</b> - <b>I</b>)<sup>-1</sup><b>&Delta;</b><sub><i>t</i></sub> ,
 <br/>
 <br/>
 where <b>I</b> is the identity matrix.  Dividing both sides by &delta;<i>p</i> yields the final
 result
 <br/>
 <br/>
 &nbsp; <b>z</b><sub>0</sub> &equiv; <b>z</b><sub><i>t</i></sub>/&delta;<i>p</i> = (<b>T</b> - <b>I</b>)<sup>-1</sup><b>&Delta;</b><sub><i>t</i></sub> ,
 <br/>
 <br/>
 which is the returned value of this method.  It is normalized by
 &delta;<i>p</i> so that we can compute the closed orbit for any given momentum spread.
 </p></div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../xal/tools/beam/calc/ISimulationResults.ISimEnvResults.html#computeChromDispersion-S-">computeChromDispersion</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../xal/tools/beam/calc/ISimulationResults.ISimEnvResults.html" title="interface in xal.tools.beam.calc">ISimulationResults.ISimEnvResults</a>&lt;<a href="../../../../xal/model/probe/traj/TransferMapState.html" title="class in xal.model.probe.traj">TransferMapState</a>&gt;</code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>state</code> - we are calculating the dispersion at this state location</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>The closed orbit fixed point <b>z</b><sub>0</sub> for finite 
                 dispersion, normalized by momentum spread.
                 Returned as an array [<i>x</i><sub>0</sub>,<i>x'</i><sub>0</sub>,<i>y</i><sub>0</sub>,<i>y'</i><sub>0</sub>]/&delta;<i>p</i></dd>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>Nov 8, 2013</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><code>xal.tools.beam.calc.ISimEnvResults#computeChromDispersion(xal.model.probe.traj.ProbeState)</code></dd>
</dl>
</li>
</ul>
<a name="calculateFullLatticeMatrixAt-xal.model.probe.traj.TransferMapState-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>calculateFullLatticeMatrixAt</h4>
<pre>protected&nbsp;<a href="../../../../xal/tools/beam/PhaseMatrix.html" title="class in xal.tools.beam">PhaseMatrix</a>&nbsp;calculateFullLatticeMatrixAt(<a href="../../../../xal/model/probe/traj/TransferMapState.html" title="class in xal.model.probe.traj">TransferMapState</a>&nbsp;state)</pre>
<div class="block"><p>
 Calculates and returns the full lattice matrix for the machine at the
 given state location.  Let <i>S<sub>n</sub></i> be the given state object at
 location <i>s<sub>n</sub></i>, and let <b>T</b><sub><i>n</i></sub> be the
 transfer matrix between locations <i>s</i><sub>0</sub> and <i>s<sub>n</sub></i> ,
 where <i>s</i><sub>0</sub> is the location of the full transfer matrix 
 <b>&Phi;</b><sub>0</sub> for this machine (end to end).  Then the full turn matrix 
 <b>&Phi;</b><sub><i>n</i></sub> for the machine at location <i>s<sub>n</sub></i>
 is given by
 <br/>
 <br/>
 &nbsp; &nbsp; <b>&Phi;</b><sub><i>n</i></sub> = <b>T</b><sub><i>n</i></sub> &sdot; <b>&Phi;</b><sub>0</sub>
               &sdot; <b>T</b><sub><i>n</i></sub><sup>-1</sup> .
 <br/>
 <br/>
 That is, we conjugate the full transfer map for this machine by the transfer map 
 for the given state.
 </p></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>state</code> - state object <i>S<sub>n</sub></i> for location <i>s<sub>n</sub></i>
                  containing transfer matrix <b>T</b><sub><i>n</i></sub></dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the full-turn map <b>&Phi;</b><sub><i>n</i></sub> at the location
                  <i>s<sub>n</sub></i> of the given state</dd>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>Oct 28, 2013</dd>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../xal/tools/beam/calc/CalculationsOnBeams.html" title="class in xal.tools.beam.calc"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../xal/tools/beam/calc/CalculationsOnParticles.html" title="class in xal.tools.beam.calc"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?xal/tools/beam/calc/CalculationsOnMachines.html" target="_top">Frames</a></li>
<li><a href="CalculationsOnMachines.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
